import {
  __commonJS,
  __require
} from "./chunk-3EJPJMEH.js";

// node_modules/@cometchat/chat-sdk-javascript/CometChat.js
var require_CometChat = __commonJS({
  "node_modules/@cometchat/chat-sdk-javascript/CometChat.js"(exports, module) {
    !function(e, t) {
      if ("object" == typeof exports && "object" == typeof module)
        module.exports = t();
      else if ("function" == typeof define && define.amd)
        define([], t);
      else {
        var n = t();
        for (var o in n)
          ("object" == typeof exports ? exports : e)[o] = n[o];
      }
    }(window, function() {
      return function(n) {
        var o = {};
        function s(e) {
          if (o[e])
            return o[e].exports;
          var t = o[e] = { i: e, l: false, exports: {} };
          return n[e].call(t.exports, t, t.exports, s), t.l = true, t.exports;
        }
        return s.m = n, s.c = o, s.d = function(e, t, n2) {
          s.o(e, t) || Object.defineProperty(e, t, { enumerable: true, get: n2 });
        }, s.r = function(e) {
          "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(e, "__esModule", { value: true });
        }, s.t = function(t, e) {
          if (1 & e && (t = s(t)), 8 & e)
            return t;
          if (4 & e && "object" == typeof t && t && t.__esModule)
            return t;
          var n2 = /* @__PURE__ */ Object.create(null);
          if (s.r(n2), Object.defineProperty(n2, "default", { enumerable: true, value: t }), 2 & e && "string" != typeof t)
            for (var o2 in t)
              s.d(n2, o2, (function(e2) {
                return t[e2];
              }).bind(null, o2));
          return n2;
        }, s.n = function(e) {
          var t = e && e.__esModule ? function() {
            return e.default;
          } : function() {
            return e;
          };
          return s.d(t, "a", t), t;
        }, s.o = function(e, t) {
          return Object.prototype.hasOwnProperty.call(e, t);
        }, s.p = "", s(s.s = 16);
      }([function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", { value: true }), t.validateQuestion = t.updatePropertiesWithDynamicValue = t.validateConversationType = t.validateUpdateUser = t.validateCreateUser = t.validateMessage = t.validateChatType = t.validateMsgId = t.validateArray = t.validateHideMessagesFromBlockedUsers = t.validateId = t.validateCreateGroup = t.validateJoinGroup = t.validateUpdateGroup = t.validateScope = t.isAudio = t.isVideo = t.isImage = t.getUpdatedSettings = t.getAppSettings = t.getCurrentTime = t.Logger = t.createUidFromJid = t.format = t.getOrdinalSuffix = t.isFalsy = t.isTruthy = t.isObject = t.getJidHost = t.getChatHost = void 0;
        var o = n(14), i = n(1), s = n(6), a = n(2), E = n(17), c = n(19), u = n(21), r = n(4), S = n(10), p = n(22);
        function l(e2) {
          return null != e2 && ("string" == typeof e2 && (e2 = e2.trim()), "object" == typeof e2 && 0 === Object.keys(e2).length && (e2 = void 0)), ["", 0, "0", false, null, "null", void 0, "undefined"].includes(e2);
        }
        function C(e2) {
          for (var o2 = [], t2 = 1; t2 < arguments.length; t2++)
            o2[t2 - 1] = arguments[t2];
          return e2.split("%s").reduce(function(e3, t3, n2) {
            return e3 + t3 + (o2[n2] || "");
          }, "");
        }
        t.getChatHost = function(e2) {
          return e2[i.APP_SETTINGS.KEYS.CHAT_HOST_OVERRIDE] ? e2[i.APP_SETTINGS.KEYS.CHAT_HOST_OVERRIDE] : e2[i.APP_SETTINGS.KEYS.CHAT_HOST_APP_SPECIFIC] ? e2[i.APP_SETTINGS.KEYS.CHAT_HOST_APP_SPECIFIC] : e2[i.APP_SETTINGS.KEYS.CHAT_HOST];
        }, t.getJidHost = function(e2) {
          return e2[i.APP_SETTINGS.KEYS.JID_HOST_OVERRIDE] ? e2[i.APP_SETTINGS.KEYS.JID_HOST_OVERRIDE] : e2[i.APP_SETTINGS.KEYS.CHAT_HOST];
        }, t.isObject = function(e2) {
          return e2 instanceof Object && e2.constructor === Object;
        }, t.isTruthy = function(e2) {
          return [true, 1, "1", "true", "TRUE"].includes(e2);
        }, t.isFalsy = l, t.getOrdinalSuffix = function(e2) {
          var t2 = e2 % 10, n2 = e2 % 100;
          return 1 == t2 && 11 != n2 ? e2 + "st" : 2 == t2 && 12 != n2 ? e2 + "nd" : 3 == t2 && 13 != n2 ? e2 + "rd" : e2 + "th";
        }, t.format = C, t.createUidFromJid = function(e2) {
          return e2.substring(e2.lastIndexOf("]") + 1, e2.lastIndexOf("@"));
        };
        var T = function() {
          function e2() {
          }
          return e2.log = function(e3, t2) {
          }, e2.error = function(e3, t2) {
          }, e2.info = function(e3, t2) {
          }, e2;
        }();
        function d() {
          return new Promise(function(t2, n2) {
            s.makeApiCall("appSettings").then(function(e2) {
              o.LocalStorage.getInstance().set(i.LOCAL_STORE.KEY_APP_SETTINGS, e2.data), e2.data.MODE && r.CometChat.setMode(e2.data.MODE), t2(e2.data);
            }, function(e2) {
              n2(new a.CometChatException(e2.error));
            });
          });
        }
        t.Logger = T, t.getCurrentTime = function() {
          return (/* @__PURE__ */ new Date()).getTime();
        }, t.getAppSettings = function() {
          return new Promise(function(t2, n2) {
            o.LocalStorage.getInstance().get(i.LOCAL_STORE.KEY_APP_SETTINGS).then(function(e2) {
              l(e2) ? d().then(function(e3) {
                t2(e3);
              }, function(e3) {
                n2(e3);
              }) : t2(e2);
            }, function(e2) {
              n2(e2);
            });
          });
        }, t.getUpdatedSettings = d, t.isImage = function(e2) {
          var t2;
          return e2.type && e2.type.toLowerCase().includes("image") && (t2 = true), t2;
        }, t.isVideo = function(e2) {
          var t2;
          return e2.type && e2.type.toLowerCase().includes("video") && (t2 = true), t2;
        }, t.isAudio = function(e2) {
          var t2;
          return e2.type && e2.type.toLowerCase().includes("audio") && (t2 = true), t2;
        }, t.validateScope = function(e2) {
          return typeof e2 !== i.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING ? new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.MUST_BE_A_STRING), "SCOPE", "SCOPE", "Scope"))) : l(e2) ? new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.INVALID), "SCOPE", "SCOPE", "scope", "scope"))) : e2 != r.CometChat.GROUP_MEMBER_SCOPE.ADMIN && e2 != r.CometChat.GROUP_MEMBER_SCOPE.MODERATOR && e2 != r.CometChat.GROUP_MEMBER_SCOPE.PARTICIPANT ? new a.CometChatException(i.GroupErrors.INVALID_SCOPE) : void 0;
        }, t.validateUpdateGroup = function(e2) {
          return e2.hasOwnProperty(i.GroupConstants.KEYS.GUID) ? typeof e2[i.GroupConstants.KEYS.GUID] !== i.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING ? new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.MUST_BE_A_STRING), "GUID", "GUID", "GUID"))) : l(e2[i.GroupConstants.KEYS.GUID]) ? new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.INVALID_GROUP_PROPERTY), "GUID", "GUID", "GUID", "GUID"))) : e2.hasOwnProperty(i.GroupConstants.KEYS.NAME) && "" === e2[i.GroupConstants.KEYS.NAME] ? new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.EMPTY_STRING), "GROUP_NAME", "GROUP_NAME", "Group name"))) : void 0 : new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.PARAMETER_COMPULSORY), "GUID", "GUID", "GUID", "GUID")));
        }, t.validateJoinGroup = function(e2, t2, n2) {
          if (typeof e2 == i.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.OBJECT) {
            if (!e2.hasOwnProperty(i.GroupConstants.KEYS.GUID))
              return new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.PARAMETER_COMPULSORY), "GUID", "GUID", "GUID", "GUID")));
            if (typeof e2[i.GroupConstants.KEYS.GUID] !== i.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)
              return new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.MUST_BE_A_STRING), "GUID", "GUID", "GUID")));
            if (l(e2[i.GroupConstants.KEYS.GUID]))
              return new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.INVALID_GROUP_PROPERTY), "GUID", "GUID", "GUID", "GUID")));
            if (!e2.hasOwnProperty(i.GroupConstants.KEYS.TYPE))
              return new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.PARAMETER_COMPULSORY), "GROUP_TYPE", "GROUP_TYPE", "Group type", "Group type")));
            if (typeof e2[i.GroupConstants.KEYS.TYPE] !== i.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)
              return new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.MUST_BE_A_STRING), "GROUP_TYPE", "GROUP_TYPE", "Group type")));
            if (l(e2[i.GroupConstants.KEYS.TYPE]))
              return new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.INVALID_GROUP_PROPERTY), "GROUP_TYPE", "GROUP_TYPE", "type", "type")));
            if (e2[i.GroupConstants.KEYS.TYPE].toLowerCase() != r.CometChat.GROUP_TYPE.PUBLIC && e2[i.GroupConstants.KEYS.TYPE].toLowerCase() != r.CometChat.GROUP_TYPE.PASSWORD && e2[i.GroupConstants.KEYS.TYPE].toLowerCase() != r.CometChat.GROUP_TYPE.PROTECTED && e2[i.GroupConstants.KEYS.TYPE].toLowerCase() != r.CometChat.GROUP_TYPE.PRIVATE)
              return new a.CometChatException(i.GroupErrors.INVALID_GROUP_TYPE);
            if (e2[i.GroupConstants.KEYS.TYPE].toLowerCase() == r.CometChat.GROUP_TYPE.PASSWORD) {
              if (!e2.hasOwnProperty(i.GroupConstants.KEYS.PASSWORD))
                return new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.PASSWORD_COMPULSORY), "PASSWORD", "PASSWORD")));
              if (typeof e2[i.GroupConstants.KEYS.PASSWORD] !== i.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)
                return new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.MUST_BE_A_STRING), "PASSWORD", "PASSWORD", "Password")));
              if (l(e2[i.GroupConstants.KEYS.PASSWORD]))
                return new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.INVALID_GROUP_PROPERTY), "PASSWORD", "PASSWORD", "password", "password")));
            }
          } else {
            if (void 0 !== e2) {
              if (typeof e2 !== i.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)
                return new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.MUST_BE_A_STRING), "GUID", "GUID", "GUID")));
              if (l(e2))
                return new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.INVALID_GROUP_PROPERTY), "GUID", "GUID", "GUID", "GUID")));
            }
            if (void 0 !== t2) {
              if (typeof t2 !== i.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)
                return new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.MUST_BE_A_STRING), "GROUP_TYPE", "GROUP_TYPE", "Group type")));
              if (l(t2))
                return new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.INVALID_GROUP_PROPERTY), "GROUP_TYPE", "GROUP_TYPE", "type", "type")));
              if (t2.toLowerCase() != r.CometChat.GROUP_TYPE.PUBLIC && t2.toLowerCase() != r.CometChat.GROUP_TYPE.PASSWORD && t2.toLowerCase() != r.CometChat.GROUP_TYPE.PROTECTED && t2.toLowerCase() != r.CometChat.GROUP_TYPE.PRIVATE)
                return new a.CometChatException(i.GroupErrors.INVALID_GROUP_TYPE);
              if (t2.toLowerCase() == r.CometChat.GROUP_TYPE.PASSWORD) {
                if (typeof n2 !== i.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)
                  return new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.MUST_BE_A_STRING), "PASSWORD", "PASSWORD", "Password")));
                if (l(n2))
                  return new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.INVALID_GROUP_PROPERTY), "PASSWORD", "PASSWORD", "password", "password")));
              }
            }
          }
        }, t.validateCreateGroup = function(e2) {
          if (!e2.hasOwnProperty(i.GroupConstants.KEYS.GUID))
            return new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.PARAMETER_COMPULSORY), "GUID", "GUID", "GUID", "GUID")));
          if (typeof e2[i.GroupConstants.KEYS.GUID] !== i.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)
            return new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.MUST_BE_A_STRING), "GUID", "GUID", "GUID")));
          if (l(e2[i.GroupConstants.KEYS.GUID]))
            return new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.INVALID_GROUP_PROPERTY), "GUID", "GUID", "GUID", "GUID")));
          if (!e2.hasOwnProperty(i.GroupConstants.KEYS.NAME))
            return new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.PARAMETER_COMPULSORY), "GROUP_NAME", "GROUP_NAME", "Group name", "Group name")));
          if (typeof e2[i.GroupConstants.KEYS.NAME] !== i.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)
            return new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.MUST_BE_A_STRING), "GROUP_NAME", "GROUP_NAME", "Group name")));
          if (l(e2[i.GroupConstants.KEYS.NAME]))
            return new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.INVALID_GROUP_PROPERTY), "GROUP_NAME", "GROUP_NAME", "name", "name")));
          if (!e2.hasOwnProperty(i.GroupConstants.KEYS.TYPE))
            return new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.PARAMETER_COMPULSORY), "GROUP_TYPE", "GROUP_TYPE", "Group type", "Group type")));
          if (typeof e2[i.GroupConstants.KEYS.TYPE] !== i.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)
            return new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.MUST_BE_A_STRING), "GROUP_TYPE", "GROUP_TYPE", "Group type")));
          if (l(e2[i.GroupConstants.KEYS.TYPE]))
            return new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.INVALID_GROUP_PROPERTY), "GROUP_TYPE", "GROUP_TYPE", "type", "type")));
          if (e2[i.GroupConstants.KEYS.TYPE].toLowerCase() != r.CometChat.GROUP_TYPE.PUBLIC && e2[i.GroupConstants.KEYS.TYPE].toLowerCase() != r.CometChat.GROUP_TYPE.PASSWORD && e2[i.GroupConstants.KEYS.TYPE].toLowerCase() != r.CometChat.GROUP_TYPE.PROTECTED && e2[i.GroupConstants.KEYS.TYPE].toLowerCase() != r.CometChat.GROUP_TYPE.PRIVATE)
            return new a.CometChatException(i.GroupErrors.INVALID_GROUP_TYPE);
          if (e2[i.GroupConstants.KEYS.TYPE].toLowerCase() == r.CometChat.GROUP_TYPE.PASSWORD) {
            if (!e2.hasOwnProperty(i.GroupConstants.KEYS.PASSWORD))
              return new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.PASSWORD_COMPULSORY), "PASSWORD", "PASSWORD")));
            if (typeof e2[i.GroupConstants.KEYS.PASSWORD] !== i.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)
              return new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.MUST_BE_A_STRING), "PASSWORD", "PASSWORD", "Password")));
            if (l(e2[i.GroupConstants.KEYS.PASSWORD]))
              return new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.INVALID_GROUP_PROPERTY), "PASSWORD", "PASSWORD", "password", "password")));
          }
          if (e2.hasOwnProperty(i.GroupConstants.KEYS.TAGS)) {
            if (!Array.isArray(e2[i.GroupConstants.KEYS.TAGS]))
              return new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.MUST_BE_AN_ARRAY), "GROUP_TAGS", "GROUP_TAGS", "Group tags")));
            if (0 === e2[i.GroupConstants.KEYS.TAGS].length)
              return new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.EMPTY_ARRAY), "GROUP_TAGS", "GROUP_TAGS", "Group tags")));
          }
        }, t.validateId = function(e2, t2) {
          if ("user" === t2) {
            if (typeof e2 !== i.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)
              return new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.MUST_BE_A_STRING), "UID", "UID", "UID")));
            if (l(e2))
              return new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.INVALID), "UID", "UID", "UID", "UID")));
          }
          if ("group" === t2) {
            if (typeof e2 !== i.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)
              return new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.MUST_BE_A_STRING), "GUID", "GUID", "GUID")));
            if (l(e2))
              return new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.INVALID), "GUID", "GUID", "GUID", "GUID")));
          }
          if ("bot" === t2) {
            if (typeof e2 !== i.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)
              return new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.MUST_BE_A_STRING), "BOT_ID", "BOT_ID", "BOT_ID")));
            if (l(e2))
              return new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.INVALID), "BOT_ID", "BOT_ID", "BOT_ID", "BOT_ID")));
          }
        }, t.validateHideMessagesFromBlockedUsers = function(e2) {
          if (typeof e2 !== i.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.BOOLEAN)
            return new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.MUST_BE_A_BOOLEAN), "HIDE_MESSAGES_FROM_BLOCKED_USERS", "HIDE_MESSAGES_FROM_BLOCKED_USERS", "hideMessagesFromBlockedUsers")));
        }, t.validateArray = function(e2, t2) {
          var n2 = "List should be an array.";
          return n2 = "blockUsers" === t2 ? "blockUsers() method accepts an array of users." : "unblockUsers" === t2 ? "unblockUsers() method accepts an array of users." : "groupMembers" === t2 ? "addMembersToGroup() method accepts members list as an array of users." : "addMembersToGroup() method accepts bannedMembers list as an array of users.", typeof e2 != i.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.OBJECT ? new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.INVALID_ARRAY), "USER_LIST", "USER_LIST", n2))) : Array.isArray(e2) ? void 0 : new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.INVALID_ARRAY), "USER_LIST", "USER_LIST", n2)));
        }, t.validateMsgId = function(e2) {
          return isNaN(e2) ? new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.MUST_BE_A_NUMBER), "MESSAGE_ID", "MESSAGE_ID", "Message Id"))) : l(e2) ? new a.CometChatException(S.ERRORS.PARAMETER_MISSING) : void 0;
        }, t.validateChatType = function(e2) {
          return typeof e2 !== i.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING ? new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.MUST_BE_A_STRING), "RECEIVER_TYPE", "RECEIVER_TYPE", "Receiver type"))) : l(e2) ? new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.INVALID), "RECEIVER_TYPE", "RECEIVER_TYPE", "receiver type", "receiver type"))) : e2 != i.MessageConstatnts.RECEIVER_TYPE.GROUP && e2 != i.MessageConstatnts.RECEIVER_TYPE.USER ? new a.CometChatException(i.MessageErrors.INVALID_RECEIVER_TYPE) : void 0;
        }, t.validateMessage = function(e2) {
          var t2 = e2;
          if (typeof t2.getReceiverId() !== i.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)
            return new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.MUST_BE_A_STRING), "RECEIVER_ID", "RECEIVER_ID", "Receiver Id")));
          if (l(t2.getReceiverId()))
            return new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.INVALID), "RECEIVER_ID", "RECEIVER_ID", "receiver id", "receiver id")));
          if (typeof t2.getReceiverType() !== i.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)
            return new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.MUST_BE_A_STRING), "RECEIVER_TYPE", "RECEIVER_TYPE", "Receiver Type")));
          if (l(t2.getReceiverType()))
            return new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.INVALID), "RECEIVER_TYPE", "RECEIVER_TYPE", "receiver type", "receiver type")));
          if (t2.getReceiverType() != i.MessageConstatnts.RECEIVER_TYPE.GROUP && t2.getReceiverType() != i.MessageConstatnts.RECEIVER_TYPE.USER)
            return new a.CometChatException(i.MessageErrors.INVALID_RECEIVER_TYPE);
          if (e2 instanceof E.TextMessage) {
            var n2 = e2;
            if (typeof n2.getText() !== i.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)
              return new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.MUST_BE_A_STRING), "MESSAGE_TEXT", "MESSAGE_TEXT", "Message text")));
            if ("" === n2.getText().trim())
              return new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.EMPTY_STRING), "MESSAGE_TEXT", "MESSAGE_TEXT", "Message text")));
          }
          if (e2 instanceof c.MediaMessage) {
            var o2 = e2;
            if (o2.getData() && o2.getData().hasOwnProperty("attachments"))
              for (var s2 = o2.getAttachments(), r2 = 0; r2 < s2.length; r2++) {
                if (!s2[r2].getExtension())
                  return new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.MISSING_KEY), "extension", "Attachment")));
                if (!s2[r2].getMimeType())
                  return new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.MISSING_KEY), "mimeType", "Attachment")));
                if (!s2[r2].getName())
                  return new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.MISSING_KEY), "name", "Attachment")));
                if (!s2[r2].getUrl())
                  return new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.MISSING_KEY), "url", "Attachment")));
              }
            if (o2.hasOwnProperty("files")) {
              for (r2 = 0; r2 < o2.files.length; r2++)
                if (!(o2.files[r2] instanceof Blob))
                  return new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.MUST_BE_A_BLOB), "MEDIA_OBJECT", "MEDIA_OBJECT", "Media object")));
            }
          }
          if (e2 instanceof u.CustomMessage && l(e2.getCustomData()))
            return new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.INVALID), "CUSTOM_DATA", "CUSTOM_DATA", "custom data", "custom data")));
          if (e2 instanceof p.InteractiveMessage && l(e2.getInteractiveData()))
            return new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.INVALID), "INTERACTIVE_DATA", "INTERACTIVE_DATA", "interactive data", "interactive data")));
        }, t.validateCreateUser = function(e2) {
          if (!e2.hasOwnProperty(i.UserConstants.UID))
            return new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.PARAMETER_COMPULSORY), "UID", "UID", "UID", "UID")));
          if (typeof e2[i.UserConstants.UID] !== i.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)
            return new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.MUST_BE_A_STRING), "UID", "UID", "UID")));
          if (l(e2[i.UserConstants.UID]))
            return new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.INVALID_USER_PROPERTY), "UID", "UID", "UID", "UID")));
          if (!e2.hasOwnProperty(i.UserConstants.NAME))
            return new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.PARAMETER_COMPULSORY), "USER_NAME", "USER_NAME", "User name", "User name")));
          if (typeof e2[i.UserConstants.NAME] !== i.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)
            return new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.MUST_BE_A_STRING), "USER_NAME", "USER_NAME", "User name")));
          if (l(e2[i.UserConstants.NAME]))
            return new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.INVALID_USER_PROPERTY), "USER_NAME", "USER_NAME", "name", "name")));
          if (e2.hasOwnProperty(i.UserConstants.AVATAR) && "" === e2[i.UserConstants.AVATAR])
            return new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.EMPTY_STRING), "USER_AVATAR", "USER_AVATAR", "User avatar")));
          if (e2.hasOwnProperty(i.UserConstants.META_DATA) && "" === e2[i.UserConstants.META_DATA])
            return new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.EMPTY_STRING), "USER_METADATA", "USER_METADATA", "User metadata")));
          if (e2.hasOwnProperty(i.UserConstants.LINK) && "" === e2[i.UserConstants.LINK])
            return new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.EMPTY_STRING), "USER_LINK", "USER_LINK", "User link")));
          if (e2.hasOwnProperty(i.UserConstants.STATUS_MESSAGE) && "" === e2[i.UserConstants.STATUS_MESSAGE])
            return new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.EMPTY_STRING), "USER_STATUS_MESSAGE", "USER_STATUS_MESSAGE", "User status message")));
          if (e2.hasOwnProperty(i.UserConstants.ROLE) && "" === e2[i.UserConstants.ROLE])
            return new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.EMPTY_STRING), "USER_ROLE", "USER_ROLE", "User role")));
          if (e2.hasOwnProperty(i.UserConstants.TAGS)) {
            if (!Array.isArray(e2[i.UserConstants.TAGS]))
              return new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.MUST_BE_AN_ARRAY), "USER_TAGS", "USER_TAGS", "User tags")));
            if (0 === e2[i.UserConstants.TAGS].length)
              return new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.EMPTY_ARRAY), "USER_TAGS", "USER_TAGS", "User tags")));
          }
        }, t.validateUpdateUser = function(e2) {
          return e2.hasOwnProperty(i.UserConstants.UID) ? typeof e2[i.UserConstants.UID] !== i.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING ? new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.MUST_BE_A_STRING), "UID", "UID", "UID"))) : l(e2[i.UserConstants.UID]) ? new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.INVALID_USER_PROPERTY), "UID", "UID", "UID", "UID"))) : e2.hasOwnProperty(i.UserConstants.NAME) && "" === e2[i.UserConstants.NAME] ? new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.EMPTY_STRING), "USER_NAME", "USER_NAME", "User name"))) : void 0 : new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.PARAMETER_COMPULSORY), "UID", "UID", "UID", "UID")));
        }, t.validateConversationType = function(e2) {
          return typeof e2 !== i.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING ? new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.MUST_BE_A_STRING), "CONVERSATION_TYPE", "CONVERSATION_TYPE", "Conversation type"))) : l(e2) ? new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.INVALID), "CONVERSATION_TYPE", "CONVERSATION_TYPE", "conversation type", "conversation type"))) : (e2 = e2.toLowerCase()) != r.CometChat.RECEIVER_TYPE.USER && e2 != r.CometChat.RECEIVER_TYPE.GROUP ? new a.CometChatException(i.ConversationErrors.INVALID_CONVERSATION_TYPE) : void 0;
        }, t.updatePropertiesWithDynamicValue = function(n2, o2, s2) {
          return new Promise(function(e2, t2) {
            !function e3(t3) {
              for (var n3 in t3)
                t3.hasOwnProperty(n3) && ("object" == typeof t3[n3] ? e3(t3[n3]) : "string" == typeof t3[n3] && t3[n3].includes(o2) && !t3[n3].includes(i.ADDITIONAL_CONSTANTS.SECURE_URL_PROPERTY) && (t3[n3] += s2));
            }(n2), e2(n2);
          });
        }, t.validateQuestion = function(e2) {
          return typeof e2 !== i.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING ? new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.MUST_BE_A_STRING), "QUESTION", "QUESTION", "Question"))) : l(e2) ? new a.CometChatException(JSON.parse(C(JSON.stringify(i.GENERAL_ERROR.INVALID), "QUESTION", "QUESTION", "question", "question"))) : void 0;
        };
      }, function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", { value: true }), t.AI_SLUG_ENABLED = t.AI_SLUG_ACCESSIBLE = t.AI_FEATURE_ENABLED = t.AI_FEATURE_ACCESSIBLE = t.ADDITIONAL_CONSTANTS = t.ONLINE_MEMBER_COUNT_API = t.JWT_API = t.ProsodyApiErrors = t.PROSODY_API = t.API_ERROR_CODES = t.REACTION_ACTION = t.SESSION_STORE = t.CONNECTION_STATUS = t.COMMON_UTILITY_CONSTANTS = t.APP_SETTINGS = t.PresenceConstatnts = t.FeatureRestrictionErrors = t.MessageErrors = t.AIFeatureError = t.ExtensionErrors = t.AIErrors = t.ConversationErrors = t.GroupErrors = t.UserErrors = t.ReceiptErrors = t.GENERAL_ERROR = t.PARAMETER_ERROR = t.CALL_ERROR = t.Errors = t.UserConstants = t.GroupMemersConstans = t.GroupConstants = t.CallConstants = t.BlockedUsersConstants = t.ActionConstatnts = t.TYPING_NOTIFICATION = t.GoalType = t.MessageCategory = t.ATTACHMENTS_CONSTANTS = t.MessageConstatnts = t.READ_RECEIPTS = t.DELIVERY_RECEIPTS = t.ResponseConstants = t.LOCAL_STORE = t.ANALYTICS = t.WS = t.SDKHeader = t.APPINFO = t.GROUP_MEMBER_SCOPE = t.GroupMemberScope = t.GROUP_TYPE = t.GroupType = t.CALLING_COMPONENT_VERSION = t.DEFAULT_VALUES = t.constants = void 0;
        var o, s, r, i, a, E = n(2);
        t.constants = { DEFAULT_STORE: "cometchat", MSG_VER_PRE: "store-ver-pre", MSG_VER_POST: "store-ver-post" }, t.DEFAULT_VALUES = { ZERO: 0, MSGS_LIMIT: 30, REACTIONS_LIMIT: 10, MSGS_MAX_LIMIT: 100, USERS_LIMIT: 30, USERS_MAX_LIMIT: 100, GROUPS_LIMIT: 30, GROUPS_MAX_LIMIT: 100, CONVERSATION_MAX_LIMIT: 50, CALL_TIMEOUT: 45, DEFAULT_MSG_ID: 0, DEFAULT_MAX_TYPING_INDICATOR_LIMIT: 5, REGION_DEFAULT: "eu", REGION_DEFAULT_EU: "eu", REGION_DEFAULT_US: "us", REGION_DEFAULT_IN: "in", REGION_DEFAULT_PRIVATE: "private" }, t.CALLING_COMPONENT_VERSION = 5, (o = t.GroupType || (t.GroupType = {})).Public = "public", o.Private = "private", o.Protected = "protected", o.Password = "password", t.GROUP_TYPE = { PUBLIC: "public", PRIVATE: "private", PROTECTED: "password", PASSWORD: "password" }, (s = t.GroupMemberScope || (t.GroupMemberScope = {})).Admin = "admin", s.Moderator = "moderator", s.Member = "member", t.GROUP_MEMBER_SCOPE = { ADMIN: "admin", MODERATOR: "moderator", PARTICIPANT: "participant" }, t.APPINFO = { platform: "WEB", sdkVersion: "v4.0.3", apiVersion: "v3.0", sdkVersionWithUnderScore: "4_0_3" }, t.SDKHeader = { platform: "javascript", sdkVersion: "4.0.3", sdk: "%s@%s" }, t.WS = { CONVERSATION: { TYPE: { CHAT: "chat", GROUP_CHAT: "groupchat" } } }, t.ANALYTICS = { analyticsHost: "metrics-%s.cometchat.io", analyticsVersion: "v1" }, t.LOCAL_STORE = { COMMON_STORE: "common_store", MESSAGE_LISTENERS_LIST: "message_listeners_list", USERS_STORE: "users_store", MESSAGES_STORE: "messages_store", KEYS_STORE: "keys_store", STORE_STRING: "%s:%s", KEY_STRING: "%s/%s", KEY_USER: "user", KEY_APP_SETTINGS: "app_settings", KEY_APP_ID: "appId", KEY_DEVICE_ID: "deviceId", KEY_SESSION_ID: "sessionId", KEY_MESSAGE_LISTENER_LIST: "all" }, t.ResponseConstants = { RESPONSE_KEYS: { KEY_DATA: "data", KEY_META: "meta", KEY_CURSOR: "cursor", KEY_NEXT: "next", KEY_PREVIOUS: "previous", KEY_ACTION: "action", KEY_MESSAGE: "message", KEY_ERROR: "error", KEY_ERROR_DETAILS: "details", KEY_ERROR_CODE: "code", KEY_ERROR_MESSAGE: "message", KEY_AUTH_TOKEN: "authToken", KEY_WS_CHANNEL: "wsChannel", KEY_IDENTITY: "identity", KEY_SERVICE: "identity", KEY_ENTITIES: "entities", KEY_REACTIONS: "reactions", KEY_ENTITITY: "entity", KEY_ENTITYTYPE: "entityType", KEY_ATTACHMENTS: "attachments", CODE_REQUEST_OK: 200, CODE_BAD_REQUEST: 401, UNREAD_UNDELIVERED_KEYS: { ENTITY: "entity", ENTITY_TYPE: "entityType", ENTITY_Id: "entityId", COUNT: "count" }, GROUP_MEMBERS_RESPONSE: { SUCCESS: "success", ERROR: "error", MESSAGE: "message" }, KEY_ENTITY_TYPE: { USER: "user", GROUP: "group" }, KEY_CONVERSATION_STARTER: "conversation-starter", KEY_SMART_REPLIES: "smart-replies", KEY_CONVERSATION_SUMMARY: "conversation-summary", KEY_BOT_REPLY: "bot-reply" } }, t.DELIVERY_RECEIPTS = { RECEIVER_ID: "receiverId", RECEIVER_TYPE: "type", RECIPIENT: "recipient", MESSAGE_ID: "messageId", RECEIVED: "delivered", DELIVERED_AT: "deliveredAt", ID: "id", TIME: "time", DELIVERED_TO_ME_AT: "deliveredToMeAt" }, t.READ_RECEIPTS = { RECEIVER_ID: "receiverId", RECEIVER_TYPE: "type", RECIPIENT: "recipient", MESSAGE_ID: "messageId", READ: "read", READ_AT: "readAt", ID: "id", TIME: "time", READ_BY_ME_AT: "readByMeAt" }, t.MessageConstatnts = { TYPE: { TEXT: "text", MEDIA: "media", IMAGE: "image", VIDEO: "video", AUDIO: "audio", FILE: "file", CUSTOM: "custom" }, CATEGORY: { MESSAGE: "message", ACTION: "action", CALL: "call", CUSTOM: "custom", INTERACTIVE: "interactive" }, RECEIVER_TYPE: { USER: "user", GROUP: "group" }, KEYS: { ATTATCHMENT: "attatchment", ATTATCHMENTS: "attachments", ACTION: "action", TYPE: "type", DATA: "data", ID: "id", MUID: "muid", SENDER: "sender", RECEIVER: "receiver", RECEIVER_ID: "receiverId", CATEGORY: "category", RECEIVER_TYPE: "receiverType", SENT_AT: "sentAt", STATUS: "status", TEXT: "text", URL: "url", METADATA: "metadata", RECEIPTS: "receipts", MY_RECEIPTS: "myReceipt", CUSTOM_DATA: "customData", CUSTOM_SUB_TYPE: "subType", RESOURCE: "resource", MENTIONS: "mentions", INTERACTIVE_DATA: "interactiveData", INTERACTION_GOAL: "interactionGoal", INTERACTIONS: "interactions", ALLOW_SENDER_INTERACTION: "allowSenderInteraction", ELEMENT_ID: "elementId", INTERACTED_AT: "interactedAt", ELEMENT_IDS: "elementIds" }, KNOWN_MEDIA_TYPE: { IMAGE: [], VIDEO: [], AUDIO: [], FILE: [] }, PAGINATION: { AFFIX: { APPEND: "append", PREPEND: "prepend" }, CURSOR_FILEDS: { ID: "id", SENT_AT: "sentAt" }, CURSOR_AFFIX_DEFAULT: "prepend", CURSOR_FIELD_DEFAULT: "sentAt", KEYS: { PER_PAGE: "per_page", CURSOR_AFFIX: "cursorAffix", AFFIX: "affix", CURSOR_FIELD: "cursorField", CURSOR_VALUE: "cursorValue", UID: "uid", SENT_AT: "sentAt", ID: "id", CURRENT_PAGE: "page", UNREAD: "unread", HIDE_MESSAGES_FROM_BLOCKED_USER: "hideMessagesFromBlockedUsers", SEARCH_KEY: "searchKey", ONLY_UPDATES: "onlyUpdates", UPDATED_AT: "updatedAt", CATEGORY: "category", CATEGORIES: "categories", TYPE: "type", TYPES: "types", HIDE_REPLIES: "hideReplies", HIDE_DELETED_MESSAGES: "hideDeleted", WITH_TAGS: "withTags", TAGS: "tags", MY_MENTIONS_ONLY: "myMentionsOnly", MENTIONS_WITH_TAG_INFO: "mentionsWithTagInfo", MENTIONS_WITH_BLOCKED_INFO: "mentionsWithBlockedInfo", ONLY_INTERACTION_GOAL_COMPLETED: "onlyInteractionGoalCompleted" } } }, t.ATTACHMENTS_CONSTANTS = { KEYS: { EXTENSION: "extension", MIME_TYPE: "mimeType", NAME: "name", SIZE: "size", URL: "url" } }, (r = t.MessageCategory || (t.MessageCategory = {})).ACTION = "action", r.MESSAGE = "message", r.CALL = "call", r.CUSTOM = "custom", r.INTERACTIVE = "interactive", (i = t.GoalType || (t.GoalType = {})).ANY_ACTION = "anyAction", i.ANY_OF = "anyOf", i.ALL_OF = "allOf", i.NONE = "none", t.TYPING_NOTIFICATION = { RECEIVER_ID: "receiverId", RECEIVER_TYPE: "receiverType", META: "metadata", KEYS: { TYPING_NOTIFICATION: "typingNotification", TIMESTAMP: "timestamp" }, ACTIONS: { STARTED: "started", ENDED: "ended" } }, t.ActionConstatnts = { ACTION_SUBJECTS: { ACTION_ON: "on", ACTION_BY: "by", ACTION_FOR: "for" }, ACTION_ENTITY_TYPE: { GROUP_USER: "groupuser", USER: "user", GROUP: "group", MESSAGE: "message" }, ACTION_KEYS: { ACTION_CREATED: "created", ACTION_UPDATED: "updated", ACTION_DELETED: "deleted", ENTITIES: "entities", ENTITY: "entity", ENTITY_TYPE: "entityType", TYPE_MEMBER_JOINED: "joined", TYPE_MEMBER_LEFT: "left", TYPE_MEMBER_KICKED: "kicked", TYPE_MEMBER_BANNED: "banned", TYPE_MEMBER_UNBANNED: "unbanned", TYPE_MEMBER_INVITED: "invited", TYPE_MEMBER_ADDED: "added", ACTION_SCOPE_CHANGED: "scopeChanged", ACTION_TYPE_USER: "user", ACTION_TYPE_GROUP: "group", ACTION_TYPE_GROUP_MEMBER: "groupMember", TYPE_MESSAGE_EDITED: "edited", TYPE_MESSAGE_DELETED: "deleted", ACTION_TYPE_CALL: "call", EXTRAS: "extras", SCOPE: "scope", NEW: "new", OLD: "old" }, ActionMessages: { ACTION_GROUP_JOINED_MESSAGE: "%s joined", ACTION_GROUP_LEFT_MESSAGE: "%s left", ACTION_MEMBER_KICKED_MESSAGE: "%s kicked %s", ACTION_MEMBER_BANNED_MESSAGE: "%s banned %s", ACTION_MEMBER_UNBANNED_MESSAGE: "%s unbanned %s", ACTION_MEMBER_INVITED_MESSAGE: "%s banned %s", ACTION_MESSAGE_EDITED_MESSAGE: " Message Edited", ACTION_MESSAGE_DELETED_MESSAGE: "Message Deleted", ACTION_MEMBER_SCOPE_CHANGED: "%s made %s %s", ACTION_MEMBER_ADDED_TO_GROUP: "%s added %s" }, ACTION_TYPE: { TYPE_MEMBER_JOINED: "joined", TYPE_MEMBER_LEFT: "left", TYPE_MEMBER_KICKED: "kicked", TYPE_MEMBER_BANNED: "banned", TYPE_MEMBER_UNBANNED: "unbanned", TYPE_MEMBER_INVITED: "invited", TYPE_MEMBER_SCOPE_CHANGED: "scopeChanged", TYPE_MESSAGE: "message", TYPE_MESSAGE_EDITED: "edited", TYPE_MESSAGE_DELETED: "deleted", TYPE_MEMBER_ADDED: "added" }, ACTIONS: { MEMBER_ADDED: "added", MEMBER_JOINED: "joined", MEMBER_LEFT: "left", MEMBER_KICKED: "kicked", MEMBER_BANNED: "banned", MEMBER_UNBANNED: "unbanned", MEMBER_INVITED: "invited", MEMBER_SCOPE_CHANGED: "scopeChanged", MESSAGE_EDITED: "edited", MESSSAGE_DELETED: "deleted", TYPE_USER: "user", TYPE_GROUP: "group", TYPE_GROUP_MEMBER: "groupMember" } }, t.BlockedUsersConstants = { REQUEST_KEYS: { DIRECTIONS: { BOTH: "both", HAS_BLOCKED_ME: "hasBlockedMe", BLOCKED_BY_ME: "blockedByMe" } } }, t.CallConstants = { CALL_MODE: { DEFAULT: "DEFAULT", SPOTLIGHT: "SPOTLIGHT", SINGLE: "SINGLE", TILE: "TILE", GRID: "GRID" }, CALL_TYPE: { AUDIO: "audio", VIDEO: "video" }, RECEIVER_TYPE_GROUP: "group", RECEIVER_TYPE_USER: "user", CALL_KEYS: { CALL_DATA: "data", CALL_ID: "id", CALL_SESSION_ID: "sessionid", CALL_RECEIVER: "receiver", CALL_SENDER: "sender", CALL_RECEIVER_TYPE: "receiverType", CALL_STATUS: "status", CALL_TYPE: "type", CALL_INITIATED_AT: "initiatedAt", CALL_JOINED_AT: "joinedAt", CALL_LEFT_AT: "leftAt", CALL_METADATA: "metadata", CALL_ENTITIES: "entities", CALL_ENTITY_TYPE: "entityType", CALL_ENTITY: "entity", CALL_ENTITY_USER: "user", CALL_ENTITY_GROUP: "group" }, CALL_STATUS: { INITIATED: "initiated", ONGOING: "ongoing", UNANSWERED: "unanswered", REJECTED: "rejected", BUSY: "busy", CANCELLED: "cancelled", ENDED: "ended" }, AUDIO_INPUT_DEVICES: "audioInputDevices", AUDIO_OUTPUT_DEVICES: "audioOutputDevices", VIDEO_INPUT_DEVICES: "videoInputDevices", POST_MESSAGES: { TYPES: { ACTION_MESSAGE: "cometchat_action_message", HANGUP: "hangup", COMETCHAT_RTC_SETTINGS: "cometchat_rtc_settings" }, ACTIONS: { USER_JOINED: "onUserJoined", USER_LEFT: "onUserLeft", USER_LIST_CHANGED: "onUserListChanged", INITIAL_DEVICE_LIST: "initialDeviceList", DEVICE_CHANGE: "onDeviceChange", LOAD: "LOAD", CHANGE_AUDIO_INPUT: "changeAudioInput", CHANGE_AUDIO_OUTPUT: "changeAudioOutput", CHANGE_VIDEO_INPUT: "changeVideoInput", MUTE_AUDIO: "muteAudio", UNMUTE_AUDIO: "unMuteAudio", PAUSE_VIDEO: "pauseVideo", UNPAUSE_VIDEO: "unPauseVideo", SWITCH_MODE: "switchMode", START_SCREENSHARE: "startScreenShare", STOP_SCREENSHARE: "stopScreenShare", END_CALL: "endCall", START_RECORDING: "startRecording", STOP_RECORDING: "stopRecording", RECORDING_TOGGLED: "onRecordingToggled", USER_MUTED: "onUserMuted", SCREEN_SHARE_STARTED: "SCREEN_SHARE_STARTED", SCREEN_SHARE_STOPPED: "SCREEN_SHARE_ENDED", SWITCH_TO_VIDEO_CALL: "switchedToVideo", SWITCHED_TO_VIDEO_CALL: "onCallSwitchedToVideo", OPEN_VIRTUAL_BACKGROUND: "openVirtualBackgroundMenu", SET_BACKGROUND_BLUR: "setBackgroundBlur", SET_BACKGROUND_IMAGE: "setBackgroundImage" } }, MEDIA_DEVICE: { ID: "id", NAME: "name", ACTIVE: "active" }, ZOOM_BUTTON_DEFAULT_PARAMS: { position: "bottom-right", visible: true }, NAME_LABEL_DEFAULT_PARAMS: { position: "bottom-left", visible: true, color: "rgba(27, 27, 27, 0.4)" }, NETWORK_LABEL_DEFAULT_PARAMS: { position: "bottom-right", visible: true }, MAIN_VIDEO_CONTAINER_SETTINGS: { KEYS: { POSITION: "position", VISIBILITY: "visible", COLOR: "color" } } }, t.GroupConstants = { KEYS: { NAME: "name", GUID: "guid", TYPE: "type", PASSWORD: "password", ICON: "icon", DESCRIPTION: "description", OWNER: "owner", METADATA: "metadata", CREATED_AT: "createdAt", UPDATED_AT: "updatedAt", HAS_JOINED: "hasJoined", WS_CHANNEL: "wsChannel", TAGS: "tags" } }, t.GroupMemersConstans = { KEYS: { SCOPE: "scope", UID: "uid", GUID: "guid", USER: "user", NAME: "name" } }, t.UserConstants = { UID: "uid", NAME: "name", AUTH_TOKEN: "authToken", AVATAR: "avatar", LAST_ACTIVE_AT: "lastActiveAt", LINK: "link", META_DATA: "metadata", ROLE: "role", STATUS: "status", STATUS_MESSAGE: "statusMessage", USER_NAME: "user_name", TAGS: "tags", SORT_BY: { NAME: "name", STATUS: "status" }, SORT_ORDER: { ASCENDING: "asc", DESCENDING: "desc" } }, t.Errors = { ERROR_IO_EXCEPTION: "ERROR_IO_EXCEPTION", ERROR_JSON_EXCEPTION: "ERROR_JSON_EXCEPTION", ERROR_PASSWORD_MISSING: "ERROR_PASSWORD_MISSING", ERROR_LIMIT_EXCEEDED: "ERROR_LIMIT_EXCEEDED", ERROR_USER_NOT_LOGGED_IN: "ERROR_USER_NOT_LOGGED_IN", ERROR_INVALID_GUID: "ERROR_INVALID_GUID", ERROR_PASSWORD_MISSING_MESSAGE: "Password is mandatory for a password group", ERROR_LIMIT_EXCEEDED_MESSAGE: "Limit Exceeded Max limit of %s", ERROR_USER_NOT_LOGGED_IN_MESSAGE: "Please log in to CometChat before calling this method", ERROR_INVALID_GUID_MESSAGE: "Please provide a valid GUID", ERROR_DEFAULT_MESSAGE: "Something went wrong", ERR_SETTINGS_HASH_OUTDATED: "ERR_SETTINGS_HASH_OUTDATED", ERR_NO_AUTH: "ERR_NO_AUTH" }, t.CALL_ERROR = { CALL_ALREADY_INITIATED: { code: "CALL_ALREADY_INITIATED", name: "CALL_ALREADY_INITIATED", message: "There is already call in progress", details: {} }, ERROR_IN_CALLING: { code: "CALL_IN_PROGRESS", name: "CALL_ALREADY_INITIATED", message: "There is already call in progress", details: {} }, CANNOT_ACCEPT_CALL: { code: "CALL_IN_PROGRESS", name: "CALL_IN_PROGRESS", message: "There is already a call in progress", details: {} }, NOT_INITIALIZED: { code: "NOT_INITIALIZED", name: "NOT_INITIALIZED", message: "Please call the CometChat.init() method before calling any other methods related to CometChat.", details: {} }, NOT_LOGGED_IN: { code: "NOT_LOGGED_IN", name: "NOT_LOGGED_IN", message: "Please login before starting a call.", details: {} }, SESSION_ID_REQUIRED: { code: "SESSION_ID_REQUIRED", name: "SESSION_ID_REQUIRED", message: "Please make sure you are passing correct session id.", details: {} }, CALL_SETTINGS_REQUIRED: { code: "CALL_SETTINGS_REQUIRED", name: "CALL_SETTINGS_REQUIRED", message: "Please make sure you are passing the call settings object.", details: {} }, JWT_NOT_FOUND: { code: "JWT_NOT_FOUND", name: "JWT_NOT_FOUND", message: "There was some issue while fetching JWT from API.", details: {} } }, t.PARAMETER_ERROR = { PARAMETER_REQUIRED: { code: "%s_NOT_PROVIDED", name: "%s_NOT_PROVIDED", message: "please provide the %s.", details: {} } }, t.GENERAL_ERROR = { MUST_BE_A_STRING: { code: "INVALID_%s", name: "INVALID_%s", message: "%s should be a string.", details: {} }, MUST_BE_A_NUMBER: { code: "INVALID_%s", name: "INVALID_%s", message: "%s should be a number.", details: {} }, MUST_BE_A_OBJECT: { code: "INVALID_%s", name: "INVALID_%s", message: "%s should be a object.", details: {} }, MUST_BE_AN_ARRAY: { code: "INVALID_%s", name: "INVALID_%s", message: "%s should be an array.", details: {} }, MUST_BE_A_BOOLEAN: { code: "INVALID_%s", name: "INVALID_%s", message: "%s should be a boolean.", details: {} }, MUST_BE_A_BLOB: { code: "INVALID_%s", name: "INVALID_%s", message: "%s should be a blob.", details: {} }, INVALID: { code: "INVALID_%s", name: "INVALID_%s", message: "Invalid %s. Please provide a valid %s.", details: {} }, METHOD_COMPULSORY: { code: "%s_IS_COMPULSORY", name: "%s_IS_COMPULSORY", message: "%s is required.", details: {} }, LIMIT_EXCEEDED: { code: "ERROR_%s_EXCEEDED", name: "ERROR_%s_EXCEEDED", message: "Limit exceeded max limit of %s.", details: {} }, MUST_BE_A_POSITIVE_NUMBER: { code: "INVALID_%s", name: "INVALID_%s", message: "%s should be a postive integer greater than 0.", details: {} }, INVALID_MEDIA_FILE: { code: "INVALID_%s", name: "INVALID_%s", message: "The message type does not match the file's mime type.", details: {} }, EMPTY_STRING: { code: "INVALID_%s", name: "INVALID_%s", message: "%s cannot be empty.", details: {} }, MISSING_KEY: { code: "MISSING_KEY", name: "MISSING_KEY", message: "The key %s is missing from the %s object.", details: {} }, EMPTY_ARRAY: { code: "INVALID_%s", name: "INVALID_%s", message: "The parameter %s should be an array and it cannot be empty.", details: {} }, INVALID_SEARCH_KEYWORD: { code: "INVALID_SEARCH_KEYWORD", name: "INVALID_SEARCH_KEYWORD", message: "Invalid search keyword. Please provide a valid search keyword.", details: {} }, INVALID_GROUP_PROPERTY: { code: "INVALID_%s", name: "INVALID_%s", message: "Invalid %s provided for the group. Please provide a valid %s.", details: {} }, INVALID_USER_PROPERTY: { code: "INVALID_%s", name: "INVALID_%s", message: "Invalid %s provided for a user. Please provide a valid %s.", details: {} }, PARAMETER_MUST_BE_A_NUMBER: { code: "INVALID_%s", name: "INVALID_%s", message: "%s method accepts parameter as a number.", details: {} }, PARAMETER_MUST_BE_AN_ARRAY: { code: "INVALID_%s", name: "INVALID_%s", message: "%s method accepts parameter as an array.", details: {} }, PARAMETER_MUST_BE_A_BOOLEAN: { code: "INVALID_%s", name: "INVALID_%s", message: "%s method accepts parameter as a boolean.", details: {} }, PARAMETER_MUST_BE_A_POSITIVE_NUMBER: { code: "INVALID_%s", name: "INVALID_%s", message: "%s method accepts parameter to be a positive number greater than 0.", details: {} }, PARAMETER_MUST_BE_A_STRING: { code: "INVALID_%s", name: "INVALID_%s", message: "%s method accepts parameter as a string.", details: {} }, PARAMETER_COMPULSORY: { code: "%s_IS_COMPULSORY", name: "%s_IS_COMPULSORY", message: "%s cannot be blank. Please provide a valid %s.", details: {} }, PASSWORD_COMPULSORY: { code: "%s_IS_COMPULSORY", name: "%s_IS_COMPULSORY", message: "Password is mandatory for a password group.", details: {} }, INVALID_ARRAY: { code: "INVALID_%s", name: "INVALID_%s", message: "%s", details: {} } }, t.ReceiptErrors = { MISSING_PARAMETERS: { code: "MISSING_PARAMETERS", name: "MISSING_PARAMETERS", message: "Expected 4 parameters received 3", details: {} }, INVALID_PARAMETER: { code: "INVALID_%s", name: "INVALID_%s", message: "%s", details: {} }, NO_WEBSOCKET_CONNECTION: { code: "NO_WEBSOCKET_CONNECTION", name: "NO_WEBSOCKET_CONNECTION", message: "Connection to our Websockets server is broken. Please retry after some time.", details: {} }, RECEIPTS_TEMPORARILY_BLOCKED: { code: "RECEIPTS_TEMPORARILY_BLOCKED", name: "RECEIPTS_TEMPORARILY_BLOCKED", message: "Due to high load. Receipts have been blocked for your app.", details: {} }, UNKNOWN_ERROR_OCCURRED: { code: "UNKNOWN_ERROR_OCCURRED", name: "UNKNOWN_ERROR_OCCURRED", message: "Unknown error occurred while marking a message as read.", details: {} } }, t.UserErrors = { INVALID_STATUS: new E.CometChatException({ code: "INVALID_STATUS_VALUE", name: "INVALID_STATUS_VALUE", message: "The `status` parameter accepts only `online` or `offline`.", details: "" }), INVALID_DIRECTION: new E.CometChatException({ code: "INVALID_DIRECTION_VALUE", name: "INVALID_DIRECTION_VALUE", message: "The `direction` parameter accepts only `both`, `blockeyByMe` or `hasBlockedMe`.", details: "" }), USER_NOT_LOGGED_IN: new E.CometChatException({ code: "USER_NOT_LOGGED_IN", name: "USER_NOT_LOGGED_IN", message: "Please log in to CometChat before calling this method.", details: "" }) }, t.GroupErrors = { NOT_A_GROUP: new E.CometChatException({ code: "NOT_A_GROUP", message: "Please use group class to construct a new group." }), INVALID_SCOPE: new E.CometChatException({ code: "INVALID_SCOPE_VALUE", name: "INVALID_SCOPE_VALUE", message: "Scope can be `admin`, `moderator` or `participant`.", details: "" }), INVALID_GROUP_TYPE: new E.CometChatException({ code: "INVALID_GROUP_TYPE", name: "INVALID_GROUP_TYPE", message: "Group type can be `public`, `private`, `protected` or `password`.", details: "" }) }, t.ConversationErrors = { INVALID_CONVERSATION_TYPE: { code: "INVALID_CONVERSATION_TYPE", name: "INVALID_CONVERSATION_TYPE", message: "Conversation type can be `user` or `group`.", details: "Please check the value of conversationType." }, CONVERSATION_NOT_FOUND: { code: "CONVERSATION_NOT_FOUND", name: "CONVERSATION_NOT_FOUND", message: "Conversation for %s %s not found.", details: "Please check the value of conversationWith and conversationType." } }, t.AIErrors = { NO_CONVERSATION_STARTER: { code: "NO_CONVERSATION_STARTER", name: "NO_CONVERSATION_STARTER", message: "Unable to get conversation starter for this conversation.", details: "" }, NO_SMART_REPLY: { code: "NO_SMART_REPLY", name: "NO_SMART_REPLY", message: "Unable to get smart reply for this conversation.", details: "" }, NO_CONVERSATION_SUMMARY: { code: "NO_CONVERSATION_SUMMARY", name: "NO_CONVERSATION_SUMMARY", message: "Unable to get summary of the conversation.", details: "" }, NO_ASSISTANCE: { code: "EMPTY_RESPONSE", name: "EMPTY_RESPONSE", message: "Unable to get a suggestion.", details: "" } }, t.ExtensionErrors = { INVALID_EXTENSION: { code: "ERROR_INVALID_EXTENSION", name: "ERROR_INVALID_EXTENSION", message: "The provided extension cannot be null or empty. Please provide a valid extension.", details: {} }, EXTENSION_NOT_FOUND: { code: "ERROR_EXTENSION_NOT_FOUND", name: "ERROR_EXTENSION_NOT_FOUND", message: "The provided extension could not be found.", details: {} } }, t.AIFeatureError = { INVALID_AI_FEATURE: { code: "ERROR_INVALID_AI_FEATURE", name: "ERROR_INVALID_AI_FEATURE", message: "The provided AI Feature cannot be null or empty. Please provide a valid AI Feature.", details: {} } }, t.MessageErrors = { INVALID_RECEIVER_TYPE: { code: "INVALID_RECEIVER_TYPE", name: "INVALID_RECEIVER_TYPE", message: "Receiver type can be `user` or `group`.", details: "Please check the value of receiverType." } }, t.FeatureRestrictionErrors = { INVALID_FEATURE: { code: "ERROR_INVALID_FEATURE", name: "ERROR_INVALID_FEATURE", message: "The provided feature cannot be null or empty. Please provide a valid feature.", details: {} }, FEATURE_NOT_FOUND: { code: "ERROR_FEATURE_NOT_FOUND", name: "ERROR_FEATURE_NOT_FOUND", message: "The provided feature could not be found.", details: {} } }, t.PresenceConstatnts = { STATUS: { ONLINE: "online", AVAILABLE: "available", OFFLINE: "offline", JOINED: "JOINED", LEFT: "LEFT" } }, t.APP_SETTINGS = { APP_SETTINGS: "app_settings", KEYS: { CHAT_HOST: "CHAT_HOST", CHAT_USE_SSL: "CHAT_USE_SSL", GROUP_SERVICE: "GROUP_SERVICE", CALL_SERVICE: "CALL_SERVICE", CHAT_WS_PORT: "CHAT_WS_PORT", CHAT_WSS_PORT: "CHAT_WSS_PORT", CHAT_HTTP_BIND_PORT: "CHAT_HTTP_BIND_PORT", CHAT_HTTPS_BIND_PORT: "CHAT_HTTPS_BIND_PORT", ADMIN_API_HOST: "ADMIN_API_HOST", CLIENT_API_HOST: "CLIENT_API_HOST", WEBRTC_HOST: "WEBRTC_HOST", WEBRTC_USE_SSL: "WEBRTC_USE_SSL", WEBRTC_WS_PORT: "WEBRTC_WS_PORT", WEBRTC_WSS_PORT: "WEBRTC_WSS_PORT", WEBRTC_HTTP_BIND_PORT: "WEBRTC_HTTP_BIND_PORT", WEBRTC_HTTPS_BIND_PORT: "WEBRTC_HTTPS_BIND_PORT", EXTENSION_LIST: "extensions", EXTENSION_KEYS: { ID: "id", NAME: "name" }, JID_HOST_OVERRIDE: "JID_HOST_OVERRIDE", CHAT_HOST_OVERRIDE: "CHAT_HOST_OVERRIDE", CHAT_HOST_APP_SPECIFIC: "CHAT_HOST_APP_SPECIFIC", MODE: "MODE", CONNECTION_TYPE: "connection_type", DEFAULT_MODE: "DEFAULT", LIMITED_TRANSIENT: "LIMITED_TRANSIENT", NO_TRANSIENT: "NO_TRANSIENT", POLLING_ENABLED: "POLLING_ENABLED", POLLING_INTERVAL: "POLLING_INTERVAL", ANALYTICS_PING_DISABLED: "ANALYTICS_PING_DISABLED", ANALYTICS_HOST: "ANALYTICS_HOST", ANALYTICS_VERSION: "ANALYTICS_VERSION", ANALYTICS_USE_SSL: "ANALYTICS_USE_SSL", SETTINGS_HASH: "settingsHash", SETTINGS_HASH_RECEIVED_AT: "settingsHashReceivedAt", DENY_FALLBACK_TO_POLLING: "DENY_FALLBACK_TO_POLLING", APP_VERSION: "APP_VERSION", MAIN_DOMAIN: "MAIN_DOMAIN", CHAT_API_VERSION: "CHAT_API_VERSION", WS_API_VERSION: "WS_API_VERSION", REGION: "REGION", EXTENSION_DOMAIN: "EXTENSION_DOMAIN", WEBRTC_API_SUBDOMAIN: "WEBRTC_API_SUBDOMAIN", WEBRTC_WEB_FRONTEND_HOST: "WEBRTC_WEB_FRONTEND_HOST", WEBRTC_WEB_FRONTEND_VERSION: "WEBRTC_WEB_FRONTEND_VERSION", SECURED_MEDIA_HOST: "SECURED_MEDIA_HOST" } }, t.COMMON_UTILITY_CONSTANTS = { TYPE_CONSTANTS: { BOOLEAN: "boolean", STRING: "string", OBJECT: "object", NUMBER: "number" } }, t.CONNECTION_STATUS = { CONNECTED: "connected", CONNECTING: "connecting", DISCONNECTED: "disconnected", FEATURE_THROTTLED: "featureThrottled" }, t.SESSION_STORE = { SESSION_ID: "sessionId" }, (a = t.REACTION_ACTION || (t.REACTION_ACTION = {})).REACTION_ADDED = "message_reaction_added", a.REACTION_REMOVED = "message_reaction_removed", t.API_ERROR_CODES = { AUTH_ERR_AUTH_TOKEN_NOT_FOUND: "AUTH_ERR_AUTH_TOKEN_NOT_FOUND" }, t.PROSODY_API = { DOMAIN_PREFIX: "xmpp", PATH: { ROOM: "room", ROOM_SIZE: "room-size", SESSIONS: "sessions" }, RESPONSE: { PARTICIPANTS: "participants" }, QUERY_PARAMETERS: { DOMAIN: "domain", ROOM: "room" } }, t.ProsodyApiErrors = { INVALID_SESSIONID: { code: "ERROR_INVALID_SESSIONID", name: "ERROR_INVALID_SESSIONID", message: "The provided sessionId cannot be null or empty. Please provide a valid sessionId.", details: "" }, INVALID_TYPE: { code: "ERROR_INVALID_TYPE", name: "ERROR_INVALID_TYPE", message: "The provided type cannot be null or empty. Please provide a valid type.", details: "" } }, t.JWT_API = { KEYS: { PASSTHROUGH: "passthrough", EXPAND: "expand" } }, t.ONLINE_MEMBER_COUNT_API = { ENDPOINTS: { GET_ONLINE_MEMBER_COUNT: "api/%s/online-members" }, RESPONSE: { ONLINE_USERS_COUNT: "onlineUsersCount", GROUPS: "groups" }, ERRORS: { INVALID_GROUPLIST: { code: "ERROR_INVALID_GROUPLIST", name: "ERROR_INVALID_GROUPLIST", message: "Grouplist cannot be null or empty.", details: "" } } }, t.ADDITIONAL_CONSTANTS = { SECURE_URL_PROPERTY: "fat" }, t.AI_FEATURE_ACCESSIBLE = "features.ai.accessible", t.AI_FEATURE_ENABLED = "features.ai.enabled", t.AI_SLUG_ACCESSIBLE = "features.ai.%s.accessible", t.AI_SLUG_ENABLED = "features.ai.%s.enabled";
      }, function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", { value: true }), t.CometChatException = void 0;
        var o = function(e2) {
          null !== e2.code && void 0 !== e2.code && "" !== e2.code && (this.code = e2.code), null !== e2.name && void 0 !== e2.name && "" !== e2.name && (this.name = e2.name), null !== e2.message && void 0 !== e2.message && "" !== e2.message && (this.message = e2.message), null !== e2.details && void 0 !== e2.details && "" !== e2.details && (this.details = e2.details);
        };
        t.CometChatException = o;
      }, function(e, t, n) {
        "use strict";
        var o, s = this && this.__extends || (o = function(e2, t2) {
          return (o = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e3, t3) {
            e3.__proto__ = t3;
          } || function(e3, t3) {
            for (var n2 in t3)
              t3.hasOwnProperty(n2) && (e3[n2] = t3[n2]);
          })(e2, t2);
        }, function(e2, t2) {
          function n2() {
            this.constructor = e2;
          }
          o(e2, t2), e2.prototype = null === t2 ? Object.create(t2) : (n2.prototype = t2.prototype, new n2());
        });
        Object.defineProperty(t, "__esModule", { value: true }), t.Me = t.User = void 0;
        var r = n(2), i = n(10), a = n(1), E = function() {
          function e2() {
            for (var e3 = [], t2 = 0; t2 < arguments.length; t2++)
              e3[t2] = arguments[t2];
            if (this.hasBlockedMe = false, this.blockedByMe = false, this.deactivatedAt = 0, 1 === e3.length)
              typeof e3[0] === a.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING ? this.uid = e3[0] : (this.uid = e3[0].uid, this.name = e3[0].name, e3[0].authToken && (this.authToken = e3[0].authToken), e3[0].avatar && (this.avatar = e3[0].avatar), e3[0].lastActiveAt && (this.lastActiveAt = e3[0].lastActiveAt), e3[0].link && (this.link = e3[0].link), e3[0].metadata && (this.metadata = e3[0].metadata), e3[0].role && (this.role = e3[0].role), e3[0].statusMessage && (this.statusMessage = e3[0].statusMessage), e3[0].status && "offline" !== e3[0].status ? this.status = "online" : this.status = "offline", e3[0].tags && (this.tags = e3[0].tags), e3[0].deactivatedAt && (this.deactivatedAt = e3[0].deactivatedAt));
            else {
              if (2 !== e3.length)
                throw new r.CometChatException(i.ERRORS.PARAMETER_MISSING);
              this.uid = e3[0], this.name = e3[1];
            }
          }
          return e2.prototype.getUid = function() {
            return this.uid.toString();
          }, e2.prototype.setUid = function(e3) {
            this.uid = e3;
          }, e2.prototype.getName = function() {
            return this.name.toString();
          }, e2.prototype.setName = function(e3) {
            e3 && (this.name = e3);
          }, e2.prototype.getAuthToken = function() {
            return this.authToken;
          }, e2.prototype.setAuthToken = function(e3) {
            this.authToken = e3;
          }, e2.prototype.getAvatar = function() {
            return this.avatar;
          }, e2.prototype.setAvatar = function(e3) {
            this.avatar = e3;
          }, e2.prototype.getLastActiveAt = function() {
            return this.lastActiveAt;
          }, e2.prototype.setLastActiveAt = function(e3) {
            this.lastActiveAt = e3;
          }, e2.prototype.getLink = function() {
            return this.link;
          }, e2.prototype.setLink = function(e3) {
            return this.link = e3;
          }, e2.prototype.getMetadata = function() {
            return this.metadata;
          }, e2.prototype.setMetadata = function(e3) {
            this.metadata = e3;
          }, e2.prototype.getRole = function() {
            return this.role;
          }, e2.prototype.setRole = function(e3) {
            this.role = e3;
          }, e2.prototype.getStatus = function() {
            return this.status;
          }, e2.prototype.setStatus = function(e3) {
            this.status = e3;
          }, e2.prototype.getStatusMessage = function() {
            return this.statusMessage;
          }, e2.prototype.setStatusMessage = function(e3) {
            this.statusMessage = e3;
          }, e2.prototype.setBlockedByMe = function(e3) {
            this.blockedByMe = e3;
          }, e2.prototype.getBlockedByMe = function() {
            return this.blockedByMe;
          }, e2.prototype.setHasBlockedMe = function(e3) {
            this.hasBlockedMe = e3;
          }, e2.prototype.getHasBlockedMe = function() {
            return this.hasBlockedMe;
          }, e2.prototype.setTags = function(e3) {
            this.tags = e3;
          }, e2.prototype.getTags = function() {
            return this.tags;
          }, e2.prototype.setDeactivatedAt = function(e3) {
            this.deactivatedAt = e3;
          }, e2.prototype.getDeactivatedAt = function() {
            return this.deactivatedAt;
          }, e2;
        }(), c = function(n2) {
          function e2(e3) {
            var t2 = n2.call(this, e3) || this;
            return t2.wsChannel = e3.wsChannel, e3.jwt && (t2.jwt = e3.jwt), e3.fat && (t2.fat = e3.fat), t2;
          }
          return s(e2, n2), e2.prototype.getWsChannel = function() {
            return this.wsChannel;
          }, e2.prototype.getJWT = function() {
            return this.jwt;
          }, e2.prototype.getFat = function() {
            return this.fat;
          }, e2;
        }(t.User = E);
        t.Me = c;
      }, function(e, t, n) {
        "use strict";
        var l = this && this.__assign || function() {
          return (l = Object.assign || function(e2) {
            for (var t2, n2 = 1, o2 = arguments.length; n2 < o2; n2++)
              for (var s2 in t2 = arguments[n2])
                Object.prototype.hasOwnProperty.call(t2, s2) && (e2[s2] = t2[s2]);
            return e2;
          }).apply(this, arguments);
        }, E = this && this.__awaiter || function(e2, i2, a2, E2) {
          return new (a2 || (a2 = Promise))(function(n2, t2) {
            function o2(e3) {
              try {
                r2(E2.next(e3));
              } catch (e4) {
                t2(e4);
              }
            }
            function s2(e3) {
              try {
                r2(E2.throw(e3));
              } catch (e4) {
                t2(e4);
              }
            }
            function r2(e3) {
              var t3;
              e3.done ? n2(e3.value) : (t3 = e3.value, t3 instanceof a2 ? t3 : new a2(function(e4) {
                e4(t3);
              })).then(o2, s2);
            }
            r2((E2 = E2.apply(e2, i2 || [])).next());
          });
        }, c = this && this.__generator || function(n2, o2) {
          var s2, r2, i2, e2, a2 = { label: 0, sent: function() {
            if (1 & i2[0])
              throw i2[1];
            return i2[1];
          }, trys: [], ops: [] };
          return e2 = { next: t2(0), throw: t2(1), return: t2(2) }, "function" == typeof Symbol && (e2[Symbol.iterator] = function() {
            return this;
          }), e2;
          function t2(t3) {
            return function(e3) {
              return function(t4) {
                if (s2)
                  throw new TypeError("Generator is already executing.");
                for (; a2; )
                  try {
                    if (s2 = 1, r2 && (i2 = 2 & t4[0] ? r2.return : t4[0] ? r2.throw || ((i2 = r2.return) && i2.call(r2), 0) : r2.next) && !(i2 = i2.call(r2, t4[1])).done)
                      return i2;
                    switch (r2 = 0, i2 && (t4 = [2 & t4[0], i2.value]), t4[0]) {
                      case 0:
                      case 1:
                        i2 = t4;
                        break;
                      case 4:
                        return a2.label++, { value: t4[1], done: false };
                      case 5:
                        a2.label++, r2 = t4[1], t4 = [0];
                        continue;
                      case 7:
                        t4 = a2.ops.pop(), a2.trys.pop();
                        continue;
                      default:
                        if (!(i2 = 0 < (i2 = a2.trys).length && i2[i2.length - 1]) && (6 === t4[0] || 2 === t4[0])) {
                          a2 = 0;
                          continue;
                        }
                        if (3 === t4[0] && (!i2 || t4[1] > i2[0] && t4[1] < i2[3])) {
                          a2.label = t4[1];
                          break;
                        }
                        if (6 === t4[0] && a2.label < i2[1]) {
                          a2.label = i2[1], i2 = t4;
                          break;
                        }
                        if (i2 && a2.label < i2[2]) {
                          a2.label = i2[2], a2.ops.push(t4);
                          break;
                        }
                        i2[2] && a2.ops.pop(), a2.trys.pop();
                        continue;
                    }
                    t4 = o2.call(n2, a2);
                  } catch (e4) {
                    t4 = [6, e4], r2 = 0;
                  } finally {
                    s2 = i2 = 0;
                  }
                if (5 & t4[0])
                  throw t4[1];
                return { value: t4[0] ? t4[1] : void 0, done: true };
              }([t3, e3]);
            };
          }
        };
        Object.defineProperty(t, "__esModule", { value: true }), t.CometChat = void 0;
        var u = n(33), w = n(0), K = n(2), T = n(6), C = n(3), d = n(14), S = n(19), p = n(7), _ = n(17), g = n(11), h = n(12), b = n(1), a = n(8), A = n(15), r = n(27), o = n(28), s = n(25), B = n(36), R = n(10), i = n(24), I = n(45), f = n(46), O = n(47), N = n(48), y = n(50), m = n(51), M = n(30), v = n(31), P = n(41), L = n(21), D = n(39), U = n(53), Y = n(54), F = n(55), x = n(40), V = n(29), k = n(20), J = n(56), H = n(57), W = n(58), G = n(42), j = n(5), q = n(69), X = n(34), Q = n(37), z = n(32), Z = n(22), $ = n(35), ee = n(23), te = n(43), ne = n(70), oe = n(71), se = n(72), re = W.WSConnectionHelper.getInstance(), ie = G.ListenerHandlers.getInstance(), ae = function() {
          function G2(e2) {
            try {
              G2.appId = e2, G2.localStorage = d.LocalStorage.getInstance(), G2.keyStore = r.KeyStore.getInstance();
            } catch (e3) {
              w.Logger.error("CometChat: constructor", e3);
            }
          }
          return G2.setAuthToken = function(e2) {
            try {
              G2.authToken = e2;
            } catch (e3) {
              w.Logger.error("CometChat: setAuthToken", e3);
            }
          }, G2.prototype.getAuthToken = function() {
            try {
              return G2.authToken;
            } catch (e2) {
              w.Logger.error("CometChat: getAuthToken", e2);
            }
          }, G2.getAppId = function() {
            try {
              return G2.appId;
            } catch (e2) {
              w.Logger.error("CometChat: getAppId", e2);
            }
          }, G2.prototype.getApiKey = function() {
            try {
              return G2.apiKey;
            } catch (e2) {
              w.Logger.error("CometChat: getApiKey", e2);
            }
          }, G2.getMode = function() {
            try {
              return G2.mode;
            } catch (e2) {
              w.Logger.error("CometChat: getMode", e2);
            }
          }, G2.setMode = function(e2) {
            try {
              G2.mode = e2;
            } catch (e3) {
              w.Logger.error("CometChat: getMode", e3);
            }
          }, G2.getSessionId = function() {
            try {
              return G2.sessionId;
            } catch (e2) {
              w.Logger.error("CometChat: getSessionId", e2);
            }
          }, G2.onStorageEvent = function(e2) {
            if (document && !document.hasFocus()) {
              var t2 = G2.appId + ":common_store/user";
              e2.key === t2 && null === e2.newValue && (G2.authToken = void 0, G2.didAnalyticsPingStart() && G2.clearAnalyticsPingTimer(), re.WSLogout(), G2.pushToLoginListener("", "Logout_Success")), e2.key === t2 && null === e2.oldValue && d.LocalStorage.getInstance().get("user").then(function(e3) {
                e3 && (G2.user = new C.Me(e3), G2.setAuthToken(G2.user.getAuthToken()), e3.jwt && (G2.jwt = e3.jwt), d.LocalStorage.getInstance().get("app_settings").then(function(e4) {
                  if (e4) {
                    if (e4.hasOwnProperty(b.APP_SETTINGS.KEYS.APP_VERSION)) {
                      var t3 = parseInt(b.APPINFO.sdkVersion.charAt(1));
                      e4[b.APP_SETTINGS.KEYS.APP_VERSION] < t3 && (G2.appSettings.shouldAutoEstablishSocketConnection() || (G2.shouldConnectToWS = false), G2.getInstance().internalRestart(G2.user.getAuthToken()));
                    } else
                      G2.appSettings.shouldAutoEstablishSocketConnection() || (G2.shouldConnectToWS = false), G2.getInstance().internalRestart(G2.user.getAuthToken());
                    if (e4[b.APP_SETTINGS.KEYS.MODE] && (G2.mode = e4[b.APP_SETTINGS.KEYS.MODE]), e4[b.APP_SETTINGS.KEYS.SETTINGS_HASH] && (G2.settingsHash = e4[b.APP_SETTINGS.KEYS.SETTINGS_HASH]), e4[b.APP_SETTINGS.KEYS.SETTINGS_HASH_RECEIVED_AT] && (G2.settingsHashReceivedAt = e4[b.APP_SETTINGS.KEYS.SETTINGS_HASH_RECEIVED_AT]), G2.isAnalyticsDisabled = !!e4[b.APP_SETTINGS.KEYS.ANALYTICS_PING_DISABLED], G2.didAnalyticsPingStart() || G2.isAnalyticsDisabled || !G2.appSettings.shouldAutoEstablishSocketConnection() || (G2.pingAnalytics(), G2.startAnalyticsPingTimer()), G2.getConnectionStatus() !== b.CONNECTION_STATUS.CONNECTED) {
                      var n2 = new C.User(G2.user);
                      G2.pushToLoginListener(n2, "Login_Success"), G2.appSettings.shouldAutoEstablishSocketConnection() && G2.WSLogin(G2.user);
                    }
                  }
                }));
              });
            }
          }, G2.beforeUnload = function(e2) {
            var t2 = G2.getDataFromSessionStorage(b.SESSION_STORE.SESSION_ID);
            G2.removeDataFromSessionStorage(b.SESSION_STORE.SESSION_ID), d.LocalStorage.getInstance().set(b.SESSION_STORE.SESSION_ID, t2);
          }, G2.didAnalyticsPingStart = function() {
            try {
              return G2.isAnalyticsPingStarted;
            } catch (e2) {
              w.Logger.error("CometChat: didAnalyticsPingStart", e2);
            }
          }, G2.getDataFromSessionStorage = function(e2) {
            if (window.sessionStorage)
              return window.sessionStorage.getItem(e2);
          }, G2.addDataToSessionStorage = function(e2, t2) {
            window.sessionStorage && window.sessionStorage.setItem(e2, t2);
          }, G2.removeDataFromSessionStorage = function(e2) {
            window.sessionStorage && window.sessionStorage.removeItem(e2);
          }, G2.init = function(s2, e2) {
            var o2 = this;
            return void 0 === s2 && (s2 = ""), new Promise(function(n2, t2) {
              try {
                "object" == typeof s2 && (s2.hasOwnProperty("appId") && (s2 = s2.appId), s2.hasOwnProperty("appSettings") && (e2 = s2.appSettings)), w.isFalsy(e2) ? e2 = new Y.AppSettingsBuilder().setRegion(Y.AppSettings.REGION_EU).build() : e2.getRegion() == Y.AppSettings.REGION_PRIVATE && (e2.region = s2), o2.appSettings = e2, w.isFalsy(s2) ? t2(new K.CometChatException(R.INIT_ERROR.NO_APP_ID)) : (window.addEventListener && (window.addEventListener("storage", G2.onStorageEvent, false), window.addEventListener("beforeunload", G2.beforeUnload, false)), o2.initialzed = true, G2.appId = s2, G2.getInstance(s2), d.LocalStorage.getInstance().get(b.SESSION_STORE.SESSION_ID).then(function(e3) {
                  null == e3 || null == e3 ? (G2.sessionId = b.APPINFO.platform + "-" + b.APPINFO.sdkVersionWithUnderScore + "-" + se() + "-" + (/* @__PURE__ */ new Date()).getTime(), G2.addDataToSessionStorage(b.SESSION_STORE.SESSION_ID, G2.getSessionId()), d.LocalStorage.getInstance().remove(b.SESSION_STORE.SESSION_ID)) : (G2.sessionId = e3.toLocaleString(), d.LocalStorage.getInstance().remove(b.SESSION_STORE.SESSION_ID), G2.addDataToSessionStorage(b.SESSION_STORE.SESSION_ID, G2.getSessionId())), d.LocalStorage.getInstance().get(b.LOCAL_STORE.KEY_APP_ID).then(function(e4) {
                    if (null == e4 || null == e4)
                      G2.appId = s2, G2.getInstance(s2), d.LocalStorage.getInstance().set(b.LOCAL_STORE.KEY_APP_ID, s2), n2(true);
                    else {
                      var t3 = e4.toLocaleString();
                      t3 === s2 ? (G2.appId = t3, G2.getInstance(t3), d.LocalStorage.getInstance().get(b.LOCAL_STORE.KEY_USER).then(function(e5) {
                        e5 ? (G2.isLoggedOut = false, G2.user = new C.Me(e5), new ne.PostDetails(), G2.setAuthToken(G2.user.getAuthToken()), e5.jwt && (G2.jwt = e5.jwt), n2(true), d.LocalStorage.getInstance().get(b.LOCAL_STORE.KEY_APP_SETTINGS).then(function(e6) {
                          if (e6) {
                            if (e6.hasOwnProperty(b.APP_SETTINGS.KEYS.APP_VERSION)) {
                              var t4 = parseInt(b.APPINFO.sdkVersion.charAt(1));
                              e6[b.APP_SETTINGS.KEYS.APP_VERSION] < t4 && 3 !== e6[b.APP_SETTINGS.KEYS.APP_VERSION] && (o2.appSettings.shouldAutoEstablishSocketConnection() || (G2.shouldConnectToWS = false), G2.getInstance().internalRestart(G2.user.getAuthToken()));
                            } else
                              o2.appSettings.shouldAutoEstablishSocketConnection() || (G2.shouldConnectToWS = false), G2.getInstance().internalRestart(G2.user.getAuthToken());
                            e6[b.APP_SETTINGS.KEYS.SECURED_MEDIA_HOST] && (G2.SECURED_MEDIA_HOST = e6[b.APP_SETTINGS.KEYS.SECURED_MEDIA_HOST]), e6[b.APP_SETTINGS.KEYS.MODE] && (G2.mode = e6[b.APP_SETTINGS.KEYS.MODE]), e6[b.APP_SETTINGS.KEYS.SETTINGS_HASH] && (G2.settingsHash = e6[b.APP_SETTINGS.KEYS.SETTINGS_HASH]), e6[b.APP_SETTINGS.KEYS.SETTINGS_HASH_RECEIVED_AT] && (G2.settingsHashReceivedAt = e6[b.APP_SETTINGS.KEYS.SETTINGS_HASH_RECEIVED_AT]), G2.isAnalyticsDisabled = !!e6[b.APP_SETTINGS.KEYS.ANALYTICS_PING_DISABLED], G2.didAnalyticsPingStart() || G2.isAnalyticsDisabled || !o2.appSettings.shouldAutoEstablishSocketConnection() || (G2.pingAnalytics(), G2.startAnalyticsPingTimer()), re && !re.connection && o2.appSettings.shouldAutoEstablishSocketConnection() && (G2.isConnectingFromInit = true, G2.WSLogin(G2.user));
                          }
                        })) : n2(true);
                      })) : o2.clearCache().then(function() {
                        G2.apiKey = void 0, G2.user = void 0, G2.authToken = void 0, G2.cometChat = void 0, G2.mode = void 0, re.WSLogout(), G2.appId = s2, d.LocalStorage.getInstance().set(b.LOCAL_STORE.KEY_APP_ID, s2), G2.getInstance(s2), n2(true);
                      });
                    }
                    r.KeyStore.getInstance().get(b.LOCAL_STORE.KEY_DEVICE_ID).then(function(e5) {
                      if (null == e5) {
                        var t4 = se(), n3 = (/* @__PURE__ */ new Date()).getTime(), o3 = s2 + "_" + t4 + "_" + n3;
                        r.KeyStore.getInstance().set(b.LOCAL_STORE.KEY_DEVICE_ID, o3);
                      }
                    });
                  });
                }));
              } catch (e3) {
                t2(new K.CometChatException(e3));
              }
            });
          }, G2.isInitialized = function() {
            try {
              return this.initialzed;
            } catch (e2) {
              w.Logger.error("CometChat: isInitialized", e2);
            }
          }, G2.getInstance = function(e2) {
            try {
              return this.cometChat || (this.cometChat = new G2(e2)), this.cometChat;
            } catch (e3) {
              w.Logger.error("CometChat: getInstance", e3);
            }
          }, G2.registerTokenForPushNotification = function(p2, l2) {
            var C2 = this;
            return new Promise(function(u2, S2) {
              try {
                G2.keyStore.get(b.LOCAL_STORE.KEY_DEVICE_ID).then(function(c2) {
                  w.getAppSettings().then(function(e2) {
                    var t2 = "", n2 = c2, o2 = b.APPINFO.platform, s2 = b.APPINFO.sdkVersion, r2 = e2[b.APP_SETTINGS.KEYS.CHAT_API_VERSION];
                    if (navigator && (t2 = navigator.userAgent), null == n2) {
                      var i2 = se(), a2 = (/* @__PURE__ */ new Date()).getTime();
                      n2 = C2.appId + "_" + i2 + "_" + a2, G2.keyStore.set(b.LOCAL_STORE.KEY_DEVICE_ID, n2);
                    }
                    var E2 = { platform: o2, deviceId: n2, appInfo: { version: s2, apiVersion: r2, userAgent: t2, pushNotification: { fcmDeviceToken: p2, settings: l2 } } };
                    T.makeApiCall("updateMyDetails", {}, E2, false).then(function(e3) {
                      u2("Token Registration successful");
                    }, function(e3) {
                      S2(new K.CometChatException(e3.error));
                    }).catch(function(e3) {
                      S2(new K.CometChatException(e3));
                    });
                  }, function(e2) {
                    S2(new K.CometChatException(e2));
                  });
                });
              } catch (e2) {
                S2(new K.CometChatException(e2));
              }
            });
          }, G2.pushToLoginListener = function(t2, n2) {
            ie.loginHandlers.map(function(e2) {
              try {
                if (e2._eventListener)
                  switch (n2) {
                    case "Login_Success":
                      w.isFalsy(e2._eventListener.loginSuccess) || e2._eventListener.loginSuccess(t2);
                      break;
                    case "Login_Failure":
                      w.isFalsy(e2._eventListener.loginFailure) || e2._eventListener.loginFailure(t2);
                      break;
                    case "Logout_Success":
                      w.isFalsy(e2._eventListener.logoutSuccess) || e2._eventListener.logoutSuccess();
                  }
              } catch (e3) {
                w.Logger.error("ConnectionHandlers: onConnected Status", e3);
              }
            });
          }, G2.login = function() {
            for (var E2 = this, c2 = [], e2 = 0; e2 < arguments.length; e2++)
              c2[e2] = arguments[e2];
            return new Promise(function(i2, a2) {
              try {
                if (G2.loginInProgress) {
                  G2.isLoggedOut = true;
                  var t2 = new K.CometChatException(R.LOGIN_ERROR.REQUEST_IN_PROGRESS);
                  return a2(t2);
                }
                G2.loginInProgress = true, G2.isConnectingFromInit = false, G2.localStorage.get(b.LOCAL_STORE.KEY_APP_ID).then(function(e3) {
                  if (null == e3 || null == e3) {
                    var t3 = new K.CometChatException(R.LOGIN_ERROR.NOT_INITIALIZED);
                    return G2.internalRestart || G2.pushToLoginListener(t3, "Login_Failure"), G2.loginInProgress = false, G2.isLoggedOut = true, a2(t3);
                  }
                  var n2 = e3.toLocaleString();
                  if (E2.getInstance(n2), G2.appId = n2, d.LocalStorage.getInstance().set(b.LOCAL_STORE.KEY_APP_ID, n2), "object" == typeof c2[0]) {
                    var o2 = c2[0];
                    c2[0].hasOwnProperty("authToken") ? c2[0] = o2.authToken : c2[0].hasOwnProperty("username") && c2[0].hasOwnProperty("apiKey") && (c2[0] = o2.username, c2[1] = o2.apiKey);
                  }
                  if (2 == c2.length) {
                    if (w.isFalsy(c2[0]) || w.isFalsy(c2[1])) {
                      t3 = new K.CometChatException(R.ERRORS.PARAMETER_MISSING);
                      return G2.internalRestart || G2.pushToLoginListener(t3, "Login_Failure"), G2.loginInProgress = false, G2.isLoggedOut = true, a2(t3);
                    }
                  } else {
                    if (1 != c2.length) {
                      t3 = new K.CometChatException(R.ERRORS.PARAMETER_MISSING);
                      return G2.internalRestart || G2.pushToLoginListener(t3, "Login_Failure"), G2.loginInProgress = false, G2.isLoggedOut = true, a2(t3);
                    }
                    if (w.isFalsy(c2[0])) {
                      var t3 = new K.CometChatException(R.ERRORS.PARAMETER_MISSING);
                      return G2.internalRestart || G2.pushToLoginListener(t3, "Login_Failure"), G2.loginInProgress = false, G2.isLoggedOut = true, a2(t3);
                    }
                  }
                  if (w.isFalsy(E2.getAppId())) {
                    t3 = new K.CometChatException(R.LOGIN_ERROR.NOT_INITIALIZED);
                    return G2.internalRestart || G2.pushToLoginListener(t3, "Login_Failure"), G2.loginInProgress = false, G2.isLoggedOut = true, a2(t3);
                  }
                  return G2.localStorage.get(b.LOCAL_STORE.KEY_USER).then(function(r2) {
                    if (2 == c2.length) {
                      G2.apiKey = c2[1];
                      var e4 = c2[0];
                      if (null != r2 && r2.uid !== c2[0])
                        G2.localStorage.clearStore().then(function() {
                          re.WSLogout(), G2.generateAuthToken(e4).then(function(e5) {
                            G2.user = new C.Me(e5), G2.setAuthToken(G2.user.getAuthToken()), G2.getLoggedInUser().then(function(e6) {
                              (G2.user = new C.Me(e6)).setAuthToken(G2.authToken), G2.setAuthToken(G2.user.getAuthToken());
                              var t5 = G2.user;
                              t5.setStatus(b.PresenceConstatnts.STATUS.ONLINE), G2.localStorage.set("user", t5);
                              var n4 = new C.User(t5);
                              i2(n4), G2.isConnectingFromInit || G2.internalRestart || (G2.pushToLoginListener(n4, "Login_Success"), new ne.PostDetails()), G2.loginInProgress = false, G2.didAnalyticsPingStart() || G2.isAnalyticsDisabled || !G2.appSettings.shouldAutoEstablishSocketConnection() || (G2.pingAnalytics(), G2.startAnalyticsPingTimer()), G2.isLoggedOut = false, (G2.appSettings.shouldAutoEstablishSocketConnection() || G2.internalRestart) && G2.shouldConnectToWS && G2.WSLogin(G2.user);
                            }, function(e6) {
                              return G2.internalRestart || G2.pushToLoginListener(e6, "Login_Failure"), G2.loginInProgress = false, G2.isLoggedOut = true, a2(e6);
                            });
                          }, function(e5) {
                            return G2.internalRestart || G2.pushToLoginListener(e5, "Login_Failure"), G2.loginInProgress = false, G2.isLoggedOut = true, a2(e5);
                          });
                        });
                      else {
                        if (!w.isFalsy(G2.authToken)) {
                          var t4 = new C.User(E2.user);
                          return G2.internalRestart || (G2.pushToLoginListener(t4, "Login_Success"), new ne.PostDetails()), G2.loginInProgress = false, G2.isLoggedOut = false, i2(t4);
                        }
                        if (!w.isFalsy(e4)) {
                          if (w.isFalsy(G2.apiKey)) {
                            var n3 = new K.CometChatException(R.LOGIN_ERROR.UNAUTHORISED);
                            return G2.internalRestart || G2.pushToLoginListener(n3, "Login_Failure"), G2.loginInProgress = false, G2.isLoggedOut = true, a2(n3);
                          }
                          E2.generateAuthToken(e4).then(function(e5) {
                            E2.user = new C.Me(e5), E2.setAuthToken(G2.user.getAuthToken()), E2.getLoggedInUser().then(function(e6) {
                              E2.user = new C.Me(e6), E2.user.setAuthToken(G2.authToken), E2.setAuthToken(E2.user.getAuthToken()), re.WSLogout();
                              var t5 = E2.user;
                              t5.setStatus(b.PresenceConstatnts.STATUS.ONLINE), E2.localStorage.set("user", t5);
                              var n4 = new C.User(t5);
                              i2(n4), G2.isConnectingFromInit || G2.internalRestart || (G2.pushToLoginListener(n4, "Login_Success"), new ne.PostDetails()), G2.loginInProgress = false, G2.didAnalyticsPingStart() || G2.isAnalyticsDisabled || !G2.appSettings.shouldAutoEstablishSocketConnection() || (G2.pingAnalytics(), G2.startAnalyticsPingTimer()), G2.isLoggedOut = false, (G2.appSettings.shouldAutoEstablishSocketConnection() || G2.internalRestart) && G2.shouldConnectToWS && E2.WSLogin(E2.user);
                            }, function(e6) {
                              return G2.internalRestart || G2.pushToLoginListener(e6, "Login_Failure"), G2.loginInProgress = false, G2.isLoggedOut = true, a2(e6);
                            });
                          }, function(e5) {
                            return G2.internalRestart || G2.pushToLoginListener(e5, "Login_Failure"), G2.loginInProgress = false, G2.isLoggedOut = true, a2(e5);
                          });
                        }
                      }
                    } else
                      G2.authToken = c2[0], E2.getLoggedInUser().then(function(e5) {
                        if (e5.authToken != c2[0]) {
                          var o3 = E2;
                          o3.localStorage.clearStore().then(function() {
                            re.WSLogout(), o3.getLoggedInUser().then(function(e6) {
                              (G2.user = new C.Me(e6)).setAuthToken(G2.authToken), G2.setAuthToken(G2.user.getAuthToken());
                              var t6 = G2.user;
                              t6.setStatus(b.PresenceConstatnts.STATUS.ONLINE), o3.localStorage.set("user", t6);
                              var n5 = new C.User(t6);
                              i2(n5), G2.isConnectingFromInit || G2.internalRestart || (G2.pushToLoginListener(n5, "Login_Success"), new ne.PostDetails()), G2.loginInProgress = false, G2.didAnalyticsPingStart() || G2.isAnalyticsDisabled || !G2.appSettings.shouldAutoEstablishSocketConnection() || (G2.pingAnalytics(), G2.startAnalyticsPingTimer()), G2.isLoggedOut = false, (G2.appSettings.shouldAutoEstablishSocketConnection() || G2.internalRestart) && G2.shouldConnectToWS && G2.WSLogin(new C.Me(e6));
                            }, function(e6) {
                              return G2.internalRestart || G2.pushToLoginListener(e6, "Login_Failure"), G2.loginInProgress = false, G2.isLoggedOut = true, a2(e6);
                            });
                          });
                        } else {
                          if (r2) {
                            var t5 = new C.User(e5);
                            return G2.internalRestart || (G2.pushToLoginListener(t5, "Login_Success"), new ne.PostDetails()), G2.loginInProgress = false, G2.isLoggedOut = false, i2(t5);
                          }
                          (G2.user = new C.Me(e5)).setAuthToken(G2.authToken), G2.setAuthToken(G2.user.getAuthToken());
                          var n4 = G2.user;
                          n4.setStatus(b.PresenceConstatnts.STATUS.ONLINE), G2.localStorage.set("user", n4);
                          var s2 = new C.User(n4);
                          i2(s2), G2.isConnectingFromInit || G2.internalRestart || (G2.pushToLoginListener(s2, "Login_Success"), new ne.PostDetails()), G2.loginInProgress = false, G2.didAnalyticsPingStart() || G2.isAnalyticsDisabled || !G2.appSettings.shouldAutoEstablishSocketConnection() || (G2.pingAnalytics(), G2.startAnalyticsPingTimer()), G2.isLoggedOut = false, (G2.appSettings.shouldAutoEstablishSocketConnection() || G2.internalRestart) && G2.shouldConnectToWS && G2.WSLogin(new C.Me(e5));
                        }
                      }, function(e5) {
                        return G2.internalRestart || G2.pushToLoginListener(e5, "Login_Failure"), G2.loginInProgress = false, G2.isLoggedOut = true, a2(e5);
                      });
                  });
                });
              } catch (e3) {
                t2 = new K.CometChatException(e3);
                return G2.internalRestart || G2.pushToLoginListener(t2, "Login_Failure"), G2.loginInProgress = false, G2.isLoggedOut = true, a2(t2);
              }
            });
          }, G2.sendMessage = function(a2) {
            var e2 = this;
            return new Promise(function(r2, i2) {
              return E(e2, void 0, void 0, function() {
                var t2, n2, o2, s2 = this;
                return c(this, function(e3) {
                  try {
                    return a2 instanceof _.TextMessage || a2 instanceof S.MediaMessage || a2 instanceof L.CustomMessage || a2 instanceof Z.InteractiveMessage || (a2 = a2[b.MessageConstatnts.KEYS.ATTATCHMENT] ? (t2 = b.MessageConstatnts.TYPE.FILE, w.isImage(a2[b.MessageConstatnts.KEYS.ATTATCHMENT]) ? t2 = b.MessageConstatnts.TYPE.IMAGE : w.isAudio(a2[b.MessageConstatnts.KEYS.ATTATCHMENT]) ? t2 = b.MessageConstatnts.TYPE.AUDIO : w.isVideo(a2[b.MessageConstatnts.KEYS.ATTATCHMENT]) && (t2 = b.MessageConstatnts.TYPE.VIDEO), new S.MediaMessage(a2[b.MessageConstatnts.KEYS.RECEIVER_ID], a2[b.MessageConstatnts.KEYS.ATTATCHMENT], t2, a2[b.MessageConstatnts.KEYS.RECEIVER_TYPE])) : new _.TextMessage(a2[b.MessageConstatnts.KEYS.RECEIVER_ID], a2[b.MessageConstatnts.KEYS.TEXT], a2[b.MessageConstatnts.KEYS.RECEIVER_TYPE])), (n2 = w.validateMessage(a2)) instanceof K.CometChatException ? (i2(n2), [2]) : (a2.receiver = a2.receiverId, delete a2.receiverId, o2 = a2.parentMessageId, [2, T.makeApiCall(o2 ? "sendMessageInThread" : "sendMessage", o2 ? { parentId: o2 } : {}, a2, a2 instanceof S.MediaMessage).then(function(n3) {
                      return E(s2, void 0, void 0, function() {
                        var t3;
                        return c(this, function(e4) {
                          return t3 = g.MessageController.trasformJSONMessge(n3.data), M.MessageListnerMaping.getInstance().set("all", parseInt(t3.id)), r2(t3), [2];
                        });
                      });
                    }, function(e4) {
                      i2(new K.CometChatException(e4.error));
                    })]);
                  } catch (e4) {
                    i2(new K.CometChatException(e4));
                  }
                  return [2];
                });
              });
            });
          }, G2.sendDirectMessage = function(e2) {
            try {
              return Object.assign(e2, { receiverType: b.MessageConstatnts.RECEIVER_TYPE.USER }), this.sendMessage(e2);
            } catch (e3) {
              w.Logger.error("CometChat: sendDirectMessage", e3);
            }
          }, G2.sendGroupMessage = function(e2) {
            try {
              return Object.assign(e2, { receiverType: b.MessageConstatnts.RECEIVER_TYPE.GROUP }), this.sendMessage(e2);
            } catch (e3) {
              w.Logger.error("CometChat: sendGroupMessage", e3);
            }
          }, G2.sendMediaMessage = function(e2) {
            try {
              return this.sendMessage(e2);
            } catch (e3) {
              w.Logger.error("CometChat: sendMediaMessage", e3);
            }
          }, G2.sendCustomMessage = function(e2) {
            try {
              return this.sendMessage(e2);
            } catch (e3) {
              w.Logger.error("CometChat: sendCustomMessage", e3);
            }
          }, G2.sendInteractiveMessage = function(e2) {
            try {
              return this.sendMessage(e2);
            } catch (e3) {
              w.Logger.error("CometChat: sendInteractiveMessage", e3);
            }
          }, G2.getLastDeliveredMessageId = function() {
            return E(this, void 0, void 0, function() {
              var t2;
              return c(this, function(e2) {
                switch (e2.label) {
                  case 0:
                    return e2.trys.push([0, 2, , 3]), [4, M.MessageListnerMaping.getInstance().get(b.LOCAL_STORE.KEY_MESSAGE_LISTENER_LIST)];
                  case 1:
                    return [2, e2.sent()];
                  case 2:
                    return t2 = e2.sent(), w.Logger.error("CometChat: getLastDeliveredMessageId", t2), [3, 3];
                  case 3:
                    return [2];
                }
              });
            });
          }, G2.startTyping = function(e2) {
            try {
              if (w.isFalsy(e2))
                return;
              var t2 = void 0, n2 = this.RECEIVER_TYPE.USER, o2 = {};
              if (e2 instanceof v.TypingIndicator)
                t2 = e2.getReceiverId(), n2 = e2.getReceiverType(), o2 = e2.getMetadata();
              else {
                if (!e2.hasOwnProperty(b.TYPING_NOTIFICATION.RECEIVER_ID))
                  return;
                t2 = e2[b.TYPING_NOTIFICATION.RECEIVER_ID], e2.hasOwnProperty(b.TYPING_NOTIFICATION.RECEIVER_TYPE) && (n2 = e2[b.TYPING_NOTIFICATION.RECEIVER_TYPE]), e2.hasOwnProperty(b.TYPING_NOTIFICATION.META) && (o2 = e2[b.TYPING_NOTIFICATION.META]);
              }
              if (w.isFalsy(t2))
                return;
              if (null == P.TypingNotificationController.getTypingStartedMap(t2)) {
                var s2 = G2.getMode();
                return w.isFalsy(s2) || s2 && s2 !== b.APP_SETTINGS.KEYS.NO_TRANSIENT && s2 !== b.APP_SETTINGS.KEYS.LIMITED_TRANSIENT ? (re.startTypingIndicator(t2, n2, o2), P.TypingNotificationController.addTypingStarted(t2), void P.TypingNotificationController.removeTypingEnded(t2)) : void 0;
              }
            } catch (e3) {
              w.Logger.error("CometChat: startTyping", e3);
            }
          }, G2.endTyping = function(e2) {
            try {
              if (w.isFalsy(e2))
                return;
              var t2 = void 0, n2 = this.RECEIVER_TYPE.USER, o2 = {};
              if (e2 instanceof v.TypingIndicator)
                t2 = e2.getReceiverId(), n2 = e2.getReceiverType(), o2 = e2.getMetadata();
              else {
                if (!e2.hasOwnProperty(b.TYPING_NOTIFICATION.RECEIVER_ID))
                  return;
                t2 = e2[b.TYPING_NOTIFICATION.RECEIVER_ID], e2.hasOwnProperty(b.TYPING_NOTIFICATION.RECEIVER_TYPE) && (n2 = e2[b.TYPING_NOTIFICATION.RECEIVER_TYPE]), n2 = n2 == this.RECEIVER_TYPE.USER ? b.WS.CONVERSATION.TYPE.CHAT : b.WS.CONVERSATION.TYPE.GROUP_CHAT, e2.hasOwnProperty(b.TYPING_NOTIFICATION.META) && (o2 = e2[b.TYPING_NOTIFICATION.META]);
              }
              if (w.isFalsy(t2))
                return;
              if (null == P.TypingNotificationController.getTypingEndedMap(t2)) {
                var s2 = G2.getMode();
                return w.isFalsy(s2) || s2 && s2 !== b.APP_SETTINGS.KEYS.NO_TRANSIENT && s2 !== b.APP_SETTINGS.KEYS.LIMITED_TRANSIENT ? (re.pauseTypingIndicator(t2, n2, o2), P.TypingNotificationController.addTypingEnded(t2), void P.TypingNotificationController.removeTypingStarted(t2)) : void 0;
              }
            } catch (e3) {
              w.Logger.error("CometChat: endTyping", e3);
            }
          }, G2.markAsRead = function() {
            for (var E2 = [], e2 = 0; e2 < arguments.length; e2++)
              E2[e2] = arguments[e2];
            return new Promise(function(e3, t2) {
              try {
                var n2 = void 0, o2 = void 0, s2 = void 0, r2 = void 0;
                if (3 === E2.length)
                  return t2(new K.CometChatException(b.ReceiptErrors.MISSING_PARAMETERS));
                if (4 === E2.length) {
                  if (w.isFalsy(E2[0]) || "string" != typeof E2[0])
                    return t2(new K.CometChatException(JSON.parse(w.format(JSON.stringify(b.ReceiptErrors.INVALID_PARAMETER), "MESSAGE_ID", "MESSAGE_ID", "Message ID should be a string."))));
                  if (n2 = E2[0], w.isFalsy(E2[1]) || "string" != typeof E2[1])
                    return t2(new K.CometChatException(JSON.parse(w.format(JSON.stringify(b.ReceiptErrors.INVALID_PARAMETER), "RECEIVER_ID", "RECEIVER_ID", "Receiver ID should be a string."))));
                  if (o2 = E2[1], w.isFalsy(E2[2]) || "string" != typeof E2[2])
                    return t2(new K.CometChatException(JSON.parse(w.format(JSON.stringify(b.ReceiptErrors.INVALID_PARAMETER), "RECEIVER_TYPE", "RECEIVER_TYPE", "Receiver type should be a string."))));
                  if (s2 = E2[2], w.isFalsy(E2[3]) || "string" != typeof E2[3])
                    return t2(new K.CometChatException(JSON.parse(w.format(JSON.stringify(b.ReceiptErrors.INVALID_PARAMETER), "SENDER_ID", "SENDER_ID", "Sender ID should be a string."))));
                  r2 = E2[3];
                } else {
                  if (1 !== E2.length)
                    return t2(new K.CometChatException(JSON.parse(w.format(JSON.stringify(b.ReceiptErrors.INVALID_PARAMETER), "ARGUMENTS", "ARGUMENTS", "markAsRead() expects either 1 or 4 arguments."))));
                  if (w.isFalsy(E2[0]) || !(E2[0] instanceof p.BaseMessage))
                    return t2(new K.CometChatException(JSON.parse(w.format(JSON.stringify(b.ReceiptErrors.INVALID_PARAMETER), "MESSAGE", "MESSAGE", "Invalid message object received."))));
                  var i2 = E2[0];
                  n2 = i2.getId().toString(), o2 = (s2 = i2.getReceiverType()) === b.MessageConstatnts.RECEIVER_TYPE.USER ? i2.getSender().getUid() === G2.user.getUid() ? i2.getReceiverId() : i2.getSender().getUid() : i2.getReceiverId(), r2 = i2.getSender().getUid();
                }
                var a2 = G2.getMode();
                return w.isFalsy(a2) || a2 && a2 !== b.APP_SETTINGS.KEYS.NO_TRANSIENT && a2 !== b.APP_SETTINGS.KEYS.LIMITED_TRANSIENT ? G2.getConnectionStatus() === b.CONNECTION_STATUS.CONNECTED ? (re.markAsRead(o2, s2, n2, r2), e3()) : t2(new K.CometChatException(b.ReceiptErrors.NO_WEBSOCKET_CONNECTION)) : t2(new K.CometChatException(b.ReceiptErrors.RECEIPTS_TEMPORARILY_BLOCKED));
              } catch (e4) {
                return w.Logger.error("CometChat: markAsRead", e4), t2(new K.CometChatException(b.ReceiptErrors.UNKNOWN_ERROR_OCCURRED));
              }
            });
          }, G2.markAsDelivered = function() {
            for (var E2 = [], e2 = 0; e2 < arguments.length; e2++)
              E2[e2] = arguments[e2];
            return new Promise(function(e3, t2) {
              try {
                var n2 = void 0, o2 = void 0, s2 = void 0, r2 = void 0;
                if (3 === E2.length)
                  return t2(new K.CometChatException(b.ReceiptErrors.MISSING_PARAMETERS));
                if (4 === E2.length) {
                  if (w.isFalsy(E2[0]) || "string" != typeof E2[0])
                    return t2(new K.CometChatException(JSON.parse(w.format(JSON.stringify(b.ReceiptErrors.INVALID_PARAMETER), "MESSAGE_ID", "MESSAGE_ID", "Message ID should be a string."))));
                  if (n2 = E2[0], w.isFalsy(E2[1]) || "string" != typeof E2[1])
                    return t2(new K.CometChatException(JSON.parse(w.format(JSON.stringify(b.ReceiptErrors.INVALID_PARAMETER), "RECEIVER_ID", "RECEIVER_ID", "Receiver ID should be a string."))));
                  if (o2 = E2[1], w.isFalsy(E2[2]) || "string" != typeof E2[2])
                    return t2(new K.CometChatException(JSON.parse(w.format(JSON.stringify(b.ReceiptErrors.INVALID_PARAMETER), "RECEIVER_TYPE", "RECEIVER_TYPE", "Receiver type should be a string."))));
                  if (s2 = E2[2], w.isFalsy(E2[3]) || "string" != typeof E2[3])
                    return t2(new K.CometChatException(JSON.parse(w.format(JSON.stringify(b.ReceiptErrors.INVALID_PARAMETER), "SENDER_ID", "SENDER_ID", "Sender ID should be a string."))));
                  r2 = E2[3];
                } else {
                  if (1 !== E2.length)
                    return t2(new K.CometChatException(JSON.parse(w.format(JSON.stringify(b.ReceiptErrors.INVALID_PARAMETER), "ARGUMENTS", "ARGUMENTS", "markAsDelivered() expects either 1 or 4 arguments."))));
                  if (w.isFalsy(E2[0]) || !(E2[0] instanceof p.BaseMessage))
                    return t2(new K.CometChatException(JSON.parse(w.format(JSON.stringify(b.ReceiptErrors.INVALID_PARAMETER), "MESSAGE", "MESSAGE", "Invalid message object received."))));
                  var i2 = E2[0];
                  n2 = i2.getId().toString(), o2 = (s2 = i2.getReceiverType()) === b.MessageConstatnts.RECEIVER_TYPE.USER ? i2.getSender().getUid() === G2.user.getUid() ? i2.getReceiverId() : i2.getSender().getUid() : i2.getReceiverId(), r2 = i2.getSender().getUid();
                }
                var a2 = G2.getMode();
                return w.isFalsy(a2) || a2 && a2 !== b.APP_SETTINGS.KEYS.NO_TRANSIENT && a2 !== b.APP_SETTINGS.KEYS.LIMITED_TRANSIENT ? G2.getConnectionStatus() === b.CONNECTION_STATUS.CONNECTED ? (re.markAsDelivered(o2, s2, n2, r2), e3()) : t2(new K.CometChatException(b.ReceiptErrors.NO_WEBSOCKET_CONNECTION)) : t2(new K.CometChatException(b.ReceiptErrors.RECEIPTS_TEMPORARILY_BLOCKED));
              } catch (e4) {
                return w.Logger.error("CometChat: markAsDelivered", e4), t2(new K.CometChatException(b.ReceiptErrors.UNKNOWN_ERROR_OCCURRED));
              }
            });
          }, G2.markAsUnread = function(r2) {
            return new Promise(function(t2, n2) {
              try {
                var e2 = void 0;
                if (w.isFalsy(r2) || !(r2 instanceof p.BaseMessage))
                  return n2(new K.CometChatException(JSON.parse(w.format(JSON.stringify(b.ReceiptErrors.INVALID_PARAMETER), "MESSAGE", "MESSAGE", "Invalid message object received."))));
                e2 = r2.getId().toString();
                var o2 = {}, s2 = "";
                r2.getReceiverType() === b.MessageConstatnts.RECEIVER_TYPE.GROUP ? (s2 = "markGroupMessagesAsUnread", o2.guid = r2.getReceiverId()) : (s2 = "markUserMessagesAsUnread", o2.uid = r2.getReceiverId()), T.makeApiCall(s2, o2, { messageId: e2 }).then(function(e3) {
                  return t2("Messages marked as unread successfully.");
                }, function(e3) {
                  return n2(new K.CometChatException(e3.error));
                });
              } catch (e3) {
                return w.Logger.error("CometChat: markAsUnread", e3), n2(new K.CometChatException(e3));
              }
            });
          }, G2.sendTransientMessage = function(e2) {
            try {
              if (w.isFalsy(e2))
                return;
              var t2 = void 0, n2 = void 0, o2 = {};
              if (!(e2 instanceof z.TransientMessage))
                return;
              if (t2 = e2.getReceiverId(), n2 = e2.getReceiverType(), o2 = e2.getData(), w.isFalsy(t2) || w.isFalsy(n2))
                return;
              var s2 = G2.getMode();
              return w.isFalsy(s2) || s2 && s2 !== b.APP_SETTINGS.KEYS.NO_TRANSIENT ? void re.sendTransientMessage(t2, n2, o2) : void 0;
            } catch (e3) {
              w.Logger.error("CometChat: sendTransientMessage", e3);
            }
          }, G2.sendTestMessage = function(o2) {
            return E(this, void 0, void 0, function() {
              var t2, n2;
              return c(this, function(e2) {
                switch (e2.label) {
                  case 0:
                    return e2.trys.push([0, 3, , 4]), (t2 = o2) instanceof p.BaseMessage ? [3, 2] : [4, F.CometChatHelper.processMessage(o2)];
                  case 1:
                    t2 = e2.sent(), e2.label = 2;
                  case 2:
                    return t2 instanceof _.TextMessage && W.WSConnectionHelper.getInstance().publishMessage(t2), [3, 4];
                  case 3:
                    return n2 = e2.sent(), w.Logger.error("CometChat: sendTestMessage", n2), [3, 4];
                  case 4:
                    return [2];
                }
              });
            });
          }, G2.getMessageDetails = function(e2) {
            return new Promise(function(t2, n2) {
              try {
                w.isFalsy(e2) ? n2(new K.CometChatException(R.ERRORS.PARAMETER_MISSING)) : T.makeApiCall("getMessageDetails", { messageId: e2 }).then(function(e3) {
                  t2(g.MessageController.trasformJSONMessge(e3.data));
                }, function(e3) {
                  w.Logger.error("CometChat:GetMessageDetails:", e3), n2(new K.CometChatException(e3.error));
                });
              } catch (e3) {
                n2(new K.CometChatException(e3));
              }
            });
          }, G2.getMessageReceipts = function(o2) {
            return new Promise(function(t2, n2) {
              try {
                var e2 = w.validateMsgId(o2);
                if (e2 instanceof K.CometChatException)
                  return void n2(e2);
                w.isFalsy(o2) ? n2(new K.CometChatException(R.ERRORS.PARAMETER_MISSING)) : T.makeApiCall("getMessageDetails", { messageId: o2 }).then(function(e3) {
                  g.MessageController.getReceiptsFromJSON(e3.data).then(function(e4) {
                    t2(e4);
                  }, function(e4) {
                    n2(new K.CometChatException(e4));
                  });
                }, function(e3) {
                  w.Logger.error("CometChat:GetMessageDetails:", e3), n2(new K.CometChatException(e3.error));
                });
              } catch (e3) {
                n2(new K.CometChatException(e3));
              }
            });
          }, G2.getUnreadMessageCount = function(n2) {
            void 0 === n2 && (n2 = false);
            var s2 = 0;
            return new Promise(function(o2, t2) {
              try {
                var e2 = w.validateHideMessagesFromBlockedUsers(n2);
                if (e2 instanceof K.CometChatException)
                  return void t2(e2);
                n2 && (s2 = 1), T.makeApiCall("getMessages", {}, { unread: 1, count: 1, hideMessagesFromBlockedUsers: s2 }).then(function(e3) {
                  var t3 = {}, n3 = {};
                  e3.data.map(function(e4) {
                    e4[b.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.ENTITY_TYPE] == b.MessageConstatnts.RECEIVER_TYPE.GROUP ? n3[e4[b.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.ENTITY_Id]] = e4[b.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.COUNT] : t3[e4[b.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.ENTITY_Id]] = e4[b.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.COUNT];
                  }), o2({ users: t3, groups: n3 });
                }, function(e3) {
                  t2(new K.CometChatException(e3.error));
                });
              } catch (e3) {
                t2(new K.CometChatException(e3));
              }
            });
          }, G2.getUnreadMessageCountForAllUsers = function(o2) {
            void 0 === o2 && (o2 = false);
            var s2 = 0;
            return new Promise(function(n2, t2) {
              try {
                var e2 = w.validateHideMessagesFromBlockedUsers(o2);
                if (e2 instanceof K.CometChatException)
                  return void t2(e2);
                o2 && (s2 = 1), T.makeApiCall("getMessages", {}, { hideMessagesFromBlockedUsers: s2, receiverType: b.MessageConstatnts.RECEIVER_TYPE.USER, unread: 1, count: 1 }).then(function(e3) {
                  var t3 = {};
                  e3.data.map(function(e4) {
                    t3[e4[b.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.ENTITY_Id]] = e4[b.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.COUNT];
                  }), n2(l({}, t3));
                }, function(e3) {
                  t2(new K.CometChatException(e3.error));
                });
              } catch (e3) {
                t2(new K.CometChatException(e3));
              }
            });
          }, G2.getUnreadMessageCountForAllGroups = function(o2) {
            void 0 === o2 && (o2 = false);
            var s2 = 0;
            return new Promise(function(n2, t2) {
              try {
                var e2 = w.validateHideMessagesFromBlockedUsers(o2);
                if (e2 instanceof K.CometChatException)
                  return void t2(e2);
                o2 && (s2 = 1), T.makeApiCall("getMessages", {}, { hideMessagesFromBlockedUsers: s2, receiverType: b.MessageConstatnts.RECEIVER_TYPE.GROUP, unread: 1, count: 1 }).then(function(e3) {
                  var t3 = {};
                  e3.data.map(function(e4) {
                    e4[b.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.ENTITY_TYPE] == b.MessageConstatnts.RECEIVER_TYPE.GROUP && (t3[e4[b.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.ENTITY_Id]] = e4[b.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.COUNT]);
                  }), n2(l({}, t3));
                }, function(e3) {
                  t2(new K.CometChatException(e3.error));
                });
              } catch (e3) {
                t2(new K.CometChatException(e3));
              }
            });
          }, G2.getUnreadMessageCountForUser = function(s2, r2) {
            void 0 === r2 && (r2 = false);
            var i2 = 0;
            return new Promise(function(n2, t2) {
              try {
                var e2 = w.validateId(s2, "user");
                if (e2 instanceof K.CometChatException)
                  return void t2(e2);
                var o2 = w.validateHideMessagesFromBlockedUsers(r2);
                if (o2 instanceof K.CometChatException)
                  return void t2(o2);
                r2 && (i2 = 1), T.makeApiCall("getUserMessages", { listId: s2 }, { hideMessagesFromBlockedUsers: i2, unread: 1, count: 1, uid: s2 }).then(function(e3) {
                  var t3 = {};
                  e3.data.map(function(e4) {
                    t3[e4[b.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.ENTITY_Id]] = e4[b.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.COUNT];
                  }), n2(l({}, t3));
                }, function(e3) {
                  t2(new K.CometChatException(e3.error));
                });
              } catch (e3) {
                t2(new K.CometChatException(e3));
              }
            });
          }, G2.getUnreadMessageCountForGroup = function(s2, r2) {
            void 0 === r2 && (r2 = false);
            var i2 = 0;
            return new Promise(function(n2, t2) {
              try {
                var e2 = w.validateId(s2, "group");
                if (e2 instanceof K.CometChatException)
                  return void t2(e2);
                var o2 = w.validateHideMessagesFromBlockedUsers(r2);
                if (o2 instanceof K.CometChatException)
                  return void t2(o2);
                r2 && (i2 = 1), T.makeApiCall("getGroupMessages", { listId: s2 }, { hideMessagesFromBlockedUsers: i2, unread: 1, count: 1, guid: s2 }).then(function(e3) {
                  var t3 = {};
                  e3.data.map(function(e4) {
                    e4[b.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.ENTITY_TYPE] == b.MessageConstatnts.RECEIVER_TYPE.GROUP && (t3[e4[b.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.ENTITY_Id]] = e4[b.ResponseConstants.RESPONSE_KEYS.UNREAD_UNDELIVERED_KEYS.COUNT]);
                  }), n2(l({}, t3));
                }, function(e3) {
                  t2(new K.CometChatException(e3.error));
                });
              } catch (e3) {
                t2(new K.CometChatException(e3));
              }
            });
          }, G2.addReaction = function(o2, s2) {
            return new Promise(function(n2, t2) {
              try {
                var e2 = w.validateMsgId(o2);
                if (e2 instanceof K.CometChatException)
                  return void t2(e2);
                w.isFalsy(o2) || w.isFalsy(s2) ? t2(new K.CometChatException(R.ERRORS.PARAMETER_MISSING)) : T.makeApiCall("addReaction", { messageId: o2, reaction: encodeURIComponent(s2) }).then(function(e3) {
                  var t3 = g.MessageController.trasformJSONMessge(e3.data);
                  n2(t3);
                }, function(e3) {
                  w.Logger.error("CometChat:addReaction:", e3), t2(new K.CometChatException(e3.error));
                });
              } catch (e3) {
                t2(new K.CometChatException(e3));
              }
            });
          }, G2.removeReaction = function(o2, s2) {
            return new Promise(function(n2, t2) {
              try {
                var e2 = w.validateMsgId(o2);
                if (e2 instanceof K.CometChatException)
                  return void t2(e2);
                w.isFalsy(o2) || w.isFalsy(s2) ? t2(new K.CometChatException(R.ERRORS.PARAMETER_MISSING)) : T.makeApiCall("removeReaction", { messageId: o2, reaction: encodeURIComponent(s2) }).then(function(e3) {
                  var t3 = g.MessageController.trasformJSONMessge(e3.data);
                  n2(t3);
                }, function(e3) {
                  w.Logger.error("CometChat:removeReaction:", e3), t2(new K.CometChatException(e3.error));
                });
              } catch (e3) {
                t2(new K.CometChatException(e3));
              }
            });
          }, G2.editMessage = function(o2) {
            return new Promise(function(t2, n2) {
              try {
                var e2 = w.validateMsgId(o2.getId());
                if (e2 instanceof K.CometChatException)
                  return void n2(e2);
                T.makeApiCall("updateMessage", { messageId: o2.getId() }, o2).then(function(e3) {
                  t2(g.MessageController.trasformJSONMessge(e3.data).getActionOn());
                }, function(e3) {
                  n2(new K.CometChatException(e3.error));
                });
              } catch (e3) {
                n2(new K.CometChatException(e3));
              }
            });
          }, G2.deleteMessage = function(o2) {
            return new Promise(function(t2, n2) {
              try {
                var e2 = w.validateMsgId(o2);
                if (e2 instanceof K.CometChatException)
                  return void n2(e2);
                T.makeApiCall("deleteMessage", { messageId: o2 }, { id: o2 }).then(function(e3) {
                  t2(g.MessageController.trasformJSONMessge(e3.data).getActionOn());
                }, function(e3) {
                  n2(new K.CometChatException(e3.error));
                });
              } catch (e3) {
                n2(new K.CometChatException(e3));
              }
            });
          }, G2.getOnlineUserCount = function() {
            return new Promise(function(o2, s2) {
              try {
                w.getAppSettings().then(function(e2) {
                  var t2 = w.format(new u.EndpointFactory().wsApi, w.getChatHost(e2), w.format(b.ONLINE_MEMBER_COUNT_API.ENDPOINTS.GET_ONLINE_MEMBER_COUNT, e2[b.APP_SETTINGS.KEYS.WS_API_VERSION])), n2 = { appId: G2.appId, Authorization: G2.jwt, Accept: "application/json", "Content-Type": "application/json" };
                  T.postData(t2, "POST", {}, n2, false).then(function(e3) {
                    return e3.json();
                  }).then(function(e3) {
                    return e3.hasOwnProperty(b.ResponseConstants.RESPONSE_KEYS.KEY_DATA) ? o2(e3[b.ResponseConstants.RESPONSE_KEYS.KEY_DATA][b.ONLINE_MEMBER_COUNT_API.RESPONSE.ONLINE_USERS_COUNT]) : s2(new K.CometChatException(e3.error));
                  }).catch(function() {
                    var e3 = { error: R.FETCH_ERROR.ERROR_IN_API_CALL };
                    return s2(e3);
                  });
                }, function(e2) {
                  return s2(new K.CometChatException(e2));
                });
              } catch (e2) {
                return s2(new K.CometChatException(e2));
              }
            });
          }, G2.getOnlineGroupMemberCount = function(i2) {
            return new Promise(function(s2, r2) {
              try {
                if (!i2 || 0 == i2.length)
                  return r2(new K.CometChatException(b.ONLINE_MEMBER_COUNT_API.ERRORS.INVALID_GROUPLIST));
                w.getAppSettings().then(function(e2) {
                  var t2 = w.format(new u.EndpointFactory().wsApi, w.getChatHost(e2), w.format(b.ONLINE_MEMBER_COUNT_API.ENDPOINTS.GET_ONLINE_MEMBER_COUNT, e2[b.APP_SETTINGS.KEYS.WS_API_VERSION])), n2 = { groups: i2 }, o2 = { appId: G2.appId, Authorization: G2.jwt, Accept: "application/json", "Content-Type": "application/json" };
                  T.postData(t2, "POST", n2, o2, false).then(function(e3) {
                    return e3.json();
                  }).then(function(e3) {
                    return e3.hasOwnProperty(b.ResponseConstants.RESPONSE_KEYS.KEY_DATA) ? s2(e3[b.ResponseConstants.RESPONSE_KEYS.KEY_DATA][b.ONLINE_MEMBER_COUNT_API.RESPONSE.GROUPS]) : r2(new K.CometChatException(e3.error));
                  }).catch(function() {
                    var e3 = { error: R.FETCH_ERROR.ERROR_IN_API_CALL };
                    return r2(e3);
                  });
                }, function(e2) {
                  return r2(new K.CometChatException(e2));
                });
              } catch (e2) {
                return r2(new K.CometChatException(e2));
              }
            });
          }, G2.createUser = function(s2, r2) {
            return new Promise(function(n2, t2) {
              try {
                if (w.isFalsy(r2))
                  return void t2(new K.CometChatException(JSON.parse(w.format(JSON.stringify(b.GENERAL_ERROR.INVALID), "AUTH_KEY", "AUTH_KEY", "AUTH_KEY", "AUTH_KEY"))));
                G2.apiKey = r2;
                var e2 = w.validateCreateUser(s2);
                if (e2 instanceof K.CometChatException)
                  return void t2(e2);
                if (!(s2 instanceof C.User)) {
                  var o2 = void 0;
                  if (!s2.hasOwnProperty(b.UserConstants.UID))
                    return void t2(new K.CometChatException(R.ERRORS.PARAMETER_MISSING));
                  if (!s2.hasOwnProperty(b.UserConstants.NAME))
                    return void t2(new K.CometChatException(R.ERRORS.PARAMETER_MISSING));
                  o2 = new C.User(s2[b.UserConstants.UID], s2[b.UserConstants.NAME]), s2.hasOwnProperty(b.UserConstants.AVATAR) && o2.setAvatar(s2[b.UserConstants.AVATAR]), s2.hasOwnProperty(b.UserConstants.ROLE) && o2.setRole(s2[b.UserConstants.ROLE]), s2.hasOwnProperty(b.UserConstants.META_DATA) && o2.setMetadata(s2[b.UserConstants.META_DATA]), s2.hasOwnProperty(b.UserConstants.LINK) && o2.setLink(s2[b.UserConstants.LINK]), s2.hasOwnProperty(b.UserConstants.STATUS_MESSAGE) && o2.setStatusMessage(s2[b.UserConstants.STATUS_MESSAGE]), s2.hasOwnProperty(b.UserConstants.TAGS) && o2.setTags(s2[b.UserConstants.TAGS]), s2 = o2;
                }
                T.makeApiCall("createUser", {}, s2).then(function(e3) {
                  var t3 = h.UsersController.trasformJSONUser(e3.data);
                  n2(t3);
                }, function(e3) {
                  t2(new K.CometChatException(e3.error));
                });
              } catch (e3) {
                t2(new K.CometChatException(e3));
              }
            });
          }, G2.updateUser = function(o2, i2) {
            var a2 = this;
            return new Promise(function(s2, t2) {
              try {
                if (w.isFalsy(i2))
                  return void t2(new K.CometChatException(JSON.parse(w.format(JSON.stringify(b.GENERAL_ERROR.INVALID), "AUTH_KEY", "AUTH_KEY", "AUTH_KEY", "AUTH_KEY"))));
                G2.apiKey = i2;
                var e2 = w.validateUpdateUser(o2);
                if (e2 instanceof K.CometChatException)
                  return void t2(e2);
                if (!(o2 instanceof C.User)) {
                  var n2 = void 0;
                  if (!o2.hasOwnProperty(b.UserConstants.UID))
                    return void t2(new K.CometChatException(R.ERRORS.PARAMETER_MISSING));
                  n2 = new C.User(o2[b.UserConstants.UID]), o2.hasOwnProperty(b.UserConstants.NAME) && n2.setName(o2[b.UserConstants.NAME]), o2.hasOwnProperty(b.UserConstants.AVATAR) && n2.setAvatar(o2[b.UserConstants.AVATAR]), o2.hasOwnProperty(b.UserConstants.ROLE) && n2.setRole(o2[b.UserConstants.ROLE]), o2.hasOwnProperty(b.UserConstants.META_DATA) && n2.setMetadata(o2[b.UserConstants.META_DATA]), o2.hasOwnProperty(b.UserConstants.LINK) && n2.setLink(o2[b.UserConstants.LINK]), o2.hasOwnProperty(b.UserConstants.STATUS_MESSAGE) && n2.setStatusMessage(o2[b.UserConstants.STATUS_MESSAGE]), o2.hasOwnProperty(b.UserConstants.TAGS) && n2.setTags(o2[b.UserConstants.TAGS]), o2 = n2;
                }
                var r2 = o2.uid;
                T.makeApiCall("updateUser", { uid: r2 }, o2).then(function(o3) {
                  if (a2.user && r2.toLocaleLowerCase() === a2.user.getUid().toLocaleLowerCase())
                    d.LocalStorage.getInstance().get("user").then(function(e4) {
                      if (e4) {
                        var t3 = h.UsersController.trasformJSONUser(o3.data), n3 = o3.data;
                        n3.wsChannel = e4.wsChannel, n3.authToken = G2.authToken, n3.status = b.PresenceConstatnts.STATUS.ONLINE, e4.jwt && (n3.jwt = e4.jwt), G2.user = new C.Me(n3), a2.localStorage.set("user", G2.user), s2(t3);
                      }
                    });
                  else {
                    var e3 = h.UsersController.trasformJSONUser(o3.data);
                    s2(e3);
                  }
                }, function(e3) {
                  t2(new K.CometChatException(e3.error));
                });
              } catch (e3) {
                t2(new K.CometChatException(e3));
              }
            });
          }, G2.updateCurrentUserDetails = function(s2) {
            var r2 = this;
            return new Promise(function(o2, t2) {
              try {
                s2.uid = r2.user.uid;
                var e2 = w.validateUpdateUser(s2);
                if (e2 instanceof K.CometChatException)
                  return void t2(e2);
                if (!(s2 instanceof C.User)) {
                  var n2 = void 0;
                  s2.hasOwnProperty(b.UserConstants.UID) && (n2 = new C.User(s2[b.UserConstants.UID])), s2.hasOwnProperty(b.UserConstants.NAME) && n2.setName(s2[b.UserConstants.NAME]), s2.hasOwnProperty(b.UserConstants.AVATAR) && n2.setAvatar(s2[b.UserConstants.AVATAR]), s2.hasOwnProperty(b.UserConstants.ROLE) && n2.setRole(s2[b.UserConstants.ROLE]), s2.hasOwnProperty(b.UserConstants.META_DATA) && n2.setMetadata(s2[b.UserConstants.META_DATA]), s2.hasOwnProperty(b.UserConstants.LINK) && n2.setLink(s2[b.UserConstants.LINK]), s2.hasOwnProperty(b.UserConstants.STATUS_MESSAGE) && n2.setStatusMessage(s2[b.UserConstants.STATUS_MESSAGE]), s2.hasOwnProperty(b.UserConstants.TAGS) && n2.setTags(s2[b.UserConstants.TAGS]), s2 = n2;
                }
                T.makeApiCall("updateMyDetails", {}, s2).then(function(e3) {
                  var t3 = h.UsersController.trasformJSONUser(e3.data), n3 = G2.user = new C.Me(e3.data);
                  n3.setStatus(b.PresenceConstatnts.STATUS.ONLINE), G2.localStorage.set("user", n3), o2(t3);
                }, function(e3) {
                  t2(new K.CometChatException(e3.error));
                });
              } catch (e3) {
                t2(new K.CometChatException(e3));
              }
            });
          }, G2.getUser = function(o2) {
            return new Promise(function(n2, t2) {
              try {
                "object" == typeof o2 && o2.hasOwnProperty("uid") && (o2 = o2.uid);
                var e2 = w.validateId(o2, "user");
                if (e2 instanceof K.CometChatException)
                  return void t2(e2);
                T.makeApiCall("user", { uid: o2 }).then(function(e3) {
                  var t3 = h.UsersController.trasformJSONUser(e3.data);
                  n2(t3);
                }).catch(function(e3) {
                  t2(new K.CometChatException(e3.error));
                });
              } catch (e3) {
                t2(new K.CometChatException(e3));
              }
            });
          }, G2.getLoggedInUser = function() {
            var p2 = this;
            return new Promise(function(u2, S2) {
              try {
                G2.localStorage.get(b.LOCAL_STORE.KEY_USER).then(function(e2) {
                  if (e2)
                    G2.user = new C.Me(e2), u2(G2.user);
                  else {
                    var r2 = "", i2 = "", a2 = b.APPINFO.platform, E2 = b.APPINFO.sdkVersion, c2 = b.APPINFO.apiVersion;
                    G2.keyStore.get(b.LOCAL_STORE.KEY_DEVICE_ID).then(function(e3) {
                      if (i2 = e3, navigator && (r2 = navigator.userAgent), null == i2) {
                        var t2 = se(), n2 = (/* @__PURE__ */ new Date()).getTime();
                        i2 = p2.appId + "_" + t2 + "_" + n2, G2.keyStore.set(b.LOCAL_STORE.KEY_DEVICE_ID, i2);
                      }
                      var o2 = { version: E2, apiVersion: c2, userAgent: r2 };
                      w.isFalsy(p2.platform) || (o2.platform = p2.platform), w.isFalsy(p2.language) || (o2.language = p2.language), w.isFalsy(p2.resource) || (o2.resource = p2.resource);
                      var s2 = { platform: a2, deviceId: i2, appInfo: o2 };
                      T.makeApiCall("updateMyDetails", {}, s2, false).then(function(e4) {
                        e4.data.jwt && (G2.jwt = e4.data.jwt);
                        var t3 = e4.data.settings;
                        t3 && (d.LocalStorage.getInstance().set("app_settings", t3), t3[b.APP_SETTINGS.KEYS.MODE] && G2.setMode(t3[b.APP_SETTINGS.KEYS.MODE]), t3[b.APP_SETTINGS.KEYS.SETTINGS_HASH] && (G2.settingsHash = t3[b.APP_SETTINGS.KEYS.SETTINGS_HASH]), t3[b.APP_SETTINGS.KEYS.SETTINGS_HASH_RECEIVED_AT] && (G2.settingsHashReceivedAt = t3[b.APP_SETTINGS.KEYS.SETTINGS_HASH_RECEIVED_AT]), G2.isAnalyticsDisabled = !!t3[b.APP_SETTINGS.KEYS.ANALYTICS_PING_DISABLED], t3[b.APP_SETTINGS.KEYS.SECURED_MEDIA_HOST] && (G2.SECURED_MEDIA_HOST = t3[b.APP_SETTINGS.KEYS.SECURED_MEDIA_HOST])), u2(new C.Me(e4.data));
                      }, function(e4) {
                        S2(new K.CometChatException(e4.error));
                      }).catch(function(e4) {
                        S2(new K.CometChatException(e4));
                      });
                    });
                  }
                });
              } catch (e2) {
                S2(new K.CometChatException(e2));
              }
            });
          }, G2.getLoggedinUser = function() {
            return new Promise(function(t2, n2) {
              try {
                G2.localStorage.get(b.LOCAL_STORE.KEY_USER).then(function(e2) {
                  t2(e2 ? new C.User(e2) : null);
                }, function(e2) {
                  t2(null);
                });
              } catch (e2) {
                n2(new K.CometChatException(e2));
              }
            });
          }, G2.blockUsers = function(o2) {
            return new Promise(function(t2, n2) {
              try {
                var e2 = w.validateArray(o2, "blockUsers");
                if (e2 instanceof K.CometChatException)
                  return void n2(e2);
                w.isFalsy(o2) ? n2(new K.CometChatException(R.USERS_REQUEST_ERRORS.EMPTY_USERS_LIST)) : T.makeApiCall("blockUsers", {}, { blockedUids: o2 }).then(function(e3) {
                  t2(e3.data);
                }, function(e3) {
                  n2(new K.CometChatException(e3.error));
                });
              } catch (e3) {
                n2(new K.CometChatException(e3));
              }
            });
          }, G2.unblockUsers = function(o2) {
            return new Promise(function(t2, n2) {
              try {
                var e2 = w.validateArray(o2, "unblockUsers");
                if (e2 instanceof K.CometChatException)
                  return void n2(e2);
                w.isFalsy(o2) ? n2(new K.CometChatException(R.USERS_REQUEST_ERRORS.EMPTY_USERS_LIST)) : T.makeApiCall("unblockUsers", {}, { blockedUids: o2 }).then(function(e3) {
                  t2(e3.data);
                }, function(e3) {
                  n2(new K.CometChatException(e3.error));
                });
              } catch (e3) {
                n2(new K.CometChatException(e3));
              }
            });
          }, G2.getConversation = function(i2, a2) {
            return new Promise(function(n2, o2) {
              try {
                var e2 = w.validateConversationType(a2);
                if (e2 instanceof K.CometChatException)
                  return void o2(e2);
                var t2 = w.validateId(i2, a2);
                if (t2 instanceof K.CometChatException)
                  return void o2(t2);
                a2 = a2.toLowerCase(), i2 = i2.toLowerCase();
                var s2 = {}, r2 = "";
                a2 === b.MessageConstatnts.RECEIVER_TYPE.GROUP ? (r2 = "getGroupConversation", s2.guid = i2) : (r2 = "getUserConversation", s2.uid = i2), T.makeApiCall(r2, s2).then(function(e3) {
                  if (e3.data) {
                    var t3 = e3.data;
                    n2(V.ConversationController.trasformJSONConversation(t3.conversationId, t3.conversationType, t3.lastMessage, t3.conversationWith, parseInt(t3.unreadMessageCount), t3.tags ? t3.tags : [], t3.unreadMentionsCount, t3.lastReadMessageId));
                  } else
                    o2(new K.CometChatException(JSON.parse(w.format(JSON.stringify(b.ConversationErrors.CONVERSATION_NOT_FOUND), a2, i2))));
                }, function(e3) {
                  o2(new K.CometChatException(e3.error));
                });
              } catch (e3) {
                o2(new K.CometChatException(e3));
              }
            });
          }, G2.tagConversation = function(i2, a2, E2) {
            return void 0 === E2 && (E2 = []), new Promise(function(n2, o2) {
              try {
                var e2 = w.validateConversationType(a2);
                if (e2 instanceof K.CometChatException)
                  return void o2(e2);
                var t2 = w.validateId(i2, a2);
                if (t2 instanceof K.CometChatException)
                  return void o2(t2);
                a2 = a2.toLowerCase(), i2 = i2.toLowerCase();
                var s2 = {}, r2 = "";
                a2 === b.MessageConstatnts.RECEIVER_TYPE.GROUP ? (r2 = "updateGroupConversation", s2.guid = i2) : (r2 = "updateUserConversation", s2.uid = i2), T.makeApiCall(r2, s2, { tags: E2 }).then(function(e3) {
                  if (e3.data) {
                    var t3 = e3.data;
                    n2(V.ConversationController.trasformJSONConversation(t3.conversationId, t3.conversationType, t3.lastMessage, t3.conversationWith, parseInt(t3.unreadMessageCount), t3.tags ? t3.tags : [], t3.unreadMentionsCount, t3.lastReadMessageId));
                  } else
                    o2(new K.CometChatException(JSON.parse(w.format(JSON.stringify(b.ConversationErrors.CONVERSATION_NOT_FOUND), a2, i2))));
                }, function(e3) {
                  o2(new K.CometChatException(e3.error));
                });
              } catch (e3) {
                o2(new K.CometChatException(e3));
              }
            });
          }, G2.deleteConversation = function(i2, a2) {
            return new Promise(function(t2, n2) {
              try {
                var e2 = w.validateConversationType(a2);
                if (e2 instanceof K.CometChatException)
                  return void n2(e2);
                var o2 = w.validateId(i2, a2);
                if (o2 instanceof K.CometChatException)
                  return void n2(o2);
                var s2 = {}, r2 = "";
                a2 = a2.toLowerCase(), i2 = i2.toLowerCase(), a2 === b.MessageConstatnts.RECEIVER_TYPE.GROUP ? (r2 = "deleteGroupConversation", s2.guid = i2) : (r2 = "deleteUserConversation", s2.uid = i2), T.makeApiCall(r2, s2).then(function(e3) {
                  t2("Conversation deleted successfully.");
                }, function(e3) {
                  n2(new K.CometChatException(e3.error));
                });
              } catch (e3) {
                n2(new K.CometChatException(e3));
              }
            });
          }, G2.createGroup = function(s2) {
            return new Promise(function(t2, n2) {
              try {
                var e2 = w.validateCreateGroup(s2);
                if (e2 instanceof K.CometChatException)
                  return void n2(e2);
                if (!(s2 instanceof a.Group)) {
                  var o2 = void 0;
                  if (!s2.hasOwnProperty(b.GroupConstants.KEYS.GUID))
                    return void n2(new K.CometChatException(R.ERRORS.PARAMETER_MISSING));
                  if (!s2.hasOwnProperty(b.GroupConstants.KEYS.NAME))
                    return void n2(new K.CometChatException(R.ERRORS.PARAMETER_MISSING));
                  if (o2 = new a.Group(s2[b.GroupConstants.KEYS.GUID], s2[b.GroupConstants.KEYS.NAME], ""), s2.hasOwnProperty(b.GroupConstants.KEYS.TYPE))
                    if (s2[b.GroupConstants.KEYS.TYPE].toLocaleLowerCase() == b.GroupType.Password) {
                      if (!s2.hasOwnProperty(b.GroupConstants.KEYS.PASSWORD))
                        return void n2(new K.CometChatException(R.GROUP_CREATION_ERRORS.EMPTY_PASSWORD));
                      o2.setType(b.GROUP_TYPE.PASSWORD), o2.setPassword(s2[b.GroupConstants.KEYS.PASSWORD]);
                    } else
                      o2.setType(s2[b.GroupConstants.KEYS.TYPE]);
                  else
                    o2.setType(b.GROUP_TYPE.PUBLIC);
                  s2.hasOwnProperty(b.GroupConstants.KEYS.ICON) && o2.setIcon(s2[b.GroupConstants.KEYS.ICON]), s2.hasOwnProperty(b.GroupConstants.KEYS.DESCRIPTION) && o2.setDescription(s2[b.GroupConstants.KEYS.DESCRIPTION]), s2.hasOwnProperty(b.GroupConstants.KEYS.TAGS) && o2.setTags(s2[b.GroupConstants.KEYS.TAGS]), s2 = o2;
                }
                T.makeApiCall("createGroup", {}, s2).then(function(e3) {
                  A.GroupsController.trasformJSONGroup(e3.data).setHasJoined(true), t2(A.GroupsController.trasformJSONGroup(e3.data));
                }, function(e3) {
                  n2(new K.CometChatException(e3.error));
                });
              } catch (e3) {
                n2(new K.CometChatException(e3));
              }
            });
          }, G2.getGroup = function(o2) {
            return new Promise(function(t2, n2) {
              try {
                "object" == typeof o2 && o2.hasOwnProperty("guid") && (o2 = o2.guid);
                var e2 = w.validateId(o2, "group");
                if (e2 instanceof K.CometChatException)
                  return void n2(e2);
                T.makeApiCall("getGroup", { guid: o2 }).then(function(e3) {
                  t2(A.GroupsController.trasformJSONGroup(e3.data));
                }, function(e3) {
                  n2(new K.CometChatException(e3.error));
                });
              } catch (e3) {
                n2(new K.CometChatException(e3));
              }
            });
          }, G2.joinGroup = function(s2, r2, i2) {
            return void 0 === r2 && (r2 = b.GroupType.Public), void 0 === i2 && (i2 = ""), new Promise(function(n2, t2) {
              try {
                var e2 = w.validateJoinGroup(s2, r2, i2);
                if (e2 instanceof K.CometChatException)
                  return void t2(e2);
                var o2 = void 0;
                "object" == typeof s2 && (s2.hasOwnProperty(b.GroupConstants.KEYS.GUID) ? (s2.hasOwnProperty(b.GroupConstants.KEYS.TYPE) && (r2 = s2[b.GroupConstants.KEYS.TYPE], s2[b.GroupConstants.KEYS.TYPE].toLocaleLowerCase() === b.GroupType.Password && s2.hasOwnProperty(b.GroupConstants.KEYS.PASSWORD) && (i2 = s2[b.GroupConstants.KEYS.PASSWORD])), s2 = s2[b.GroupConstants.KEYS.GUID]) : t2(new K.CometChatException(R.ERRORS.PARAMETER_MISSING))), o2 = w.isFalsy(i2) ? new a.Group(s2, "name", r2) : new a.Group(s2, "name", r2, i2), T.makeApiCall("joinGroup", o2, o2).then(function(e3) {
                  var t3 = A.GroupsController.trasformJSONGroup(e3.data[b.ResponseConstants.RESPONSE_KEYS.KEY_DATA][b.ActionConstatnts.ACTION_KEYS.ENTITIES][b.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][b.ActionConstatnts.ACTION_KEYS.ENTITY]);
                  t3.setHasJoined(true), n2(t3);
                }, function(e3) {
                  t2(new K.CometChatException(e3.error));
                });
              } catch (e3) {
                t2(new K.CometChatException(e3));
              }
            });
          }, G2.updateGroup = function(s2) {
            return new Promise(function(t2, n2) {
              try {
                var e2 = w.validateUpdateGroup(s2);
                if (e2 instanceof K.CometChatException)
                  return void n2(e2);
                if (!(s2 instanceof a.Group)) {
                  var o2 = void 0;
                  if (!s2.hasOwnProperty(b.GroupConstants.KEYS.GUID))
                    return void n2(new K.CometChatException(R.ERRORS.PARAMETER_MISSING));
                  o2 = new a.Group(b.GroupConstants.KEYS.GUID, "", ""), s2.hasOwnProperty(b.GroupConstants.KEYS.TYPE) ? o2.setType(s2[b.GroupConstants.KEYS.TYPE]) : (s2[b.GroupConstants.KEYS.TYPE] = b.GROUP_TYPE.PUBLIC, o2.setType[b.GROUP_TYPE.PUBLIC]), s2.hasOwnProperty(b.GroupConstants.KEYS.NAME) && o2.setName(s2[b.GroupConstants.KEYS.NAME]), s2.hasOwnProperty(b.GroupConstants.KEYS.ICON) && o2.setIcon(s2[b.GroupConstants.KEYS.ICON]), s2.hasOwnProperty(b.GroupConstants.KEYS.DESCRIPTION) && o2.setDescription(s2[b.GroupConstants.KEYS.DESCRIPTION]), s2.hasOwnProperty(b.GroupConstants.KEYS.TAGS) && o2.setTags(s2[b.GroupConstants.KEYS.TAGS]), s2 = o2;
                }
                T.makeApiCall("updateGroup", s2, s2).then(function(e3) {
                  t2(A.GroupsController.trasformJSONGroup(e3.data));
                }, function(e3) {
                  n2(new K.CometChatException(e3.error));
                });
              } catch (e3) {
                n2(new K.CometChatException(e3));
              }
            });
          }, G2.deleteGroup = function(o2) {
            return new Promise(function(t2, n2) {
              try {
                var e2 = w.validateId(o2, "group");
                if (e2 instanceof K.CometChatException)
                  return void n2(e2);
                T.makeApiCall("deleteGroup", { guid: o2 }).then(function(e3) {
                  t2(true);
                }, function(e3) {
                  n2(new K.CometChatException(e3.error));
                });
              } catch (e3) {
                n2(new K.CometChatException(e3));
              }
            });
          }, G2.leaveGroup = function(o2) {
            return new Promise(function(t2, n2) {
              try {
                var e2 = w.validateId(o2, "group");
                if (e2 instanceof K.CometChatException)
                  return void n2(e2);
                T.makeApiCall("leaveGroup", { guid: o2 }).then(function(e3) {
                  t2(true);
                }, function(e3) {
                  n2(new K.CometChatException(e3.error));
                });
              } catch (e3) {
                n2(new K.CometChatException(e3));
              }
            });
          }, G2.kickGroupMember = function(s2, r2) {
            return new Promise(function(t2, n2) {
              try {
                var e2 = w.validateId(s2, "group");
                if (e2 instanceof K.CometChatException)
                  return void n2(e2);
                var o2 = w.validateId(r2, "user");
                if (o2 instanceof K.CometChatException)
                  return void n2(o2);
                T.makeApiCall("kickGroupMembers", { guid: s2, uid: r2 }).then(function(e3) {
                  t2(true);
                }, function(e3) {
                  n2(new K.CometChatException(e3.error));
                });
              } catch (e3) {
                n2(new K.CometChatException(e3));
              }
            });
          }, G2.updateGroupMemberScope = function(r2, i2, a2) {
            return new Promise(function(t2, n2) {
              try {
                var e2 = w.validateId(r2, "group");
                if (e2 instanceof K.CometChatException)
                  return void n2(e2);
                var o2 = w.validateId(i2, "user");
                if (o2 instanceof K.CometChatException)
                  return void n2(o2);
                var s2 = w.validateScope(a2);
                if (s2 instanceof K.CometChatException)
                  return void n2(s2);
                T.makeApiCall("changeScopeOfMember", { guid: r2, uid: i2 }, { scope: a2 }).then(function(e3) {
                  t2(true);
                }, function(e3) {
                  n2(new K.CometChatException(e3.error));
                });
              } catch (e3) {
                n2(new K.CometChatException(e3));
              }
            });
          }, G2.banGroupMember = function(s2, r2) {
            return new Promise(function(t2, n2) {
              try {
                var e2 = w.validateId(s2, "group");
                if (e2 instanceof K.CometChatException)
                  return void n2(e2);
                var o2 = w.validateId(r2, "user");
                if (o2 instanceof K.CometChatException)
                  return void n2(o2);
                T.makeApiCall("banGroupMember", { guid: s2, uid: r2 }).then(function(e3) {
                  t2(true);
                }, function(e3) {
                  n2(new K.CometChatException(e3.error));
                });
              } catch (e3) {
                n2(new K.CometChatException(e3));
              }
            });
          }, G2.unbanGroupMember = function(s2, r2) {
            return new Promise(function(t2, n2) {
              try {
                var e2 = w.validateId(s2, "group");
                if (e2 instanceof K.CometChatException)
                  return void n2(e2);
                var o2 = w.validateId(r2, "user");
                if (o2 instanceof K.CometChatException)
                  return void n2(o2);
                T.makeApiCall("unbanGroupMember", { guid: s2, uid: r2 }).then(function(e3) {
                  t2(true);
                }, function(e3) {
                  n2(new K.CometChatException(e3.error));
                });
              } catch (e3) {
                n2(new K.CometChatException(e3));
              }
            });
          }, G2.addMembersToGroup = function(i2, a2, E2) {
            var c2 = [], u2 = [], S2 = [], p2 = [];
            return new Promise(function(e2, t2) {
              try {
                var n2 = w.validateId(i2, "group");
                if (n2 instanceof K.CometChatException)
                  return void t2(n2);
                var o2 = w.validateArray(a2, "groupMembers");
                if (o2 instanceof K.CometChatException)
                  return void t2(o2);
                if (E2) {
                  var s2 = w.validateArray(E2, "bannedMembers");
                  if (s2 instanceof K.CometChatException)
                    return void t2(s2);
                }
                w.isFalsy(a2) && w.isFalsy(E2) ? t2(new K.CometChatException({})) : w.isFalsy(a2) || w.isFalsy(E2) ? w.isFalsy(a2) ? E2.map(function(e3) {
                  p2.push(e3);
                }) : (a2.filter(function(e3) {
                  if (e3.getScope() == b.GROUP_MEMBER_SCOPE.ADMIN)
                    return true;
                }).map(function(e3) {
                  c2.push(e3.getUid());
                }), a2.filter(function(e3) {
                  if (e3.getScope() == b.GROUP_MEMBER_SCOPE.MODERATOR)
                    return true;
                }).map(function(e3) {
                  u2.push(e3.getUid());
                }), a2.filter(function(e3) {
                  if (e3.getScope() == b.GROUP_MEMBER_SCOPE.PARTICIPANT)
                    return true;
                }).map(function(e3) {
                  S2.push(e3.getUid());
                })) : (a2.filter(function(e3) {
                  if (e3.getScope() == b.GROUP_MEMBER_SCOPE.ADMIN)
                    return true;
                }).map(function(e3) {
                  c2.push(e3.getUid());
                }), a2.filter(function(e3) {
                  if (e3.getScope() == b.GROUP_MEMBER_SCOPE.MODERATOR)
                    return true;
                }).map(function(e3) {
                  u2.push(e3.getUid());
                }), a2.filter(function(e3) {
                  if (e3.getScope() == b.GROUP_MEMBER_SCOPE.PARTICIPANT)
                    return true;
                }).map(function(e3) {
                  S2.push(e3.getUid());
                }), E2.map(function(e3) {
                  p2.push(e3);
                }));
                var r2 = {};
                w.isFalsy(c2) || (r2 = l(l({}, r2), { admins: c2 })), w.isFalsy(S2) || (r2 = l(l({}, r2), { participants: S2 })), w.isFalsy(u2) || (r2 = l(l({}, r2), { moderators: u2 })), w.isFalsy(p2) || (r2 = l(l({}, r2), { usersToBan: p2 })), T.makeApiCall("addMemebersToGroup", { guid: i2 }, r2).then(function(t3) {
                  var n3 = {};
                  Object.keys(t3.data.admins).map(function(e3) {
                    t3.data.admins[e3][b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS] ? n3[e3] = b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS : n3[e3] = t3.data.admins[e3][b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.ERROR][b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.MESSAGE];
                  }), Object.keys(t3.data.participants).map(function(e3) {
                    t3.data.participants[e3][b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS] ? n3[e3] = b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS : n3[e3] = t3.data.participants[e3][b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.ERROR][b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.MESSAGE];
                  }), Object.keys(t3.data.moderators).map(function(e3) {
                    t3.data.moderators[e3][b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS] ? n3[e3] = b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS : n3[e3] = t3.data.moderators[e3][b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.ERROR][b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.MESSAGE];
                  }), Object.keys(t3.data.usersToBan).map(function(e3) {
                    t3.data.usersToBan[e3][b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS] ? n3[e3] = b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS : n3[e3] = t3.data.usersToBan[e3][b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.ERROR][b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.MESSAGE];
                  }), e2(n3);
                }, function(e3) {
                  t2(new K.CometChatException(e3.error));
                });
              } catch (e3) {
                t2(new K.CometChatException(e3));
              }
            });
          }, G2.transferGroupOwnership = function(s2, r2) {
            return new Promise(function(n2, t2) {
              try {
                var e2 = w.validateId(s2, "group");
                if (e2 instanceof K.CometChatException)
                  return void t2(e2);
                var o2 = w.validateId(r2, "user");
                if (o2 instanceof K.CometChatException)
                  return void t2(o2);
                T.makeApiCall("transferOwnership", { guid: s2 }, { owner: r2 }).then(function(e3) {
                  var t3;
                  t3 = e3 && e3.data && e3.data.message ? e3.data.message : "Ownership transferred to user " + r2 + " for the group with guid " + s2 + ".", n2(t3);
                }, function(e3) {
                  t2(new K.CometChatException(e3.error));
                });
              } catch (e3) {
                t2(new K.CometChatException(e3));
              }
            });
          }, G2.createGroupWithMembers = function(i2, a2, E2) {
            var c2 = [], u2 = [], S2 = [], p2 = [];
            return new Promise(function(r2, t2) {
              try {
                var e2 = w.validateCreateGroup(i2);
                if (e2 instanceof K.CometChatException)
                  return void t2(e2);
                if (a2 && 0 < a2.length) {
                  var n2 = w.validateArray(a2, "groupMembers");
                  if (n2 instanceof K.CometChatException)
                    return void t2(n2);
                  a2.map(function(e3) {
                    e3.getScope() === b.GROUP_MEMBER_SCOPE.ADMIN && c2.push(e3.getUid()), e3.getScope() === b.GROUP_MEMBER_SCOPE.MODERATOR && u2.push(e3.getUid()), e3.getScope() === b.GROUP_MEMBER_SCOPE.PARTICIPANT && S2.push(e3.getUid());
                  });
                }
                if (E2 && 0 < E2.length) {
                  var o2 = w.validateArray(E2, "bannedMembers");
                  if (o2 instanceof K.CometChatException)
                    return void t2(o2);
                  E2.map(function(e3) {
                    p2.push(e3);
                  });
                }
                var s2 = {};
                s2 = l({}, i2), w.isFalsy(c2) || (s2.members = l(l({}, s2.members), { admins: c2 })), w.isFalsy(S2) || (s2.members = l(l({}, s2.members), { participants: S2 })), w.isFalsy(u2) || (s2.members = l(l({}, s2.members), { moderators: u2 })), w.isFalsy(p2) || (s2.members = l(l({}, s2.members), { usersToBan: p2 })), T.makeApiCall("createGroup", {}, s2).then(function(e3) {
                  var t3 = { members: {} }, n3 = e3.data.members.data ? e3.data.members.data : { admins: {}, moderators: {}, participants: {}, usersToBan: {} };
                  Object.keys(n3.admins).map(function(e4) {
                    n3.admins[e4][b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS] ? t3.members[e4] = b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS : t3.members[e4] = n3.admins[e4][b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.ERROR][b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.MESSAGE];
                  }), Object.keys(n3.participants).map(function(e4) {
                    n3.participants[e4][b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS] ? t3.members[e4] = b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS : t3.members[e4] = n3.participants[e4][b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.ERROR][b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.MESSAGE];
                  }), Object.keys(n3.moderators).map(function(e4) {
                    n3.moderators[e4][b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS] ? t3.members[e4] = b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS : t3.members[e4] = n3.moderators[e4][b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.ERROR][b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.MESSAGE];
                  }), Object.keys(n3.usersToBan).map(function(e4) {
                    n3.usersToBan[e4][b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS] ? t3.members[e4] = b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.SUCCESS : t3.members[e4] = n3.usersToBan[e4][b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.ERROR][b.ResponseConstants.RESPONSE_KEYS.GROUP_MEMBERS_RESPONSE.MESSAGE];
                  }), delete e3.data.members;
                  var o3 = e3.data, s3 = A.GroupsController.trasformJSONGroup(o3);
                  s3.setHasJoined(true), t3 = l(l({}, t3), { group: s3 }), r2(t3);
                }, function(e3) {
                  t2(new K.CometChatException(e3.error));
                });
              } catch (e3) {
                t2(new K.CometChatException(e3));
              }
            });
          }, G2.initiateCall = function(t2) {
            var s2 = this;
            return new Promise(function(n2, o2) {
              var e2 = s2.getActiveCall();
              if (null === e2)
                try {
                  w.isFalsy(JSON.parse(JSON.stringify(t2)).sender) ? w.isFalsy(e2) ? (t2.setStatus(b.CallConstants.CALL_STATUS.INITIATED), t2.receiver = t2.receiverId.toString(), delete t2.receiverId, T.makeApiCall("createCallSession", {}, t2).then(function(e3) {
                    var t3 = g.MessageController.trasformJSONMessge(e3[b.ResponseConstants.RESPONSE_KEYS.KEY_DATA]);
                    B.CallController.getInstance().initiateCall(t3).then(function(e4) {
                      n2(t3);
                    }).catch(function(e4) {
                      o2(new K.CometChatException(e4));
                    });
                  }, function(e3) {
                    o2(new K.CometChatException(e3.error));
                  })) : o2(new K.CometChatException(b.CALL_ERROR.ERROR_IN_CALLING)) : B.CallController.getInstance().initiateCall(t2).then(function(e3) {
                    n2(Object.assign(t2));
                  }).catch(function(e3) {
                    o2(new K.CometChatException(e3));
                  });
                } catch (e3) {
                  o2(new K.CometChatException(e3));
                }
              else
                o2(new K.CometChatException(b.CALL_ERROR.CALL_ALREADY_INITIATED));
            });
          }, G2.acceptCall = function(o2) {
            var s2 = this;
            return new Promise(function(n2, t2) {
              if (null === s2.getActiveCall())
                try {
                  var e2 = {};
                  e2[b.CallConstants.CALL_KEYS.CALL_STATUS] = b.CallConstants.CALL_STATUS.ONGOING, T.makeApiCall("updateCallSession", { sessionid: o2 }, e2).then(function(e3) {
                    var t3 = g.MessageController.trasformJSONMessge(e3[b.ResponseConstants.RESPONSE_KEYS.KEY_DATA]);
                    B.CallController.getInstance().onCallStarted(t3), n2(t3);
                  }, function(e3) {
                    t2(new K.CometChatException(e3.error));
                  });
                } catch (e3) {
                  t2(new K.CometChatException(e3));
                }
              else
                t2(new K.CometChatException(b.CALL_ERROR.CANNOT_ACCEPT_CALL));
            });
          }, G2.rejectCall = function(e2, t2) {
            try {
              switch (t2) {
                case b.CallConstants.CALL_STATUS.REJECTED:
                  return this.rejectIncomingCall(e2);
                case b.CallConstants.CALL_STATUS.CANCELLED:
                  return this.cancelCall(e2);
                case b.CallConstants.CALL_STATUS.BUSY:
                  return this.sendBusyResponse(e2);
                default:
                  return this.endCall(e2, true);
              }
            } catch (e3) {
              w.Logger.error("CometChat: rejectCall", e3);
            }
          }, G2.endCall = function(s2, r2) {
            var i2 = this;
            return new Promise(function(n2, t2) {
              w.isFalsy(r2) && (r2 = false);
              var o2 = i2.getActiveCall();
              if (null !== o2) {
                if (o2.getSessionId() === s2)
                  try {
                    var e2 = {};
                    e2[b.CallConstants.CALL_KEYS.CALL_STATUS] = b.CallConstants.CALL_STATUS.ENDED, o2.getJoinedAt() && (e2[b.CallConstants.CALL_KEYS.CALL_JOINED_AT] = o2.getJoinedAt()), T.makeApiCall("updateCallSession", { sessionid: s2 }, e2).then(function(e3) {
                      r2 || B.CallController.getInstance().endSession();
                      var t3 = g.MessageController.trasformJSONMessge(e3[b.ResponseConstants.RESPONSE_KEYS.KEY_DATA]);
                      n2(t3), B.CallController.getInstance().getCallListner() && B.CallController.getInstance().getCallListner()._eventListener.onCallEnded(t3), B.CallController.getInstance().endCall();
                    }, function(e3) {
                      w.Logger.log("calling Log", { error: e3 }), r2 || B.CallController.getInstance().endSession(), o2.setStatus(b.CallConstants.CALL_STATUS.ENDED), n2(o2), B.CallController.getInstance().getCallListner() && B.CallController.getInstance().getCallListner()._eventListener.onCallEnded(o2), B.CallController.getInstance().endCall();
                    });
                  } catch (e3) {
                    t2(new K.CometChatException(e3));
                  }
              } else
                r2 || B.CallController.getInstance().endSession(), n2(null), B.CallController.getInstance().getCallListner() && B.CallController.getInstance().getCallListner()._eventListener.onCallEnded(null), B.CallController.getInstance().endCall();
            });
          }, G2.getActiveCall = function() {
            try {
              return B.CallController.getInstance().getActiveCall();
            } catch (e2) {
              w.Logger.error("CometChat: getActiveCall", e2);
            }
          }, G2.startCall = function(o2, s2, r2) {
            var i2 = this;
            try {
              var a2, E2, c2, u2, S2, p2, l2, C2, T2, d2, _2 = this.getActiveCall(), g2 = false, h2 = true, A2 = true, R2 = true, I2 = true, f2 = true, O2 = true, N2 = false, y2 = false, m2 = b.CallConstants.CALL_MODE.DEFAULT, M2 = false, v2 = false, P2 = false, L2 = true, D2 = true, U2 = {}, Y2 = this.user;
              u2 = new J.VirtualBackgroundBuilder().build(), S2 = new J.MainVideoContainerSetting(), w.getAppSettings().then(function(e2) {
                if (C2 = e2[b.APP_SETTINGS.KEYS.WEBRTC_HOST], U2[b.APP_SETTINGS.KEYS.ANALYTICS_HOST] = e2[b.APP_SETTINGS.KEYS.ANALYTICS_HOST], U2[b.APP_SETTINGS.KEYS.ANALYTICS_VERSION] = e2[b.APP_SETTINGS.KEYS.ANALYTICS_VERSION], U2[b.APP_SETTINGS.KEYS.ANALYTICS_PING_DISABLED] = e2[b.APP_SETTINGS.KEYS.ANALYTICS_PING_DISABLED], U2[b.APP_SETTINGS.KEYS.ANALYTICS_USE_SSL] = e2[b.APP_SETTINGS.KEYS.ANALYTICS_USE_SSL], p2 = e2[b.APP_SETTINGS.KEYS.REGION], w.isFalsy(r2) || B.CallController.getInstance().setCallListner(r2), w.isFalsy(i2.appSettings))
                  B.CallController.getInstance().getCallListner() && B.CallController.getInstance().getCallListner()._eventListener.onError(new K.CometChatException(b.CALL_ERROR.NOT_INITIALIZED));
                else if (p2)
                  if (Y2)
                    if ((d2 = new H.RTCUser(Y2.getUid())).setName(Y2.getName()), d2.setAvatar(Y2.getAvatar()), d2.setResource(G2.getSessionId()), G2.appId)
                      if (l2 = G2.appId, "string" == typeof o2) {
                        if (_2) {
                          var t2 = _2.getType();
                          g2 = t2 === b.CallConstants.CALL_TYPE.AUDIO, E2 = _2.getSessionId();
                        } else {
                          if (w.isFalsy(o2))
                            return void (B.CallController.getInstance().getCallListner() && B.CallController.getInstance().getCallListner()._eventListener.onError(new K.CometChatException(b.CALL_ERROR.SESSION_ID_REQUIRED)));
                          E2 = ("v1." + p2 + "." + G2.getAppId() + "." + o2).toLowerCase();
                        }
                        if (!E2)
                          return void (B.CallController.getInstance().getCallListner() && B.CallController.getInstance().getCallListner()._eventListener.onError(new K.CometChatException(b.CALL_ERROR.SESSION_ID_REQUIRED)));
                        L2 = !!g2;
                        var n2 = { uid: Y2.getUid(), sessionId: E2 };
                        G2.getJWT(n2).then(function(e3) {
                          e3.hasOwnProperty("token") ? (d2.setJWT(e3.token), a2 = new J.CallSettingsBuilder().setSessionID(E2).enableDefaultLayout(h2).setIsAudioOnlyCall(g2).setUser(d2).setRegion(p2).setAppId(l2).setDomain(C2).showEndCallButton(I2).showMuteAudioButton(R2).showPauseVideoButton(A2).showScreenShareButton(f2).showModeButton(O2).setMode(m2).setAnalyticsSettings(U2).startWithAudioMuted(N2).startWithVideoMuted(y2).showRecordingButton(M2).startRecordingOnCallStart(v2).forceLegacyUI(P2).showSwitchToVideoCallButton(L2).setVirtualBackground(u2).showVirtualBackgroundSetting(D2).setMainVideoContainerSetting(S2).build(), B.CallController.getInstance().startCall(a2, s2)) : B.CallController.getInstance().getCallListner() && B.CallController.getInstance().getCallListner()._eventListener.onError(new K.CometChatException(b.CALL_ERROR.JWT_NOT_FOUND));
                        }, function(e3) {
                          B.CallController.getInstance().getCallListner() && B.CallController.getInstance().getCallListner()._eventListener.onError(new K.CometChatException(e3));
                        });
                      } else {
                        if (w.isFalsy(o2))
                          return void (B.CallController.getInstance().getCallListner() && B.CallController.getInstance().getCallListner()._eventListener.onError(new K.CometChatException(b.CALL_ERROR.CALL_SETTINGS_REQUIRED)));
                        if (_2) {
                          t2 = _2.getType();
                          g2 = t2 === b.CallConstants.CALL_TYPE.AUDIO, E2 = _2.getSessionId();
                        } else {
                          if (g2 = o2.isAudioOnlyCall(), w.isFalsy(o2.getSessionId()))
                            return void (B.CallController.getInstance().getCallListner() && B.CallController.getInstance().getCallListner()._eventListener.onError(new K.CometChatException(b.CALL_ERROR.SESSION_ID_REQUIRED)));
                          E2 = ("v1." + p2 + "." + G2.getAppId() + "." + o2.getSessionId()).toLowerCase();
                        }
                        if (!E2)
                          return void (B.CallController.getInstance().getCallListner() && B.CallController.getInstance().getCallListner()._eventListener.onError(new K.CometChatException(b.CALL_ERROR.SESSION_ID_REQUIRED)));
                        h2 = o2.isDefaultLayoutEnabled(), A2 = o2.isPauseVideoButtonEnabled(), R2 = o2.isMuteAudioButtonEnabled(), I2 = o2.isEndCallButtonEnabled(), f2 = o2.isScreenShareButtonEnabled(), m2 = o2.getMode(), T2 = o2.getLocalizedStringObject(), c2 = o2.getCustomCSS(), O2 = o2.isModeButtonEnabled(), N2 = o2.getStartWithAudioMuted(), y2 = o2.getStartWithVideoMuted(), M2 = o2.isRecordingButtonEnabled(), v2 = o2.shouldStartRecordingOnCallStart(), P2 = o2.shouldUseLegacyUI(), L2 = !!g2 && o2.isAudioToVideoButtonEnabled(), u2 = o2.getVirtualBackground(), D2 = o2.isVirtualBackgroundSettingEnabled(), S2 = o2.getMainVideoContainerSetting();
                        n2 = { uid: Y2.getUid(), sessionId: E2 };
                        G2.getJWT(n2).then(function(e3) {
                          e3.hasOwnProperty("token") ? (d2.setJWT(e3.token), a2 = new J.CallSettingsBuilder().setSessionID(E2).enableDefaultLayout(h2).setIsAudioOnlyCall(g2).setUser(d2).setRegion(p2).setAppId(l2).setDomain(C2).showEndCallButton(I2).showMuteAudioButton(R2).showPauseVideoButton(A2).showScreenShareButton(f2).showModeButton(O2).setMode(m2).setLocalizedStringObject(T2).setCustomCSS(c2).setAnalyticsSettings(U2).startWithAudioMuted(N2).startWithVideoMuted(y2).showRecordingButton(M2).startRecordingOnCallStart(v2).forceLegacyUI(P2).showSwitchToVideoCallButton(L2).setVirtualBackground(u2).showVirtualBackgroundSetting(D2).setMainVideoContainerSetting(S2).build(), B.CallController.getInstance().startCall(a2, s2)) : B.CallController.getInstance().getCallListner() && B.CallController.getInstance().getCallListner()._eventListener.onError(new K.CometChatException(b.CALL_ERROR.JWT_NOT_FOUND));
                        }, function(e3) {
                          B.CallController.getInstance().getCallListner() && B.CallController.getInstance().getCallListner()._eventListener.onError(new K.CometChatException(e3));
                        });
                      }
                    else
                      B.CallController.getInstance().getCallListner() && B.CallController.getInstance().getCallListner()._eventListener.onError(new K.CometChatException(b.CALL_ERROR.NOT_INITIALIZED));
                  else
                    B.CallController.getInstance().getCallListner() && B.CallController.getInstance().getCallListner()._eventListener.onError(new K.CometChatException(b.CALL_ERROR.NOT_LOGGED_IN));
                else
                  B.CallController.getInstance().getCallListner() && B.CallController.getInstance().getCallListner()._eventListener.onError(new K.CometChatException(b.CALL_ERROR.NOT_INITIALIZED));
              }, function(e2) {
                w.Logger.error("CometChat: startCall", e2);
              });
            } catch (e2) {
              w.Logger.error("CometChat: startCall", e2);
            }
          }, G2.getCallParticipantCount = function(E2, c2) {
            return new Promise(function(i2, a2) {
              try {
                w.getAppSettings().then(function(e2) {
                  if (w.isFalsy(E2))
                    return a2(new K.CometChatException(b.ProsodyApiErrors.INVALID_SESSIONID));
                  if (w.isFalsy(c2))
                    return a2(new K.CometChatException(b.ProsodyApiErrors.INVALID_TYPE));
                  var t2 = e2[b.APP_SETTINGS.KEYS.REGION], n2 = {}, o2 = e2[b.APP_SETTINGS.KEYS.WEBRTC_HOST], s2 = e2[b.APP_SETTINGS.KEYS.WEBRTC_API_SUBDOMAIN], r2 = w.format(new u.EndpointFactory().prosodyApi, s2, o2, b.PROSODY_API.PATH.ROOM_SIZE);
                  "direct" === c2.toLowerCase() && (E2 = ("v1." + t2 + "." + G2.getAppId() + "." + E2).toLowerCase()), n2[b.PROSODY_API.QUERY_PARAMETERS.DOMAIN] = o2, n2[b.PROSODY_API.QUERY_PARAMETERS.ROOM] = E2, T.postData(r2, "GET", n2, {}, false).then(function(e3) {
                    return e3.text();
                  }).then(function(e3) {
                    var t3 = e3 ? JSON.parse(e3) : {};
                    return t3.hasOwnProperty(b.PROSODY_API.RESPONSE.PARTICIPANTS) ? i2(t3[b.PROSODY_API.RESPONSE.PARTICIPANTS]) : i2(0);
                  }).catch(function() {
                    var e3 = { error: R.FETCH_ERROR.ERROR_IN_API_CALL };
                    return a2(e3);
                  });
                }, function(e2) {
                  return a2(new K.CometChatException(e2));
                });
              } catch (e2) {
                return a2(new K.CometChatException(e2));
              }
            });
          }, G2.rejectIncomingCall = function(o2) {
            return new Promise(function(n2, t2) {
              try {
                var e2 = {};
                e2[b.CallConstants.CALL_KEYS.CALL_STATUS] = b.CallConstants.CALL_STATUS.REJECTED, T.makeApiCall("updateCallSession", { sessionid: o2 }, e2).then(function(e3) {
                  var t3 = g.MessageController.trasformJSONMessge(e3[b.ResponseConstants.RESPONSE_KEYS.KEY_DATA]);
                  n2(t3);
                }, function(e3) {
                  t2(new K.CometChatException(e3.error));
                });
              } catch (e3) {
                t2(new K.CometChatException(e3));
              }
            });
          }, G2.cancelCall = function(o2) {
            var s2 = this;
            return new Promise(function(n2, t2) {
              try {
                var e2 = {};
                e2[b.CallConstants.CALL_KEYS.CALL_STATUS] = b.CallConstants.CALL_STATUS.CANCELLED, T.makeApiCall("updateCallSession", { sessionid: o2 }, e2).then(function(e3) {
                  var t3 = g.MessageController.trasformJSONMessge(e3[b.ResponseConstants.RESPONSE_KEYS.KEY_DATA]);
                  s2.getActiveCall().getSessionId() === o2 && B.CallController.getInstance().endCallSession(), n2(t3);
                }, function(e3) {
                  t2(new K.CometChatException(e3.error));
                });
              } catch (e3) {
                t2(new K.CometChatException(e3));
              }
            });
          }, G2.sendBusyResponse = function(o2) {
            return new Promise(function(n2, t2) {
              try {
                var e2 = {};
                e2[b.CallConstants.CALL_KEYS.CALL_STATUS] = b.CallConstants.CALL_STATUS.BUSY, T.makeApiCall("updateCallSession", { sessionid: o2 }, e2).then(function(e3) {
                  var t3 = g.MessageController.trasformJSONMessge(e3[b.ResponseConstants.RESPONSE_KEYS.KEY_DATA]);
                  n2(t3);
                }, function(e3) {
                  t2(new K.CometChatException(e3.error));
                });
              } catch (e3) {
                t2(new K.CometChatException(e3));
              }
            });
          }, G2.sendUnansweredResponse = function(o2) {
            return new Promise(function(n2, t2) {
              try {
                var e2 = {};
                e2[b.CallConstants.CALL_KEYS.CALL_STATUS] = b.CallConstants.CALL_STATUS.UNANSWERED, T.makeApiCall("updateCallSession", { sessionid: o2 }, e2).then(function(e3) {
                  var t3 = g.MessageController.trasformJSONMessge(e3[b.ResponseConstants.RESPONSE_KEYS.KEY_DATA]);
                  re.publishCallMessage(t3), n2(t3);
                }, function(e3) {
                  t2(new K.CometChatException(e3.error));
                });
              } catch (e3) {
                t2(new K.CometChatException(e3));
              }
            });
          }, G2.addConnectionListener = function(e2, t2) {
            try {
              ie.addConnectionEventListener(e2, t2);
            } catch (e3) {
              w.Logger.error("CometChat: addConnectionListener", e3);
            }
          }, G2.removeConnectionListener = function(e2) {
            try {
              ie.removeConnectionEventListener(e2);
            } catch (e3) {
              w.Logger.error("CometChat: removeConnectionListener", e3);
            }
          }, G2.addMessageListener = function(e2, t2) {
            try {
              ie.addMessageEventListener(e2, t2);
            } catch (e3) {
              w.Logger.error("CometChat: addMessageListener", e3);
            }
          }, G2.removeMessageListener = function(e2) {
            try {
              ie.removeMessageEventListener(e2);
            } catch (e3) {
              w.Logger.error("CometChat: removeMessageListener", e3);
            }
          }, G2.addCallListener = function(e2, t2) {
            try {
              ie.addCallEventListener(e2, t2);
            } catch (e3) {
              w.Logger.error("CometChat: addCallListener", e3);
            }
          }, G2.removeCallListener = function(e2) {
            try {
              ie.removeCallEventListener(e2);
            } catch (e3) {
              w.Logger.error("CometChat: removeCallListener", e3);
            }
          }, G2.addUserListener = function(e2, t2) {
            try {
              ie.addUserEventListener(e2, t2);
            } catch (e3) {
              w.Logger.error("CometChat: addUserListener", e3);
            }
          }, G2.removeUserListener = function(e2) {
            try {
              ie.removeUserEventListener(e2);
            } catch (e3) {
              w.Logger.error("CometChat: removeUserListener", e3);
            }
          }, G2.addGroupListener = function(e2, t2) {
            try {
              ie.addGroupEventListener(e2, t2);
            } catch (e3) {
              w.Logger.error("CometChat: addGroupListener", e3);
            }
          }, G2.removeGroupListener = function(e2) {
            try {
              ie.removeGroupEventListener(e2);
            } catch (e3) {
              w.Logger.error("CometChat: removeGroupListener", e3);
            }
          }, G2.addLoginListener = function(e2, t2) {
            try {
              ie.addLoginEventListener(e2, t2);
            } catch (e3) {
              w.Logger.error("CometChat: addLoginListener", e3);
            }
          }, G2.removeLoginListener = function(e2) {
            try {
              ie.removeLoginEventListener(e2);
            } catch (e3) {
              w.Logger.error("CometChat: removeLoginListener", e3);
            }
          }, G2.generateAuthToken = function(S2) {
            var p2 = this;
            return new Promise(function(o2, s2) {
              try {
                var r2 = {}, i2 = "", a2 = "", E2 = b.APPINFO.platform, c2 = b.APPINFO.sdkVersion, u2 = b.APPINFO.apiVersion;
                navigator && (a2 = navigator.userAgent), G2.keyStore.get(b.LOCAL_STORE.KEY_DEVICE_ID).then(function(e2) {
                  if (null == (i2 = e2)) {
                    var t2 = se(), n2 = (/* @__PURE__ */ new Date()).getTime();
                    i2 = p2.appId + "_" + t2 + "_" + n2, G2.keyStore.set(b.LOCAL_STORE.KEY_DEVICE_ID, i2);
                  }
                  r2 = { platform: E2, deviceId: i2, appInfo: { version: c2, apiVersion: u2, userAgent: a2 } }, T.makeApiCall("authToken", { uid: S2 }, r2).then(function(e3) {
                    o2(e3.data);
                  }).catch(function(e3) {
                    s2(new K.CometChatException(e3.error));
                  });
                }, function(e2) {
                  w.Logger.error("Got error while fetching data from key store", e2);
                });
              } catch (e2) {
                s2(new K.CometChatException(e2));
              }
            });
          }, G2.tryReconnectingToWS = function() {
            G2.WSReconnectionInProgress || G2.startWSReconnectionTimer();
          }, G2.prototype.makeWSConnection = function() {
            G2.WSLogin(G2.user);
          }, G2.prototype.accidentallyDisconnected = function() {
            G2.currentConnectionStatus = b.CONNECTION_STATUS.CONNECTING, ie.connectionHandlers.map(function(e2) {
              try {
                e2._eventListener && (w.isFalsy(e2._eventListener.inConnecting) || e2._eventListener.inConnecting());
              } catch (e3) {
                w.Logger.error("ConnectionHandlers: inConnecting Status", e3);
              }
            }), G2.tryReconnectingToWS();
          }, G2.WSLogin = function(e2) {
            var n2 = this;
            re.connection ? w.Logger.error("CometChat :: WSLogin", re.connection) : re.WSLogin(e2.getJWT(), function(e3) {
              switch (e3) {
                case j.READY_STATE.CONNECTING:
                  (t2 = G2.getConnectionStatus()) == b.CONNECTION_STATUS.DISCONNECTED && (n2.currentConnectionStatus = b.CONNECTION_STATUS.CONNECTING, ie.connectionHandlers.map(function(e4) {
                    try {
                      e4._eventListener && (w.isFalsy(e4._eventListener.inConnecting) || e4._eventListener.inConnecting());
                    } catch (e5) {
                      w.Logger.error("connectionHandlers: Connecting Status", e5);
                    }
                  }));
                  break;
                case j.READY_STATE.OPEN:
                  (t2 = G2.getConnectionStatus()) == b.CONNECTION_STATUS.CONNECTING && (n2.currentConnectionStatus = b.CONNECTION_STATUS.CONNECTED, ie.connectionHandlers.map(function(e4) {
                    try {
                      e4._eventListener && (w.isFalsy(e4._eventListener.onConnected) || e4._eventListener.onConnected());
                    } catch (e5) {
                      w.Logger.error("connectionHandlers: Connected Status", e5);
                    }
                  })), G2.WSReconnectionInProgress && G2.clearWSReconnectionTimer();
                  break;
                case j.READY_STATE.CLOSING:
                  break;
                case j.READY_STATE.CLOSED:
                  var t2;
                  (t2 = G2.getConnectionStatus()) !== b.CONNECTION_STATUS.DISCONNECTED && t2 !== b.CONNECTION_STATUS.CONNECTING && (n2.currentConnectionStatus = b.CONNECTION_STATUS.DISCONNECTED, ie.connectionHandlers.map(function(e4) {
                    try {
                      e4._eventListener && (w.isFalsy(e4._eventListener.onDisconnected) || e4._eventListener.onDisconnected());
                    } catch (e5) {
                      w.Logger.error("connectionHandlers: Disconnected Status", e5);
                    }
                  })), re.connection && (re.connection = null), G2.isLoggedOut || G2.disconnectedByUser || n2.tryReconnectingToWS();
              }
            });
          }, G2.pingAnalytics = function() {
            var c2 = this;
            try {
              G2.keyStore.get("deviceId").then(function(E2) {
                w.getAppSettings().then(function(e2) {
                  var t2 = null;
                  window && window.location && window.location.origin && (t2 = window.location.origin);
                  var n2 = "", o2 = E2, s2 = { version: b.SDKHeader.sdkVersion, apiVersion: e2[b.APP_SETTINGS.KEYS.CHAT_API_VERSION], origin: t2, uts: (/* @__PURE__ */ new Date()).getTime() };
                  w.isFalsy(c2.resource) || (s2.resource = c2.resource), w.isFalsy(c2.platform) || (s2.platform = c2.platform), w.isFalsy(c2.language) || (s2.language = c2.language), navigator && (n2 = navigator.userAgent);
                  var r2 = { appInfo: s2, uid: G2.user.getUid(), userAgent: n2, deviceId: o2, platform: b.SDKHeader.platform };
                  w.isFalsy(G2.getSessionId()) || (r2.wsId = G2.getSessionId());
                  var i2 = "https://" + e2[b.APP_SETTINGS.KEYS.ANALYTICS_HOST] + "/" + e2[b.APP_SETTINGS.KEYS.ANALYTICS_VERSION] + "/ping", a2 = { appId: G2.appId, sdk: w.format(b.SDKHeader.sdk, b.SDKHeader.platform, b.SDKHeader.sdkVersion), "Content-Type": "application/json" };
                  G2.settingsHash && (a2.settingsHash = G2.settingsHash), G2.settingsHashReceivedAt && (a2.settingsHashReceivedAt = G2.settingsHashReceivedAt), G2.jwt && (a2.Authorization = "Bearer " + G2.jwt), G2.authToken && (a2.authToken = G2.authToken), T.postData(i2, "POST", r2, a2, false).then(function(e3) {
                    return e3.json();
                  }).then(function(e3) {
                    if (e3.hasOwnProperty(b.ResponseConstants.RESPONSE_KEYS.KEY_DATA))
                      w.Logger.log("Analytics Ping Request Data", e3[b.ResponseConstants.RESPONSE_KEYS.KEY_DATA]);
                    else if (e3.hasOwnProperty(b.ResponseConstants.RESPONSE_KEYS.KEY_ERROR)) {
                      var t3 = e3[b.ResponseConstants.RESPONSE_KEYS.KEY_ERROR];
                      w.Logger.log("Analytics Ping Request Error", new K.CometChatException(t3));
                      var n3 = t3.code;
                      if (n3 === b.Errors.ERR_SETTINGS_HASH_OUTDATED) {
                        var o3 = G2.authToken;
                        G2.getInstance().internalRestart(o3);
                      }
                      n3 === b.Errors.ERR_NO_AUTH && c2.updateJWT();
                    }
                  }).catch(function(e3) {
                    w.Logger.error("CometChat: pingAnalytics Fetch Error", e3);
                  });
                }, function(e2) {
                  w.Logger.error("CometChat: pingAnalytics getSettings Error", e2);
                });
              }, function(e2) {
                w.Logger.error("CometChat: pingAnalytics getDeviceId Error", e2);
              });
            } catch (e2) {
              w.Logger.error("CometChat: pingAnalytics", e2);
            }
          }, G2.updateJWT = function() {
            T.makeApiCall("getMyDetails", {}, {}, false).then(function(e2) {
              var t2 = e2.data, n2 = t2.settings, o2 = new C.Me(t2);
              if (G2.user = o2, t2.hasOwnProperty("jwt") && t2.jwt && (G2.jwt = t2.jwt), d.LocalStorage.getInstance().set("user", o2), n2 && n2[b.APP_SETTINGS.KEYS.SETTINGS_HASH] && G2.settingsHash !== n2[b.APP_SETTINGS.KEYS.SETTINGS_HASH]) {
                var s2 = G2.getInstance().getAuthToken();
                G2.getInstance().internalRestart(s2);
              }
              w.Logger.log("CometChat: updateJWT response", e2);
            }, function(e2) {
              w.Logger.error("CometChat: updateJWT Fetch Error", e2);
            }).catch(function(e2) {
              w.Logger.error("CometChat: updateJWT", e2);
            });
          }, G2.startAnalyticsPingTimer = function() {
            var e2 = this;
            G2.isAnalyticsPingStarted = true, G2.analyticsPingTimer = setInterval(function() {
              try {
                e2.pingAnalytics();
              } catch (e3) {
                w.Logger.error("CometChat: startAnalyticsPingTimer", e3);
              }
            }, G2.settingsInterval);
          }, G2.clearAnalyticsPingTimer = function() {
            try {
              G2.isAnalyticsPingStarted = false, clearInterval(G2.analyticsPingTimer);
            } catch (e2) {
              w.Logger.error("CometChat: clearAnalyticsPingTimer", e2);
            }
          }, G2.startWSReconnectionTimer = function() {
            G2.WSReconnectionInProgress = true, G2.WSReconnectionTimer = setInterval(function() {
              try {
                G2.WSLogin(G2.user);
              } catch (e2) {
                w.Logger.error("CometChat: startWSReconnectionTimer", e2);
              }
            }, G2.WSReconnectionTimerInterval);
          }, G2.clearWSReconnectionTimer = function() {
            G2.WSReconnectionInProgress = false, clearInterval(G2.WSReconnectionTimer);
          }, G2.getJWT = function(r2) {
            return new Promise(function(o2, s2) {
              try {
                X.getEndPoint("getJWT").then(function(e2) {
                  var t2 = { appId: G2.appId, Accept: "application/json", authToken: G2.authToken, resource: G2.getSessionId(), sdk: w.format(b.SDKHeader.sdk, b.SDKHeader.platform, b.SDKHeader.sdkVersion), "Content-Type": "application/json" }, n2 = {};
                  n2[b.JWT_API.KEYS.PASSTHROUGH] = r2, T.postData(e2.endpoint, e2.method, n2, t2, false).then(function(e3) {
                    return e3.json();
                  }).then(function(e3) {
                    e3.hasOwnProperty(b.ResponseConstants.RESPONSE_KEYS.KEY_DATA) ? o2(e3[b.ResponseConstants.RESPONSE_KEYS.KEY_DATA]) : s2(new K.CometChatException(e3.error));
                  }).catch(function(e3) {
                    var t3 = { error: R.FETCH_ERROR.ERROR_IN_API_CALL };
                    s2(new K.CometChatException(t3));
                  });
                }, function(e2) {
                  s2(new K.CometChatException(e2));
                });
              } catch (e2) {
                s2(new K.CometChatException(e2));
              }
            });
          }, G2.getConnectionStatus = function() {
            return this.currentConnectionStatus;
          }, G2.prototype.setConnectionStatus = function(e2) {
            G2.currentConnectionStatus = e2;
          }, G2.isExtensionEnabled = function(r2) {
            return new Promise(function(o2, s2) {
              try {
                if (w.isFalsy(r2))
                  return s2(new K.CometChatException(b.ExtensionErrors.INVALID_EXTENSION));
                w.getAppSettings().then(function(e2) {
                  if (e2.extensions) {
                    var t2 = e2.extensions;
                    if (0 < t2.length) {
                      var n2 = t2.some(function(e3) {
                        return e3.id === r2;
                      });
                      return o2(n2);
                    }
                    return o2(false);
                  }
                  return s2(new K.CometChatException(b.ExtensionErrors.EXTENSION_NOT_FOUND));
                }, function(e2) {
                  return s2(new K.CometChatException(e2));
                });
              } catch (e2) {
                return s2(new K.CometChatException(e2));
              }
            });
          }, G2.isAIFeatureEnabled = function(e2) {
            return new Promise(function(n2, t2) {
              try {
                if (w.isFalsy(e2))
                  return t2(new K.CometChatException(b.AIFeatureError.INVALID_AI_FEATURE));
                var o2 = b.AI_FEATURE_ACCESSIBLE, s2 = b.AI_FEATURE_ENABLED, r2 = w.format(b.AI_SLUG_ACCESSIBLE, e2), i2 = w.format(b.AI_SLUG_ENABLED, e2);
                w.getAppSettings().then(function(e3) {
                  if (null == e3 ? void 0 : e3.parameters) {
                    var t3 = null == e3 ? void 0 : e3.parameters;
                    return t3[o2] && t3[s2] && t3[r2] && t3[i2] ? n2(true) : n2(false);
                  }
                  return n2(false);
                }, function(e3) {
                  return t2(new K.CometChatException(e3));
                });
              } catch (e3) {
                return t2(new K.CometChatException(e3));
              }
            });
          }, G2.getExtensionDetails = function(i2) {
            return new Promise(function(s2, r2) {
              try {
                if (w.isFalsy(i2))
                  return r2(new K.CometChatException(b.ExtensionErrors.INVALID_EXTENSION));
                w.getAppSettings().then(function(e2) {
                  if (e2.extensions) {
                    var t2 = e2.extensions;
                    if (0 < t2.length) {
                      var n2 = t2.filter(function(e3) {
                        return e3.id === i2;
                      });
                      if (0 < n2.length) {
                        var o2 = new q.CCExtension(n2[0]);
                        return s2(o2);
                      }
                      return r2(new K.CometChatException(b.ExtensionErrors.EXTENSION_NOT_FOUND));
                    }
                    return r2(new K.CometChatException(b.ExtensionErrors.EXTENSION_NOT_FOUND));
                  }
                  return r2(new K.CometChatException(b.ExtensionErrors.EXTENSION_NOT_FOUND));
                }, function(e2) {
                  return r2(new K.CometChatException(e2));
                });
              } catch (e2) {
                return r2(new K.CometChatException(e2));
              }
            });
          }, G2.getAppSettings = function() {
            return new Promise(function(t2, n2) {
              try {
                T.makeApiCall("appSettings").then(function(e2) {
                  d.LocalStorage.getInstance().set(b.LOCAL_STORE.KEY_APP_SETTINGS, e2.data), t2(e2.data);
                }, function(e2) {
                  n2(new K.CometChatException(e2.error));
                });
              } catch (e2) {
                n2(new K.CometChatException(e2));
              }
            });
          }, G2.isFeatureEnabled = function(s2) {
            return new Promise(function(n2, o2) {
              try {
                if (w.isFalsy(s2))
                  return o2(new K.CometChatException(b.FeatureRestrictionErrors.INVALID_FEATURE));
                w.getAppSettings().then(function(e2) {
                  if (e2.parameters) {
                    var t2 = e2.parameters;
                    return t2.hasOwnProperty(s2) ? n2(t2[s2]) : n2(false);
                  }
                  return o2(new K.CometChatException(b.FeatureRestrictionErrors.FEATURE_NOT_FOUND));
                }, function(e2) {
                  return o2(new K.CometChatException(e2));
                });
              } catch (e2) {
                return o2(new K.CometChatException(e2));
              }
            });
          }, G2.logout = function() {
            var o2 = this;
            return new Promise(function(t2, n2) {
              try {
                G2.didAnalyticsPingStart() && G2.clearAnalyticsPingTimer(), G2.WSReconnectionInProgress && G2.clearWSReconnectionTimer(), G2.isLoggedOut = true, G2.WSReconnectionInProgress = false, G2.isAnalyticsDisabled = false, T.makeApiCall("userLogout").then(function(e2) {
                  o2.clearCache().then(function() {
                    G2.apiKey = void 0, G2.user = void 0, G2.authToken = void 0, G2.cometChat = void 0, G2.mode = void 0, re.WSLogout(), G2.pushToLoginListener("", "Logout_Success"), t2(e2.data);
                  });
                }, function(e2) {
                  o2.clearCache().then(function() {
                    G2.apiKey = void 0, G2.user = void 0, G2.authToken = void 0, G2.cometChat = void 0, G2.mode = void 0, re.WSLogout(), G2.pushToLoginListener("", "Logout_Success"), new K.CometChatException(e2.error).code == R.SERVER_ERRORS.AUTH_ERR.code ? t2({}) : n2(new K.CometChatException(e2.error));
                  });
                });
              } catch (e2) {
                n2(new K.CometChatException(e2));
              }
            });
          }, G2.callExtension = function(r2, i2, a2, E2) {
            return void 0 === E2 && (E2 = {}), new Promise(function(o2, s2) {
              try {
                w.getAppSettings().then(function(e2) {
                  var t2 = w.format(new u.EndpointFactory().extensionApi, r2, e2[b.APP_SETTINGS.KEYS.REGION], e2[b.APP_SETTINGS.KEYS.EXTENSION_DOMAIN], a2), n2 = { appId: G2.appId, Accept: "application/json", authToken: G2.authToken, resource: G2.getSessionId(), sdk: w.format(b.SDKHeader.sdk, b.SDKHeader.platform, b.SDKHeader.sdkVersion), chatApiVersion: e2[b.APP_SETTINGS.KEYS.CHAT_API_VERSION], "Content-Type": "application/json" };
                  T.postData(t2, i2, E2, n2, false).then(function(e3) {
                    return e3.json();
                  }).then(function(e3) {
                    e3.hasOwnProperty(b.ResponseConstants.RESPONSE_KEYS.KEY_DATA) ? o2(e3[b.ResponseConstants.RESPONSE_KEYS.KEY_DATA]) : s2(new K.CometChatException(e3.error));
                  }).catch(function(e3) {
                    var t3 = { error: R.FETCH_ERROR.ERROR_IN_API_CALL };
                    s2(t3);
                  });
                }, function(e2) {
                  return s2(new K.CometChatException(e2));
                });
              } catch (e2) {
                return s2(new K.CometChatException(e2));
              }
            });
          }, G2.getConversationStarter = function(a2, E2, c2) {
            return new Promise(function(t2, n2) {
              try {
                a2 = a2.toLowerCase(), E2 = E2.toLowerCase();
                var e2 = w.validateChatType(E2);
                if (e2 instanceof K.CometChatException)
                  return void n2(e2);
                var o2 = w.validateId(a2, E2);
                if (o2 instanceof K.CometChatException)
                  return void n2(o2);
                var s2 = {}, r2 = "";
                E2 === b.MessageConstatnts.RECEIVER_TYPE.GROUP ? (r2 = "getGroupConversationStarter", s2.guid = a2) : (r2 = "getUserConversationStarter", s2.uid = a2);
                var i2 = { uid: G2.user.uid, name: G2.user.name };
                s2.onbehalfofuser = btoa(JSON.stringify(i2)), T.makeApiCall(r2, s2, c2 || {}).then(function(e3) {
                  return e3[b.ResponseConstants.RESPONSE_KEYS.KEY_DATA] && e3[b.ResponseConstants.RESPONSE_KEYS.KEY_DATA][b.ResponseConstants.RESPONSE_KEYS.KEY_CONVERSATION_STARTER] ? t2(e3[b.ResponseConstants.RESPONSE_KEYS.KEY_DATA][b.ResponseConstants.RESPONSE_KEYS.KEY_CONVERSATION_STARTER]) : n2(new K.CometChatException(b.AIErrors.NO_CONVERSATION_STARTER));
                }, function(e3) {
                  return n2(new K.CometChatException(e3.error));
                });
              } catch (e3) {
                return n2(new K.CometChatException(e3));
              }
            });
          }, G2.getSmartReplies = function(a2, E2, c2) {
            return new Promise(function(t2, n2) {
              try {
                a2 = a2.toLowerCase(), E2 = E2.toLowerCase();
                var e2 = w.validateChatType(E2);
                if (e2 instanceof K.CometChatException)
                  return void n2(e2);
                var o2 = w.validateId(a2, E2);
                if (o2 instanceof K.CometChatException)
                  return void n2(o2);
                var s2 = {}, r2 = "";
                E2 === b.MessageConstatnts.RECEIVER_TYPE.GROUP ? (r2 = "getGroupSmartReply", s2.guid = a2) : (r2 = "getUserSmartReply", s2.uid = a2);
                var i2 = { uid: G2.user.uid, name: G2.user.name };
                s2.onbehalfofuser = btoa(JSON.stringify(i2)), T.makeApiCall(r2, s2, c2 || {}).then(function(e3) {
                  return e3[b.ResponseConstants.RESPONSE_KEYS.KEY_DATA] && e3[b.ResponseConstants.RESPONSE_KEYS.KEY_DATA][b.ResponseConstants.RESPONSE_KEYS.KEY_SMART_REPLIES] ? t2(e3[b.ResponseConstants.RESPONSE_KEYS.KEY_DATA][b.ResponseConstants.RESPONSE_KEYS.KEY_SMART_REPLIES]) : n2(new K.CometChatException(b.AIErrors.NO_SMART_REPLY));
                }, function(e3) {
                  return n2(new K.CometChatException(e3.error));
                });
              } catch (e3) {
                return n2(new K.CometChatException(e3));
              }
            });
          }, G2.askBot = function(c2, u2, S2, p2, l2) {
            return new Promise(function(n2, o2) {
              try {
                var e2 = {}, t2 = "";
                c2 = c2.toLowerCase(), u2 = u2.toLowerCase();
                var s2 = w.validateChatType(u2);
                if (s2 instanceof K.CometChatException)
                  return void o2(s2);
                var r2 = w.validateId(c2, u2);
                if (r2 instanceof K.CometChatException)
                  return void o2(r2);
                var i2 = w.validateId(S2, "bot");
                if (i2 instanceof K.CometChatException)
                  return void o2(i2);
                e2.botId = S2, w.isFalsy(l2) && (l2 = {});
                var a2 = w.validateQuestion(p2);
                if (a2 instanceof K.CometChatException)
                  return void o2(a2);
                l2.question = p2, u2 === b.MessageConstatnts.RECEIVER_TYPE.GROUP ? (t2 = "getBotAssistanceInGroupConversation", e2.guid = c2) : (t2 = "getBotAssistanceInUserConversation", e2.uid = c2);
                var E2 = { uid: G2.user.uid, name: G2.user.name };
                e2.onbehalfofuser = btoa(JSON.stringify(E2)), T.makeApiCall(t2, e2, l2).then(function(e3) {
                  if (e3[b.ResponseConstants.RESPONSE_KEYS.KEY_DATA] && e3[b.ResponseConstants.RESPONSE_KEYS.KEY_DATA][b.ResponseConstants.RESPONSE_KEYS.KEY_BOT_REPLY]) {
                    var t3 = e3[b.ResponseConstants.RESPONSE_KEYS.KEY_DATA][b.ResponseConstants.RESPONSE_KEYS.KEY_BOT_REPLY];
                    return n2(t3.toString());
                  }
                  return o2(new K.CometChatException(b.AIErrors.NO_ASSISTANCE));
                }, function(e3) {
                  return o2(new K.CometChatException(e3.error));
                });
              } catch (e3) {
                return o2(new K.CometChatException(e3));
              }
            });
          }, G2.getConversationSummary = function(a2, E2, c2) {
            return new Promise(function(n2, o2) {
              try {
                a2 = a2.toLowerCase(), E2 = E2.toLowerCase();
                var e2 = w.validateChatType(E2);
                if (e2 instanceof K.CometChatException)
                  return void o2(e2);
                var t2 = w.validateId(a2, E2);
                if (t2 instanceof K.CometChatException)
                  return void o2(t2);
                var s2 = {}, r2 = "";
                E2 === b.MessageConstatnts.RECEIVER_TYPE.GROUP ? (r2 = "getGroupConversationSummary", s2.guid = a2) : (r2 = "getUserConversationSummary", s2.uid = a2);
                var i2 = { uid: G2.user.uid, name: G2.user.name };
                s2.onbehalfofuser = btoa(JSON.stringify(i2)), T.makeApiCall(r2, s2, c2 || {}).then(function(e3) {
                  if (e3[b.ResponseConstants.RESPONSE_KEYS.KEY_DATA] && e3[b.ResponseConstants.RESPONSE_KEYS.KEY_DATA][b.ResponseConstants.RESPONSE_KEYS.KEY_CONVERSATION_SUMMARY]) {
                    var t3 = e3[b.ResponseConstants.RESPONSE_KEYS.KEY_DATA][b.ResponseConstants.RESPONSE_KEYS.KEY_CONVERSATION_SUMMARY];
                    return n2(t3.toString());
                  }
                  return o2(new K.CometChatException(b.AIErrors.NO_CONVERSATION_SUMMARY));
                }, function(e3) {
                  return o2(new K.CometChatException(e3.error));
                });
              } catch (e3) {
                return o2(new K.CometChatException(e3));
              }
            });
          }, G2.setSource = function(e2, t2, n2) {
            w.isFalsy(e2) || (this.resource = e2), w.isFalsy(t2) || (this.platform = t2), w.isFalsy(n2) || (this.language = n2);
          }, G2.setDemoMetaInfo = function(e2) {
            G2.demoMetaInfo = e2;
          }, G2.clearCache = function() {
            return new Promise(function(e2, t2) {
              try {
                d.LocalStorage.getInstance().clearStore().then(function() {
                  G2.removeDataFromSessionStorage(b.SESSION_STORE.SESSION_ID), w.Logger.info("CometChat: clearCache => All store cleared successfully", "true"), e2(true);
                });
              } catch (e3) {
                w.Logger.error("CometChat: clearCache", e3), t2(e3);
              }
            });
          }, G2.connect = function() {
            G2.user && (re.connection || (G2.disconnectedByUser = false, G2.WSLogin(G2.user)), G2.didAnalyticsPingStart() || G2.isAnalyticsDisabled || (G2.pingAnalytics(), G2.startAnalyticsPingTimer()));
          }, G2.disconnect = function() {
            G2.user && (G2.disconnectedByUser = true, re.connection && re.WSLogout(), G2.didAnalyticsPingStart() && G2.clearAnalyticsPingTimer());
          }, G2.prototype.internalRestart = function(e2) {
            G2.internalRestart || G2.getInstance().internalLogout(false).then(function() {
              G2.internalRestart = true, G2.login(e2).then(function(e3) {
                G2.shouldConnectToWS = true, G2.internalRestart = false;
              }, function(e3) {
                w.Logger.error("CometChat: internalRestart :: login", e3), G2.internalRestart = false;
              });
            }, function(e3) {
              w.Logger.error("CometChat: internalRestart :: internalLogout", e3);
            });
          }, G2.prototype.internalLogout = function(n2) {
            return void 0 === n2 && (n2 = true), new Promise(function(e2, t2) {
              try {
                G2.didAnalyticsPingStart() && G2.clearAnalyticsPingTimer(), G2.WSReconnectionInProgress && G2.clearWSReconnectionTimer(), G2.isLoggedOut = true, G2.WSReconnectionInProgress = false, G2.isAnalyticsDisabled = false, G2.clearCache().then(function() {
                  G2.apiKey = void 0, G2.user = void 0, G2.authToken = void 0, G2.cometChat = void 0, G2.mode = void 0, re.WSLogout(), n2 && G2.pushToLoginListener("", "Logout_Success"), e2(true);
                });
              } catch (e3) {
                w.Logger.error("CometChat: internalLogout", e3), t2(e3);
              }
            });
          }, G2.markAsInteracted = function(e2, o2) {
            return new Promise(function(n2, t2) {
              try {
                w.isFalsy(e2) ? t2(new K.CometChatException(R.ERRORS.PARAMETER_MISSING)) : T.makeApiCall("markInteracted", { messageId: e2 }, { interactions: [o2] }).then(function(e3) {
                  var t3;
                  t3 = e3 && e3.data && e3.data.message ? e3.data.message : "Marked interacted", n2(t3);
                }, function(e3) {
                  t2(new K.CometChatException(e3.error));
                });
              } catch (e3) {
                t2(new K.CometChatException(e3));
              }
            });
          }, G2.GroupType = b.GroupType, G2.GroupMemberScope = b.GroupMemberScope, G2.ResponseConstants = b.ResponseConstants, G2.CallConstants = b.CallConstants, G2.ActionConstatnts = b.ActionConstatnts, G2.CALL_ERROR = b.CALL_ERROR, G2.MessageConstatnts = b.MessageConstatnts, G2.APP_SETTINGS = b.APP_SETTINGS, G2.GroupConstants = b.GroupConstants, G2.TYPING_NOTIFICATION = b.TYPING_NOTIFICATION, G2.PresenceConstatnts = b.PresenceConstatnts, G2.APPINFO = b.APPINFO, G2.UserConstants = b.UserConstants, G2.GENERAL_ERROR = b.GENERAL_ERROR, G2.ConversationErrors = b.ConversationErrors, G2.LOCAL_STORE = b.LOCAL_STORE, G2.SDKHeader = b.SDKHeader, G2.Errors = b.Errors, G2.SESSION_STORE = b.SESSION_STORE, G2.REACTION_ACTION = b.REACTION_ACTION, G2.ExtensionErrors = b.ExtensionErrors, G2.FeatureRestrictionErrors = b.FeatureRestrictionErrors, G2.WS = b.WS, G2.JWT_API = b.JWT_API, G2.PROSODY_API = b.PROSODY_API, G2.ProsodyApiErrors = b.ProsodyApiErrors, G2.ONLINE_MEMBER_COUNT_API = b.ONLINE_MEMBER_COUNT_API, G2.ReceiptErrors = b.ReceiptErrors, G2.ANALYTICS = b.ANALYTICS, G2.API_ERROR_CODES = b.API_ERROR_CODES, G2.ATTACHMENTS_CONSTANTS = b.ATTACHMENTS_CONSTANTS, G2.BlockedUsersConstants = b.BlockedUsersConstants, G2.CALLING_COMPONENT_VERSION = b.CALLING_COMPONENT_VERSION, G2.COMMON_UTILITY_CONSTANTS = b.COMMON_UTILITY_CONSTANTS, G2.DEFAULT_VALUES = b.DEFAULT_VALUES, G2.DELIVERY_RECEIPTS = b.DELIVERY_RECEIPTS, G2.GroupErrors = b.GroupErrors, G2.GroupMemersConstans = b.GroupMemersConstans, G2.MessageCategory = b.MessageCategory, G2.MessageErrors = b.MessageErrors, G2.PARAMETER_ERROR = b.PARAMETER_ERROR, G2.READ_RECEIPTS = b.READ_RECEIPTS, G2.UserErrors = b.UserErrors, G2.constants = b.constants, G2.GoalType = b.GoalType, G2.initialzed = false, G2.CometChatException = K.CometChatException, G2.TextMessage = _.TextMessage, G2.MediaMessage = S.MediaMessage, G2.CustomMessage = L.CustomMessage, G2.BaseMessage = p.BaseMessage, G2.Action = i.Action, G2.Call = s.Call, G2.TypingIndicator = v.TypingIndicator, G2.TransientMessage = z.TransientMessage, G2.InteractiveMessage = Z.InteractiveMessage, G2.InteractionGoal = $.InteractionGoal, G2.Interaction = ee.Interaction, G2.InteractionReceipt = te.InteractionReceipt, G2.Group = a.Group, G2.User = C.User, G2.GroupMember = D.GroupMember, G2.Conversation = x.Conversation, G2.USER_STATUS = { ONLINE: b.PresenceConstatnts.STATUS.ONLINE, OFFLINE: b.PresenceConstatnts.STATUS.OFFLINE }, G2.MessagesRequest = m.MessagesRequest, G2.MessagesRequestBuilder = m.MessagesRequestBuilder, G2.ReactionRequest = oe.ReactionRequest, G2.ReactionRequestBuilder = oe.ReactionRequestBuilder, G2.UsersRequest = N.UsersRequest, G2.UsersRequestBuilder = N.UsersRequestBuilder, G2.ConversationsRequest = y.ConversationsRequest, G2.ConversationsRequestBuilder = y.ConversationsRequestBuilder, G2.BlockedUsersRequest = U.BlockedUsersRequest, G2.BlockedUsersRequestBuilder = U.BlockedUsersRequestBuilder, G2.GroupsRequest = I.GroupsRequest, G2.GroupsRequestBuilder = I.GroupsRequestBuilder, G2.GroupMembersRequest = f.GroupMembersRequest, G2.GroupMembersRequestBuilder = f.GroupMembersRequestBuilder, G2.BannedMembersRequest = O.BannedMembersRequest, G2.BannedMembersRequestBuilder = O.BannedMembersRequestBuilder, G2.CallSettings = J.CallSettings, G2.CallSettingsBuilder = J.CallSettingsBuilder, G2.MainVideoContainerSetting = J.MainVideoContainerSetting, G2.VirtualBackground = J.VirtualBackground, G2.VirtualBackgroundBuilder = J.VirtualBackgroundBuilder, G2.AppSettings = Y.AppSettings, G2.AppSettingsBuilder = Y.AppSettingsBuilder, G2.MessageListener = o.MessageListener, G2.UserListener = o.UserListener, G2.GroupListener = o.GroupListener, G2.OngoingCallListener = o.OngoingCallListener, G2.CallListener = o.CallListener, G2.ConnectionListener = o.ConnectionListener, G2.LoginListener = o.LoginListener, G2.CallController = B.CallController, G2.CometChatHelper = F.CometChatHelper, G2.Attachment = k.Attachment, G2.MediaDevice = Q.MediaDevice, G2.MESSAGE_TYPE = b.MessageConstatnts.TYPE, G2.CATEGORY_MESSAGE = b.MessageConstatnts.CATEGORY.MESSAGE, G2.CATEGORY_ACTION = b.MessageConstatnts.CATEGORY.ACTION, G2.CATEGORY_CALL = b.MessageConstatnts.CATEGORY.CALL, G2.CATEGORY_CUSTOM = b.MessageConstatnts.CATEGORY.CUSTOM, G2.CATEGORY_INTERACTIVE = b.MessageConstatnts.CATEGORY.INTERACTIVE, G2.ACTION_TYPE = b.ActionConstatnts.ACTIONS, G2.CALL_TYPE = b.CallConstants.CALL_TYPE, G2.SORT_BY = b.UserConstants.SORT_BY, G2.SORT_ORDER = b.UserConstants.SORT_ORDER, G2.CALL_MODE = b.CallConstants.CALL_MODE, G2.RECEIVER_TYPE = b.MessageConstatnts.RECEIVER_TYPE, G2.CONNECTION_STATUS = b.CONNECTION_STATUS, G2.CALL_STATUS = b.CallConstants.CALL_STATUS, G2.GROUP_MEMBER_SCOPE = b.GROUP_MEMBER_SCOPE, G2.GROUP_TYPE = b.GROUP_TYPE, G2.MESSAGE_REQUEST = b.MessageConstatnts.PAGINATION.CURSOR_FILEDS, G2.WSReconnectionInProgress = false, G2.WSReconnectionTimerInterval = 5e3, G2.currentConnectionStatus = b.CONNECTION_STATUS.DISCONNECTED, G2.isConnectingFromInit = false, G2.loginInProgress = false, G2.internalRestart = false, G2.settingsInterval = 6e4, G2.isAnalyticsPingStarted = false, G2.isLoggedOut = true, G2.isAnalyticsDisabled = false, G2.disconnectedByUser = false, G2.shouldConnectToWS = true, G2;
        }();
        t.CometChat = ae;
      }, function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", { value: true }), t.KEYS = t.AUTH = t.MESSAGE = t.PRESENCE = t.INTERACTION_RECEIPT = t.RECEIPTS = t.TRANSIENT_MESSAGE = t.MESSAGE_REACTION_ACTIONS = t.TYPING_INDICATOR = t.LOGOUT_REASON = t.LOGOUT_CODE = t.READY_STATE = t.WS = void 0, t.WS = { protocol: "wss://" }, t.READY_STATE = { CONNECTING: 0, OPEN: 1, CLOSING: 2, CLOSED: 3, INVALID_JWT: 4 }, t.LOGOUT_CODE = 1e3, t.LOGOUT_REASON = "User logged out", t.TYPING_INDICATOR = { TYPE: "typing_indicator", ACTION: { STARTED: "started", ENDED: "ended" } }, t.MESSAGE_REACTION_ACTIONS = { MESSAGE_REACTION_ADDED: "message_reaction_added", MESSAGE_REACTION_REMOVED: "message_reaction_removed" }, t.TRANSIENT_MESSAGE = { TYPE: "transient_message" }, t.RECEIPTS = { TYPE: "receipts", ACTION: { READ: "read", DELIVERED: "delivered" }, RECEIPT_TYPE: { READ_RECEIPT: "read", DELIVERY_RECEIPT: "delivery" } }, t.INTERACTION_RECEIPT = { TYPE: "interaction_completed" }, t.PRESENCE = { TYPE: "presence", ACTION: { ONLINE: "online", AVAILABLE: "available", OFFLINE: "offline" } }, t.MESSAGE = { TYPE: "message" }, t.AUTH = { TYPE: "auth" }, t.KEYS = { TYPE: "type", ACTION: "action", APP_ID: "appId", RECEIVER: "receiver", RECEIVER_TYPE: "receiverType", DEVICE_ID: "deviceId", BODY: "body", USER: "user", METADATA: "metadata", MESSAGE_ID: "messageId", TIMESTAMP: "timestamp", STATUS: "status", CODE: "code", SENDER: "sender", MESSAGE_SENDER: "messageSender", PRESENCE_SUBSCRIPTION: "presenceSubscription", AUTH: "auth", PING: "ping", DATA: "data", PARAMS: "params", ACK: "ack", PONG: "pong", INTERACTIONS: "interactions" };
      }, function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", { value: true }), t.postData = t.makeAdminApiCall = t.makeApiCall = void 0;
        var c = n(34), u = n(4), S = n(0), p = n(2), l = n(10), C = n(1);
        function T(n2, e2, o, t2, s) {
          var r;
          return void 0 === n2 && (n2 = ""), void 0 === e2 && (e2 = "GET"), void 0 === o && (o = {}), void 0 === t2 && (t2 = {}), o = S.isFalsy(o) ? void 0 : ("GET" == e2 && (n2 += "?", Object.keys(o).map(function(e3, t3) {
            n2 = t3 === Object.keys(o).length - 1 ? n2 + e3 + "=" + o[e3] : n2 + e3 + "=" + o[e3] + "&";
          }), o = void 0), s && (r = new FormData(), Object.keys(o).map(function(e3) {
            if ("data" != e3) {
              if ("tags" == e3)
                r.append(e3 + "[]", o[e3]);
              else if ("metadata" != e3)
                if ("files" === e3)
                  for (var t3 = 0; t3 < o[e3].length; t3++)
                    r.append(e3 + "[]", o[e3][t3]);
                else
                  r.append(e3, o[e3]);
            } else
              r.append(e3, JSON.stringify(o[e3]));
          })), JSON.stringify(o)), fetch(n2, { method: e2, mode: "cors", cache: "no-cache", headers: t2, redirect: "follow", referrer: "no-referrer", body: s ? r : o });
        }
        t.makeApiCall = function(s, r, i, a) {
          void 0 === s && (s = ""), void 0 === r && (r = {}), void 0 === i && (i = {});
          var E = u.CometChat.getInstance(u.CometChat.getAppId());
          return new Promise(function(n2, o) {
            try {
              c.getEndPoint(s, r).then(function(e2) {
                var t2 = { resource: u.CometChat.getSessionId(), appId: u.CometChat.getAppId(), Accept: "application/json", sdk: S.format(C.SDKHeader.sdk, C.SDKHeader.platform, C.SDKHeader.sdkVersion) };
                a || (t2["Content-Type"] = "application/json"), e2.hasOwnProperty("isAIApi") && e2.isAIApi && (t2.onbehalfofuser = r.onbehalfofuser), e2.hasOwnProperty("isAdminApi") && e2.isAdminApi ? E.getApiKey() ? t2.apiKey = E.getApiKey() : o({ error: { code: "API_KEY_NOT_SET", message: "An apiKey is needed to use the " + s + " api.", name: "API_KEY_NOT_SET" } }) : E.getAuthToken() ? t2.authToken = E.getAuthToken() : o({ error: { code: "USER_NOT_LOGED_IN", message: "An authToken is need to use the " + s + " end-point. PS- We are aware of the spelling mistake, but in order to maintain backward compatibility we cannot change it :(", name: "User not logged-in" } }), T(e2.endpoint, e2.method, i, t2, a).then(function(e3) {
                  return e3.json();
                }).then(function(e3) {
                  if (e3.hasOwnProperty("data"))
                    e3.data.hasOwnProperty("authToken") && u.CometChat.setAuthToken(e3.data.authToken), n2(e3);
                  else {
                    if (e3.hasOwnProperty("error")) {
                      var t3 = e3.error;
                      t3.hasOwnProperty("code") && t3.code === C.API_ERROR_CODES.AUTH_ERR_AUTH_TOKEN_NOT_FOUND && u.CometChat.getInstance().internalLogout().then(function() {
                        S.Logger.log("CometChat: makeApiCall", "User logged out");
                      });
                    }
                    o(e3);
                  }
                }).catch(function(e3) {
                  var t3 = { error: l.FETCH_ERROR.ERROR_IN_API_CALL };
                  o(t3);
                });
              }).catch(function(e2) {
                return o;
              });
            } catch (e2) {
              o(new p.CometChatException(e2));
            }
          });
        }, t.makeAdminApiCall = function(s, e2, r, i) {
          void 0 === s && (s = ""), void 0 === e2 && (e2 = {}), void 0 === r && (r = {});
          var a = u.CometChat.getInstance(u.CometChat.getAppId());
          return new Promise(function(n2, o) {
            c.getEndPoint(s, e2).then(function(e3) {
              var t2 = { appId: u.CometChat.getAppId(), Accept: "application/json", sdk: S.format(C.SDKHeader.sdk, C.SDKHeader.platform, C.SDKHeader.sdkVersion) };
              i || (t2["Content-Type"] = "application/json"), e3.hasOwnProperty("isAdminApi") && e3.isAdminApi ? a.getApiKey() ? t2.apiKey = a.getApiKey() : o({ error: "An apiKey is need to use the " + s + " api." }) : a.getAuthToken() ? t2.authToken = a.getAuthToken() : o({ error: "An authToken is need to use the " + s + " api." }), T(e3.endpoint, e3.method, r, t2, i).then(function(e4) {
                return e4.json();
              }).then(function(e4) {
                e4.hasOwnProperty("data") ? (e4.data.hasOwnProperty("authToken") && u.CometChat.setAuthToken(e4.data.authToken), n2(e4)) : o(e4);
              }).catch(function(e4) {
                var t3 = { error: l.FETCH_ERROR.ERROR_IN_API_CALL };
                o(t3);
              });
            }).catch(function(e3) {
              return o;
            });
          });
        }, t.postData = T;
      }, function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", { value: true }), t.BaseMessage = void 0;
        var o = n(1), s = n(18), r = n(0), i = function() {
          function e2(e3, t2, n2, o2) {
            this.mentionedUsers = [], this.mentionedMe = false, this.receiverId = e3, this.type = t2, this.receiverType = n2, this.category = o2;
          }
          return e2.prototype.getUnreadRepliesCount = function() {
            return this.unreadRepliesCount;
          }, e2.prototype.setUnreadRepliesCount = function(e3) {
            this.unreadRepliesCount = e3;
          }, e2.prototype.getId = function() {
            return this.id;
          }, e2.prototype.setId = function(e3) {
            this.id = e3;
          }, e2.prototype.getConversationId = function() {
            return this.conversationId;
          }, e2.prototype.setConversationId = function(e3) {
            this.conversationId = e3;
          }, e2.prototype.getParentMessageId = function() {
            return this.parentMessageId;
          }, e2.prototype.setParentMessageId = function(e3) {
            this.parentMessageId = e3;
          }, e2.prototype.getMuid = function() {
            return this.muid;
          }, e2.prototype.setMuid = function(e3) {
            this.muid = e3;
          }, e2.prototype.getSender = function() {
            return this.sender;
          }, e2.prototype.setSender = function(e3) {
            this.sender = e3;
          }, e2.prototype.getReceiver = function() {
            return this.receiver;
          }, e2.prototype.setReceiver = function(e3) {
            this.receiver = e3;
          }, e2.prototype.getReceiverId = function() {
            return this.receiverId;
          }, e2.prototype.setReceiverId = function(e3) {
            this.receiverId = e3;
          }, e2.prototype.getType = function() {
            return this.type;
          }, e2.prototype.setType = function(e3) {
            this.type = e3;
          }, e2.prototype.getReceiverType = function() {
            return this.receiverType;
          }, e2.prototype.setReceiverType = function(e3) {
            this.receiverType = e3;
          }, e2.prototype.getSentAt = function() {
            return this.sentAt;
          }, e2.prototype.setSentAt = function(e3) {
            this.sentAt = e3;
          }, e2.prototype.getStatus = function() {
            return this.status;
          }, e2.prototype.setStatus = function(e3) {
            this.status = e3;
          }, e2.prototype.getDeliveredAt = function() {
            return this.deliveredAt;
          }, e2.prototype.setDeliveredAt = function(e3) {
            this.deliveredAt = e3;
          }, e2.prototype.getDeliveredToMeAt = function() {
            return this.deliveredToMeAt;
          }, e2.prototype.setDeliveredToMeAt = function(e3) {
            this.deliveredToMeAt = e3;
          }, e2.prototype.getReadAt = function() {
            return this.readAt;
          }, e2.prototype.setReadAt = function(e3) {
            this.readAt = e3;
          }, e2.prototype.getReadByMeAt = function() {
            return this.readByMeAt;
          }, e2.prototype.setReadByMeAt = function(e3) {
            this.readByMeAt = e3;
          }, e2.prototype.getCategory = function() {
            return this.category;
          }, e2.prototype.setCategory = function(e3) {
            this.category = e3;
          }, e2.prototype.getEditedAt = function() {
            return this.editedAt;
          }, e2.prototype.setEditedAt = function(e3) {
            this.editedAt = e3;
          }, e2.prototype.getEditedBy = function() {
            return this.editedBy;
          }, e2.prototype.setEditedBy = function(e3) {
            this.editedBy = e3;
          }, e2.prototype.getDeletedAt = function() {
            return this.deletedAt;
          }, e2.prototype.setDeletedAt = function(e3) {
            this.deletedAt = e3;
          }, e2.prototype.getDeletedBy = function() {
            return this.deletedBy;
          }, e2.prototype.setDeletedBy = function(e3) {
            this.deletedBy = e3;
          }, e2.prototype.getReplyCount = function() {
            return this.replyCount;
          }, e2.prototype.setReplyCount = function(e3) {
            this.replyCount = e3;
          }, e2.prototype.getRawMessage = function() {
            return this.rawMessage;
          }, e2.prototype.setRawMessage = function(e3) {
            this.rawMessage = e3;
          }, e2.prototype.setMentionedUsers = function(e3) {
            this.mentionedUsers = e3;
          }, e2.prototype.getMentionedUsers = function() {
            return this.mentionedUsers;
          }, e2.prototype.setHasMentionedMe = function(e3) {
            this.mentionedMe = e3;
          }, e2.prototype.hasMentionedMe = function() {
            return this.mentionedMe;
          }, e2.prototype.getData = function() {
            return this.data;
          }, e2.prototype.setData = function(e3) {
            this.data = e3;
          }, e2.prototype.setReactions = function(e3) {
            try {
              this.setReactionsToData(e3);
            } catch (e4) {
              return this.reactions;
            }
          }, e2.prototype.getReactions = function() {
            try {
              return this.getReactionsFromData();
            } catch (e3) {
              return this.reactions;
            }
          }, e2.prototype.setReactionsToData = function(e3) {
            var t2 = this.getData();
            if (t2[o.ResponseConstants.RESPONSE_KEYS.KEY_REACTIONS]) {
              var n2 = e3.map(function(e4) {
                var t3 = new s.ReactionCount({});
                return Object.assign(t3, e4), t3;
              });
              t2[o.ResponseConstants.RESPONSE_KEYS.KEY_REACTIONS] = n2, this.setData(t2), this.reactions = n2;
            } else
              t2[o.ResponseConstants.RESPONSE_KEYS.KEY_REACTIONS] = e3, this.setData(t2), this.reactions = e3;
          }, e2.prototype.getReactionsFromData = function() {
            try {
              var e3 = this.getData(), n2 = [];
              if (e3[o.ResponseConstants.RESPONSE_KEYS.KEY_REACTIONS])
                e3[o.ResponseConstants.RESPONSE_KEYS.KEY_REACTIONS].forEach(function(e4) {
                  var t2 = new s.ReactionCount({});
                  Object.assign(t2, e4), n2.push(t2);
                });
              return n2;
            } catch (e4) {
              r.Logger.error("BaseMessageModel: getReactionsFromData", e4);
            }
          }, e2;
        }();
        t.BaseMessage = i;
      }, function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", { value: true }), t.Group = void 0;
        var o = n(1), s = function() {
          function e2(e3, t2, n2, o2, s2, r, i) {
            this.hasJoined = false, this.membersCount = 0, this.guid = e3, t2 && (this.name = t2), n2 && (this.type = n2), !o2 && "" !== o2 || "password" != n2 || (this.password = o2), (s2 || "" === s2) && (this.icon = s2), (r || "" === r) && (this.description = r), i && (this.hasJoined = i);
          }
          return e2.prototype.getGuid = function() {
            return this.guid;
          }, e2.prototype.setGuid = function(e3) {
            this.guid = e3;
          }, e2.prototype.getName = function() {
            return this.name;
          }, e2.prototype.setName = function(e3) {
            e3 && (this.name = e3);
          }, e2.prototype.getType = function() {
            return this.type;
          }, e2.prototype.setType = function(e3) {
            this.type = e3;
          }, e2.prototype.getPassword = function() {
            return this.password;
          }, e2.prototype.setPassword = function(e3) {
            this.password = e3;
          }, e2.prototype.getIcon = function() {
            return this.icon;
          }, e2.prototype.setIcon = function(e3) {
            this.icon = e3;
          }, e2.prototype.getDescription = function() {
            return this.description;
          }, e2.prototype.setDescription = function(e3) {
            this.description = e3;
          }, e2.prototype.getOwner = function() {
            return this.owner;
          }, e2.prototype.setOwner = function(e3) {
            this.owner = e3;
          }, e2.prototype.getMetadata = function() {
            return this.metadata;
          }, e2.prototype.setMetadata = function(e3) {
            this.metadata = e3;
          }, e2.prototype.getCreatedAt = function() {
            return this.createdAt;
          }, e2.prototype.setCreatedAt = function(e3) {
            this.createdAt = e3;
          }, e2.prototype.getUpdatedAt = function() {
            return this.updatedAt;
          }, e2.prototype.setUpdatedAt = function(e3) {
            this.updatedAt = e3;
          }, e2.prototype.getHasJoined = function() {
            return this.hasJoined;
          }, e2.prototype.setHasJoined = function(e3) {
            this.hasJoined = e3;
          }, e2.prototype.getWsChannel = function() {
            return this.wsChannel;
          }, e2.prototype.setWsChannel = function(e3) {
            this.wsChannel = e3;
          }, e2.prototype.setScope = function(e3) {
            this.scope = e3;
          }, e2.prototype.getScope = function() {
            return this.scope;
          }, e2.prototype.getJoinedAt = function() {
            return this.joinedAt;
          }, e2.prototype.setJoinedAt = function(e3) {
            this.joinedAt = e3;
          }, e2.prototype.getMembersCount = function() {
            return this.membersCount;
          }, e2.prototype.setMembersCount = function(e3) {
            this.membersCount = e3;
          }, e2.prototype.setTags = function(e3) {
            this.tags = e3;
          }, e2.prototype.getTags = function() {
            return this.tags;
          }, e2.TYPE = o.GroupType, e2.Type = e2.TYPE, e2;
        }();
        t.Group = s;
      }, function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", { value: true }), t.CometChatEvent = void 0;
        var i = n(0), o = n(5), s = function() {
          function e2(e3, t2, n2, o2, s2, r) {
            i.isFalsy(e3) || (this.appId = e3), i.isFalsy(t2) || (this.receiver = t2), i.isFalsy(n2) || (this.receiverType = n2), i.isFalsy(s2) || (this.deviceId = s2), i.isFalsy(o2) || (this.sender = o2), i.isFalsy(r) || (this.messageSender = r);
          }
          return e2.prototype.getAppId = function() {
            return this.appId;
          }, e2.prototype.setAppId = function(e3) {
            this.appId = e3;
          }, e2.prototype.getReceiver = function() {
            return this.receiver;
          }, e2.prototype.setReceiver = function(e3) {
            this.receiver = e3;
          }, e2.prototype.getSender = function() {
            return this.sender;
          }, e2.prototype.setSender = function(e3) {
            this.sender = e3;
          }, e2.prototype.getReceiverType = function() {
            return this.receiverType;
          }, e2.prototype.setReceiverType = function(e3) {
            this.receiverType = e3;
          }, e2.prototype.getType = function() {
            return this.type;
          }, e2.prototype.setType = function(e3) {
            this.type = e3;
          }, e2.prototype.getDeviceId = function() {
            return this.deviceId;
          }, e2.prototype.setDeviceId = function(e3) {
            this.deviceId = e3;
          }, e2.prototype.getMessageSender = function() {
            return this.messageSender;
          }, e2.prototype.setMessageSender = function(e3) {
            this.messageSender = e3;
          }, e2.prototype.getCometChatEventJSON = function() {
            var e3 = {};
            return e3[o.KEYS.APP_ID] = this.getAppId(), e3[o.KEYS.RECEIVER] = this.getReceiver(), e3[o.KEYS.RECEIVER_TYPE] = this.getReceiverType(), e3[o.KEYS.DEVICE_ID] = this.getDeviceId(), e3[o.KEYS.TYPE] = this.getType(), e3[o.KEYS.SENDER] = this.getSender(), i.isFalsy(this.getMessageSender()) || (e3[o.KEYS.MESSAGE_SENDER] = this.getMessageSender()), e3;
          }, e2;
        }();
        t.CometChatEvent = s;
      }, function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", { value: true }), t.FETCH_ERROR = t.TYPINGNOTIFICATION_CONSTANTS = t.LOGIN_ERROR = t.MESSAGE_ERRORS = t.MESSAGES_REQUEST_ERRORS = t.USERS_REQUEST_ERRORS = t.GROUP_CREATION_ERRORS = t.INIT_ERROR = t.ERRORS = t.SERVER_ERRORS = void 0, t.SERVER_ERRORS = { AUTH_ERR: { code: "AUTH_ERR_AUTH_TOKEN_NOT_FOUND", message: "The auth token %s% does not exist. Please make sure you are logged in and have a valid auth token or try login again." } }, t.ERRORS = { PARAMETER_MISSING: { code: "MISSING_PARAMETERS", name: "Invalid or no parameter passed to the method." } }, t.INIT_ERROR = { NO_APP_ID: { code: t.ERRORS.PARAMETER_MISSING.code, name: t.ERRORS.PARAMETER_MISSING.name, message: "AppID cannot be empty. Please specify a valid appID.", details: {} } }, t.GROUP_CREATION_ERRORS = { EMPTY_PASSWORD: { code: "ERR_EMPTY_GROUP_PASS", details: void 0, message: "Password is mandatory to join a group.", name: void 0 } }, t.USERS_REQUEST_ERRORS = { EMPTY_USERS_LIST: { code: "EMPTY_USERS_LIST", name: "EMPTY_USERS_LIST", message: "The users list needs to have atleast one UID.", details: {} } }, t.MESSAGES_REQUEST_ERRORS = { REQUEST_IN_PROGRESS_ERROR: { code: "REQUEST_IN_PROGRESS", name: "REQUEST_IN_PROGRESS", message: "Request in progress.", details: {} }, NOT_ENOUGH_PARAMS: { code: "NOT_ENOUGH_PARAMETERS", name: "NOT_ENOUGH_PARAMETERS", message: "`Timestamp`, `MessageId` or `updatedAfter` is required to use the 'fetchNext()' method.", details: {} } }, t.MESSAGE_ERRORS = { INVALID_CUSTOM_DATA: { code: "-1", name: "%s_CUSTOM_DATA", message: "", details: {} } }, t.LOGIN_ERROR = { NOT_INITIALIZED: { code: "-1", name: "COMETCHAT_INITIALIZATION_NOT_DONE", message: "please initialize the cometchat before using login method.", details: {} }, UNAUTHORISED: { code: 401, name: "USER_NOT_AUTHORISED", message: "The `authToken` of the user is not authorised. Please verify again.", details: {} }, WS_CONNECTION_FAIL: { code: -1, name: "WS_CONNECTION_FAIL", message: "WS Connection failed. %s", details: {} }, WS_CONNECTION_FAIL_PORT_ERROR: { code: -1, name: "WS_CONNECTION_FAIL", message: "WS Connection failed. Trying to connect with port: %s", details: {} }, WS_CONNECTION_FALLBACK_FAIL_PORT_ERROR: { code: -1, name: "WS_CONNECTION_FALLBACK_FAIL", message: "WS Connection fallback failed. Trying to connect with port: %s", details: {} }, WS_AUTH_FAIL: { code: -1, name: "WS_AUTH_FAIL", message: "WS username/password not correct.", details: {} }, NO_INTERNET: { code: -1, name: "NO_INTERNET_CONNECTION", message: "You do not have internet connection.", details: {} }, REQUEST_IN_PROGRESS: { code: -1, name: "LOGIN_IN_PROGRESS", message: "Please wait until the previous login request ends.", details: {} } }, t.TYPINGNOTIFICATION_CONSTANTS = { TOO_MANY_REQUEST: { code: "TOO_MANY_REQUEST", name: "TOO MANY REQUEST", message: "too many request, wait for `%s` seconds before sending next request.", details: {} } }, t.FETCH_ERROR = { ERROR_IN_API_CALL: { code: "FAILED_TO_FETCH", name: "FAILED_TO_FETCH", message: "There is an unknown issue with the API request. Please check your internet connection and verify the api call.", details: {} } };
      }, function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", { value: true }), t.MessageController = void 0;
        var a = n(7), E = n(17), c = n(19), u = n(0), S = n(1), p = n(24), l = n(25), C = n(26), r = n(2), T = n(20), d = n(21), _ = n(4), g = n(12), h = n(22), A = n(3), o = function() {
          function i() {
          }
          return i.trasformJSONMessge = function(n2) {
            try {
              var e2 = null;
              n2.hasOwnProperty("rawMessage") || (e2 = JSON.parse(JSON.stringify(n2)));
              var t2 = void 0;
              switch (n2[S.MessageConstatnts.KEYS.CATEGORY]) {
                case S.MessageConstatnts.CATEGORY.ACTION:
                  t2 = p.Action.actionFromJSON(n2);
                  break;
                case S.MessageConstatnts.CATEGORY.CALL:
                  t2 = l.Call.callFromJSON(n2);
                  break;
                case S.MessageConstatnts.CATEGORY.MESSAGE:
                  switch (n2[S.MessageConstatnts.KEYS.TYPE]) {
                    case S.MessageConstatnts.TYPE.TEXT:
                      t2 = new E.TextMessage(n2[S.MessageConstatnts.KEYS.RECEIVER], n2[S.MessageConstatnts.KEYS.DATA][S.MessageConstatnts.KEYS.TEXT], n2[S.MessageConstatnts.KEYS.RECEIVER_TYPE]);
                      break;
                    case S.MessageConstatnts.TYPE.CUSTOM:
                      t2 = new d.CustomMessage(n2[S.MessageConstatnts.KEYS.RECEIVER], n2[S.MessageConstatnts.KEYS.DATA][S.MessageConstatnts.KEYS.CUSTOM_DATA], n2[S.MessageConstatnts.KEYS.RECEIVER_TYPE]);
                      break;
                    default:
                      if (t2 = new c.MediaMessage(n2[S.MessageConstatnts.KEYS.RECEIVER], n2[S.MessageConstatnts.KEYS.DATA][S.MessageConstatnts.KEYS.URL], n2[S.MessageConstatnts.KEYS.TYPE], n2[S.MessageConstatnts.KEYS.RECEIVER_TYPE]), n2.hasOwnProperty(S.MessageConstatnts.KEYS.DATA)) {
                        var o2 = n2[S.MessageConstatnts.KEYS.DATA];
                        if (o2.hasOwnProperty(S.MessageConstatnts.KEYS.ATTATCHMENTS)) {
                          var s, r2 = o2[S.MessageConstatnts.KEYS.ATTATCHMENTS];
                          new Array();
                          r2.map(function(e3) {
                            s = new T.Attachment(e3);
                          }), t2.setAttachment(s);
                        }
                        o2.hasOwnProperty(S.MessageConstatnts.KEYS.TEXT) && t2.setCaption(o2[S.MessageConstatnts.KEYS.TEXT]);
                      }
                      t2.hasOwnProperty("file") && delete t2.file;
                  }
                  break;
                case S.MessageConstatnts.CATEGORY.CUSTOM:
                  t2 = new d.CustomMessage(n2[S.MessageConstatnts.KEYS.RECEIVER], n2[S.MessageConstatnts.KEYS.DATA][S.MessageConstatnts.KEYS.CUSTOM_DATA], n2[S.MessageConstatnts.KEYS.RECEIVER_TYPE], n2.type);
                  break;
                case S.MessageConstatnts.CATEGORY.INTERACTIVE:
                  t2 = new h.InteractiveMessage(n2[S.MessageConstatnts.KEYS.RECEIVER], n2[S.MessageConstatnts.KEYS.RECEIVER_TYPE], n2.type, n2[S.MessageConstatnts.KEYS.DATA][S.MessageConstatnts.KEYS.INTERACTIVE_DATA], n2[S.MessageConstatnts.KEYS.DATA][S.MessageConstatnts.KEYS.INTERACTION_GOAL]);
              }
              n2[S.MessageConstatnts.KEYS.MY_RECEIPTS] && (n2[S.MessageConstatnts.KEYS.MY_RECEIPTS] = n2[S.MessageConstatnts.KEYS.MY_RECEIPTS], Object.keys(n2[S.MessageConstatnts.KEYS.MY_RECEIPTS]).map(function(e3) {
                var t3 = new C.MessageReceipt();
                e3 == S.DELIVERY_RECEIPTS.DELIVERED_AT && (t3.setReceiptType(t3.RECEIPT_TYPE.DELIVERY_RECEIPT), t3.setDeliveredAt(n2[S.MessageConstatnts.KEYS.MY_RECEIPTS][S.DELIVERY_RECEIPTS.DELIVERED_AT]), u.isFalsy(n2[S.MessageConstatnts.KEYS.MY_RECEIPTS][S.DELIVERY_RECEIPTS.RECIPIENT]) ? n2[S.DELIVERY_RECEIPTS.DELIVERED_TO_ME_AT] = n2[S.MessageConstatnts.KEYS.MY_RECEIPTS][S.DELIVERY_RECEIPTS.DELIVERED_AT] : t3.setSender(n2[S.MessageConstatnts.KEYS.MY_RECEIPTS][S.DELIVERY_RECEIPTS.RECIPIENT]), t3.setReceiverType(n2[S.MessageConstatnts.KEYS.RECEIVER_TYPE]), t3.setReceiver(n2[S.MessageConstatnts.KEYS.RECEIVER])), n2[S.MessageConstatnts.KEYS.MY_RECEIPTS][S.READ_RECEIPTS.READ_AT] && (t3.setReceiptType(t3.RECEIPT_TYPE.READ_RECEIPT), t3.setReadAt(n2[S.MessageConstatnts.KEYS.MY_RECEIPTS][S.READ_RECEIPTS.READ_AT]), u.isFalsy(n2[S.MessageConstatnts.KEYS.MY_RECEIPTS][S.READ_RECEIPTS.RECIPIENT]) ? n2[S.READ_RECEIPTS.READ_BY_ME_AT] = n2[S.MessageConstatnts.KEYS.MY_RECEIPTS][S.READ_RECEIPTS.READ_AT] : t3.setSender(n2[S.MessageConstatnts.KEYS.MY_RECEIPTS][S.READ_RECEIPTS.RECIPIENT]), t3.setReceiverType(n2[S.MessageConstatnts.KEYS.RECEIVER_TYPE]), t3.setReceiver(n2[S.MessageConstatnts.KEYS.RECEIVER]));
              }));
              try {
                if (Object.assign(t2, n2), (n2 = t2).parentId && (n2.parentMessageId = n2.parentId, delete n2.parentId), n2 instanceof a.BaseMessage && (u.isFalsy(e2) || n2.setRawMessage(e2)), n2 instanceof E.TextMessage)
                  i.extractDetailsFromMentions(n2), n2.setSender(n2.getSender()), n2.setReceiver(n2.getReceiver()), n2.getData()[S.MessageConstatnts.KEYS.METADATA] && n2.setMetadata(n2.getData()[S.MessageConstatnts.KEYS.METADATA]);
                else if (n2 instanceof c.MediaMessage)
                  i.extractDetailsFromMentions(n2), n2.getData()[S.MessageConstatnts.KEYS.METADATA] && n2.setMetadata(n2.getData()[S.MessageConstatnts.KEYS.METADATA]), n2.setSender(n2.getSender()), n2.setReceiver(n2.getReceiver());
                else if (n2 instanceof p.Action)
                  n2.setSender(n2.getSender()), n2.setReceiver(n2.getActionFor()), n2.setActionBy(n2.getActionBy()), n2.setActionOn(n2.getActionOn()), n2.setActionFor(n2.getActionFor()), n2.setMessage(n2.getMessage());
                else if (n2 instanceof l.Call) {
                  try {
                    n2.setSender(n2.getSender());
                  } catch (e3) {
                    u.Logger.error("MessageController: trasformJSONMessge: setSender", e3);
                  }
                  try {
                    n2.setCallInitiator(n2.getCallInitiator());
                  } catch (e3) {
                    u.Logger.error("MessageController: trasformJSONMessge: setCallInitiator", e3);
                  }
                  try {
                    n2.setReceiver(n2.getCallReceiver()), n2.setCallReceiver(n2.getCallReceiver());
                  } catch (e3) {
                    u.Logger.error("MessageController: trasformJSONMessge: setCallreceiver", e3);
                  }
                } else
                  n2 instanceof d.CustomMessage ? (n2.getData()[S.MessageConstatnts.KEYS.METADATA] && n2.setMetadata(n2.getData()[S.MessageConstatnts.KEYS.METADATA]), n2.setCustomData(n2.getData()[S.MessageConstatnts.KEYS.CUSTOM_DATA]), n2.setSubType(n2.getData()[S.MessageConstatnts.KEYS.CUSTOM_SUB_TYPE]), n2.setSender(n2.getSender()), n2.setReceiver(n2.getReceiver())) : n2 instanceof h.InteractiveMessage && (n2.getData()[S.MessageConstatnts.KEYS.METADATA] && n2.setMetadata(n2.getData()[S.MessageConstatnts.KEYS.METADATA]), n2.setInteractiveData(n2.getData()[S.MessageConstatnts.KEYS.INTERACTIVE_DATA]), n2.setInteractionGoal(n2.getInteractionGoal()), n2.setInteractions(n2.getInteractions()), n2.setSender(n2.getSender()), n2.setReceiver(n2.getReceiver()), n2.setIsSenderInteractionAllowed(n2.getData()[S.MessageConstatnts.KEYS.ALLOW_SENDER_INTERACTION]));
              } catch (e3) {
                u.Logger.error("MessageController: trasformJSONMessge: Main", e3), n2 = null;
              }
              return n2;
            } catch (e3) {
              u.Logger.error("MessageController: trasformJSONMessge", e3);
            }
          }, i.extractDetailsFromMentions = function(e2) {
            if (e2.getData()[S.MessageConstatnts.KEYS.MENTIONS]) {
              var t2 = [], n2 = false, o2 = _.CometChat.user, s = e2.getData()[S.MessageConstatnts.KEYS.MENTIONS];
              for (var r2 in s)
                r2.toString() == (null == o2 ? void 0 : o2.getUid()) && (n2 = true), t2.push(new A.User(s[r2]));
              e2.setMentionedUsers(t2), e2.setHasMentionedMe(n2);
            }
          }, i.getReceiptsFromJSON = function(s) {
            return new Promise(function(e2, t2) {
              try {
                var o2 = [];
                _.CometChat.getLoggedInUser().then(function(n2) {
                  u.isFalsy(s.receipts) ? e2([]) : (s.receipts.data.map(function(e3) {
                    var t3 = new C.MessageReceipt();
                    e3[S.DELIVERY_RECEIPTS.DELIVERED_AT] && (t3.setReceiptType(t3.RECEIPT_TYPE.DELIVERY_RECEIPT), t3.setDeliveredAt(e3[S.DELIVERY_RECEIPTS.DELIVERED_AT]), t3.setTimestamp(e3[S.DELIVERY_RECEIPTS.DELIVERED_AT]), u.isFalsy(e3[S.DELIVERY_RECEIPTS.RECIPIENT]) ? t3.setSender(n2) : t3.setSender(g.UsersController.trasformJSONUser(e3[S.DELIVERY_RECEIPTS.RECIPIENT])), t3.setReceiverType(s[S.MessageConstatnts.KEYS.RECEIVER_TYPE]), t3.setReceiver(s[S.MessageConstatnts.KEYS.RECEIVER])), e3[S.READ_RECEIPTS.READ_AT] && (t3.setReceiptType(t3.RECEIPT_TYPE.READ_RECEIPT), t3.setReadAt(e3[S.READ_RECEIPTS.READ_AT]), t3.setTimestamp(e3[e3[S.READ_RECEIPTS.READ_AT]]), u.isFalsy(e3[S.READ_RECEIPTS.RECIPIENT]) ? t3.setSender(n2) : t3.setSender(g.UsersController.trasformJSONUser(e3[S.READ_RECEIPTS.RECIPIENT])), t3.setReceiverType(s[S.MessageConstatnts.KEYS.RECEIVER_TYPE]), t3.setReceiver(s[S.MessageConstatnts.KEYS.RECEIVER])), o2.push(t3);
                  }), e2(o2));
                });
              } catch (e3) {
                t2(new r.CometChatException(e3));
              }
            });
          }, i;
        }();
        t.MessageController = o;
      }, function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", { value: true }), t.UsersController = void 0;
        var o = n(3), s = n(0), r = function() {
          function e2() {
          }
          return e2.trasformJSONUser = function(e3) {
            var t2;
            try {
              e3.uid = e3.uid.toString(), e3.name = e3.name.toString(), e3.status && "offline" !== e3.status ? e3.status = "online" : e3.status = "offline", t2 = new o.User(e3), Object.assign(t2, e3), e3 = t2;
            } catch (e4) {
              s.Logger.error("UsersController:transformJSONUser", e4);
            }
            return e3;
          }, e2;
        }();
        t.UsersController = r;
      }, function(e, t, n) {
        (function(o) {
          e.exports = function s(r, i, a) {
            function E(n2, e3) {
              if (!i[n2]) {
                if (!r[n2]) {
                  if (c)
                    return c(n2, true);
                  var t2 = new Error("Cannot find module '" + n2 + "'");
                  throw t2.code = "MODULE_NOT_FOUND", t2;
                }
                var o2 = i[n2] = { exports: {} };
                r[n2][0].call(o2.exports, function(e4) {
                  var t3 = r[n2][1][e4];
                  return E(t3 || e4);
                }, o2, o2.exports, s, r, i, a);
              }
              return i[n2].exports;
            }
            for (var c = false, e2 = 0; e2 < a.length; e2++)
              E(a[e2]);
            return E;
          }({ 1: [function(e2, u, t2) {
            (function(t3) {
              "use strict";
              var n2, o2, e3 = t3.MutationObserver || t3.WebKitMutationObserver;
              if (e3) {
                var s = 0, r = new e3(c), i = t3.document.createTextNode("");
                r.observe(i, { characterData: true }), n2 = function() {
                  i.data = s = ++s % 2;
                };
              } else if (t3.setImmediate || void 0 === t3.MessageChannel)
                n2 = "document" in t3 && "onreadystatechange" in t3.document.createElement("script") ? function() {
                  var e4 = t3.document.createElement("script");
                  e4.onreadystatechange = function() {
                    c(), e4.onreadystatechange = null, e4.parentNode.removeChild(e4), e4 = null;
                  }, t3.document.documentElement.appendChild(e4);
                } : function() {
                  setTimeout(c, 0);
                };
              else {
                var a = new t3.MessageChannel();
                a.port1.onmessage = c, n2 = function() {
                  a.port2.postMessage(0);
                };
              }
              var E = [];
              function c() {
                var e4, t4;
                o2 = true;
                for (var n3 = E.length; n3; ) {
                  for (t4 = E, E = [], e4 = -1; ++e4 < n3; )
                    t4[e4]();
                  n3 = E.length;
                }
                o2 = false;
              }
              u.exports = function(e4) {
                1 !== E.push(e4) || o2 || n2();
              };
            }).call(this, void 0 !== o ? o : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {});
          }, {}], 2: [function(e2, t2, n2) {
            "use strict";
            var s = e2(1);
            function c() {
            }
            var u = {}, r = ["REJECTED"], i = ["FULFILLED"], a = ["PENDING"];
            function o2(e3) {
              if ("function" != typeof e3)
                throw new TypeError("resolver must be a function");
              this.state = a, this.queue = [], this.outcome = void 0, e3 !== c && l(this, e3);
            }
            function E(e3, t3, n3) {
              this.promise = e3, "function" == typeof t3 && (this.onFulfilled = t3, this.callFulfilled = this.otherCallFulfilled), "function" == typeof n3 && (this.onRejected = n3, this.callRejected = this.otherCallRejected);
            }
            function S(t3, n3, o3) {
              s(function() {
                var e3;
                try {
                  e3 = n3(o3);
                } catch (e4) {
                  return u.reject(t3, e4);
                }
                e3 === t3 ? u.reject(t3, new TypeError("Cannot resolve promise with itself")) : u.resolve(t3, e3);
              });
            }
            function p(e3) {
              var t3 = e3 && e3.then;
              if (e3 && ("object" == typeof e3 || "function" == typeof e3) && "function" == typeof t3)
                return function() {
                  t3.apply(e3, arguments);
                };
            }
            function l(t3, e3) {
              var n3 = false;
              function o3(e4) {
                n3 || (n3 = true, u.reject(t3, e4));
              }
              function s2(e4) {
                n3 || (n3 = true, u.resolve(t3, e4));
              }
              var r2 = C(function() {
                e3(s2, o3);
              });
              "error" === r2.status && o3(r2.value);
            }
            function C(e3, t3) {
              var n3 = {};
              try {
                n3.value = e3(t3), n3.status = "success";
              } catch (e4) {
                n3.status = "error", n3.value = e4;
              }
              return n3;
            }
            (t2.exports = o2).prototype.catch = function(e3) {
              return this.then(null, e3);
            }, o2.prototype.then = function(e3, t3) {
              if ("function" != typeof e3 && this.state === i || "function" != typeof t3 && this.state === r)
                return this;
              var n3 = new this.constructor(c);
              if (this.state !== a) {
                var o3 = this.state === i ? e3 : t3;
                S(n3, o3, this.outcome);
              } else
                this.queue.push(new E(n3, e3, t3));
              return n3;
            }, E.prototype.callFulfilled = function(e3) {
              u.resolve(this.promise, e3);
            }, E.prototype.otherCallFulfilled = function(e3) {
              S(this.promise, this.onFulfilled, e3);
            }, E.prototype.callRejected = function(e3) {
              u.reject(this.promise, e3);
            }, E.prototype.otherCallRejected = function(e3) {
              S(this.promise, this.onRejected, e3);
            }, u.resolve = function(e3, t3) {
              var n3 = C(p, t3);
              if ("error" === n3.status)
                return u.reject(e3, n3.value);
              var o3 = n3.value;
              if (o3)
                l(e3, o3);
              else {
                e3.state = i, e3.outcome = t3;
                for (var s2 = -1, r2 = e3.queue.length; ++s2 < r2; )
                  e3.queue[s2].callFulfilled(t3);
              }
              return e3;
            }, u.reject = function(e3, t3) {
              e3.state = r, e3.outcome = t3;
              for (var n3 = -1, o3 = e3.queue.length; ++n3 < o3; )
                e3.queue[n3].callRejected(t3);
              return e3;
            }, o2.resolve = function(e3) {
              return e3 instanceof this ? e3 : u.resolve(new this(c), e3);
            }, o2.reject = function(e3) {
              var t3 = new this(c);
              return u.reject(t3, e3);
            }, o2.all = function(e3) {
              var n3 = this;
              if ("[object Array]" !== Object.prototype.toString.call(e3))
                return this.reject(new TypeError("must be an array"));
              var o3 = e3.length, s2 = false;
              if (!o3)
                return this.resolve([]);
              for (var r2 = new Array(o3), i2 = 0, t3 = -1, a2 = new this(c); ++t3 < o3; )
                E2(e3[t3], t3);
              return a2;
              function E2(e4, t4) {
                n3.resolve(e4).then(function(e5) {
                  r2[t4] = e5, ++i2 !== o3 || s2 || (s2 = true, u.resolve(a2, r2));
                }, function(e5) {
                  s2 || (s2 = true, u.reject(a2, e5));
                });
              }
            }, o2.race = function(e3) {
              var t3 = this;
              if ("[object Array]" !== Object.prototype.toString.call(e3))
                return this.reject(new TypeError("must be an array"));
              var n3 = e3.length, o3 = false;
              if (!n3)
                return this.resolve([]);
              for (var s2, r2 = -1, i2 = new this(c); ++r2 < n3; )
                s2 = e3[r2], t3.resolve(s2).then(function(e4) {
                  o3 || (o3 = true, u.resolve(i2, e4));
                }, function(e4) {
                  o3 || (o3 = true, u.reject(i2, e4));
                });
              return i2;
            };
          }, { 1: 1 }], 3: [function(t2, e2, n2) {
            (function(e3) {
              "use strict";
              "function" != typeof e3.Promise && (e3.Promise = t2(2));
            }).call(this, void 0 !== o ? o : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {});
          }, { 2: 2 }], 4: [function(e2, t2, n2) {
            "use strict";
            var o2 = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e3) {
              return typeof e3;
            } : function(e3) {
              return e3 && "function" == typeof Symbol && e3.constructor === Symbol && e3 !== Symbol.prototype ? "symbol" : typeof e3;
            }, E = function() {
              try {
                if ("undefined" != typeof indexedDB)
                  return indexedDB;
                if ("undefined" != typeof webkitIndexedDB)
                  return webkitIndexedDB;
                if ("undefined" != typeof mozIndexedDB)
                  return mozIndexedDB;
                if ("undefined" != typeof OIndexedDB)
                  return OIndexedDB;
                if ("undefined" != typeof msIndexedDB)
                  return msIndexedDB;
              } catch (e3) {
                return;
              }
            }();
            function i(t3, n3) {
              t3 = t3 || [], n3 = n3 || {};
              try {
                return new Blob(t3, n3);
              } catch (e3) {
                if ("TypeError" !== e3.name)
                  throw e3;
                for (var o3 = "undefined" != typeof BlobBuilder ? BlobBuilder : "undefined" != typeof MSBlobBuilder ? MSBlobBuilder : "undefined" != typeof MozBlobBuilder ? MozBlobBuilder : WebKitBlobBuilder, s2 = new o3(), r2 = 0; r2 < t3.length; r2 += 1)
                  s2.append(t3[r2]);
                return s2.getBlob(n3.type);
              }
            }
            "undefined" == typeof Promise && e2(3);
            var S = Promise;
            function p(e3, t3) {
              t3 && e3.then(function(e4) {
                t3(null, e4);
              }, function(e4) {
                t3(e4);
              });
            }
            function c(e3, t3, n3) {
              "function" == typeof t3 && e3.then(t3), "function" == typeof n3 && e3.catch(n3);
            }
            function u(e3) {
              return "string" != typeof e3 && (e3 = String(e3)), e3;
            }
            function r() {
              if (arguments.length && "function" == typeof arguments[arguments.length - 1])
                return arguments[arguments.length - 1];
            }
            var a = "local-forage-detect-blob-support", s = void 0, l = {}, C = Object.prototype.toString, T = "readonly", d = "readwrite";
            function _(e3) {
              return "boolean" == typeof s ? S.resolve(s) : (o3 = e3, new S(function(n3) {
                var e4 = o3.transaction(a, d), t3 = i([""]);
                e4.objectStore(a).put(t3, "key"), e4.onabort = function(e5) {
                  e5.preventDefault(), e5.stopPropagation(), n3(false);
                }, e4.oncomplete = function() {
                  var e5 = navigator.userAgent.match(/Chrome\/(\d+)/), t4 = navigator.userAgent.match(/Edge\//);
                  n3(t4 || !e5 || 43 <= parseInt(e5[1], 10));
                };
              }).catch(function() {
                return false;
              })).then(function(e4) {
                return s = e4;
              });
              var o3;
            }
            function g(e3) {
              var t3 = l[e3.name], n3 = {};
              n3.promise = new S(function(e4, t4) {
                n3.resolve = e4, n3.reject = t4;
              }), t3.deferredOperations.push(n3), t3.dbReady ? t3.dbReady = t3.dbReady.then(function() {
                return n3.promise;
              }) : t3.dbReady = n3.promise;
            }
            function h(e3) {
              var t3 = l[e3.name], n3 = t3.deferredOperations.pop();
              if (n3)
                return n3.resolve(), n3.promise;
            }
            function A(e3, t3) {
              var n3 = l[e3.name], o3 = n3.deferredOperations.pop();
              if (o3)
                return o3.reject(t3), o3.promise;
            }
            function R(s2, r2) {
              return new S(function(t3, n3) {
                if (l[s2.name] = l[s2.name] || { forages: [], db: null, dbReady: null, deferredOperations: [] }, s2.db) {
                  if (!r2)
                    return t3(s2.db);
                  g(s2), s2.db.close();
                }
                var e3 = [s2.name];
                r2 && e3.push(s2.version);
                var o3 = E.open.apply(E, e3);
                r2 && (o3.onupgradeneeded = function(e4) {
                  var t4 = o3.result;
                  try {
                    t4.createObjectStore(s2.storeName), e4.oldVersion <= 1 && t4.createObjectStore(a);
                  } catch (e5) {
                    if ("ConstraintError" !== e5.name)
                      throw e5;
                  }
                }), o3.onerror = function(e4) {
                  e4.preventDefault(), n3(o3.error);
                }, o3.onsuccess = function() {
                  var e4 = o3.result;
                  e4.onversionchange = function(e5) {
                    e5.target.close();
                  }, t3(e4), h(s2);
                };
              });
            }
            function I(e3) {
              return R(e3, false);
            }
            function f(e3) {
              return R(e3, true);
            }
            function O(e3, t3) {
              if (!e3.db)
                return true;
              var n3 = !e3.db.objectStoreNames.contains(e3.storeName), o3 = e3.version < e3.db.version, s2 = e3.version > e3.db.version;
              if (o3 && (e3.version, e3.version = e3.db.version), s2 || n3) {
                if (n3) {
                  var r2 = e3.db.version + 1;
                  r2 > e3.version && (e3.version = r2);
                }
                return true;
              }
              return false;
            }
            function N(e3) {
              var t3 = function(e4) {
                for (var t4 = e4.length, n3 = new ArrayBuffer(t4), o3 = new Uint8Array(n3), s2 = 0; s2 < t4; s2++)
                  o3[s2] = e4.charCodeAt(s2);
                return n3;
              }(atob(e3.data));
              return i([t3], { type: e3.type });
            }
            function y(e3) {
              return e3 && e3.__local_forage_encoded_blob;
            }
            function m(e3) {
              var t3 = this, n3 = t3._initReady().then(function() {
                var e4 = l[t3._dbInfo.name];
                if (e4 && e4.dbReady)
                  return e4.dbReady;
              });
              return c(n3, e3, e3), n3;
            }
            function M(t3, n3, o3, s2) {
              void 0 === s2 && (s2 = 1);
              try {
                var e3 = t3.db.transaction(t3.storeName, n3);
                o3(null, e3);
              } catch (e4) {
                if (0 < s2 && (!t3.db || "InvalidStateError" === e4.name || "NotFoundError" === e4.name))
                  return S.resolve().then(function() {
                    if (!t3.db || "NotFoundError" === e4.name && !t3.db.objectStoreNames.contains(t3.storeName) && t3.version <= t3.db.version)
                      return t3.db && (t3.version = t3.db.version + 1), f(t3);
                  }).then(function() {
                    return function(n4) {
                      g(n4);
                      for (var o4 = l[n4.name], s3 = o4.forages, e5 = 0; e5 < s3.length; e5++) {
                        var t4 = s3[e5];
                        t4._dbInfo.db && (t4._dbInfo.db.close(), t4._dbInfo.db = null);
                      }
                      return n4.db = null, I(n4).then(function(e6) {
                        return n4.db = e6, O(n4) ? f(n4) : e6;
                      }).then(function(e6) {
                        n4.db = o4.db = e6;
                        for (var t5 = 0; t5 < s3.length; t5++)
                          s3[t5]._dbInfo.db = e6;
                      }).catch(function(e6) {
                        throw A(n4, e6), e6;
                      });
                    }(t3).then(function() {
                      M(t3, n3, o3, s2 - 1);
                    });
                  }).catch(o3);
                o3(e4);
              }
            }
            var v = { _driver: "asyncStorage", _initStorage: function(e3) {
              var o3 = this, s2 = { db: null };
              if (e3)
                for (var t3 in e3)
                  s2[t3] = e3[t3];
              var r2 = l[s2.name];
              r2 || (r2 = { forages: [], db: null, dbReady: null, deferredOperations: [] }, l[s2.name] = r2), r2.forages.push(o3), o3._initReady || (o3._initReady = o3.ready, o3.ready = m);
              var n3 = [];
              function i2() {
                return S.resolve();
              }
              for (var a2 = 0; a2 < r2.forages.length; a2++) {
                var E2 = r2.forages[a2];
                E2 !== o3 && n3.push(E2._initReady().catch(i2));
              }
              var c2 = r2.forages.slice(0);
              return S.all(n3).then(function() {
                return s2.db = r2.db, I(s2);
              }).then(function(e4) {
                return s2.db = e4, O(s2, o3._defaultConfig.version) ? f(s2) : e4;
              }).then(function(e4) {
                s2.db = r2.db = e4, o3._dbInfo = s2;
                for (var t4 = 0; t4 < c2.length; t4++) {
                  var n4 = c2[t4];
                  n4 !== o3 && (n4._dbInfo.db = s2.db, n4._dbInfo.version = s2.version);
                }
              });
            }, _support: function() {
              try {
                if (!E || !E.open)
                  return false;
                var e3 = "undefined" != typeof openDatabase && /(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent) && !/Chrome/.test(navigator.userAgent) && !/BlackBerry/.test(navigator.platform), t3 = "function" == typeof fetch && -1 !== fetch.toString().indexOf("[native code");
                return (!e3 || t3) && "undefined" != typeof indexedDB && "undefined" != typeof IDBKeyRange;
              } catch (e4) {
                return false;
              }
            }(), iterate: function(a2, e3) {
              var E2 = this, t3 = new S(function(r2, i2) {
                E2.ready().then(function() {
                  M(E2._dbInfo, T, function(e4, t4) {
                    if (e4)
                      return i2(e4);
                    try {
                      var n3 = t4.objectStore(E2._dbInfo.storeName), o3 = n3.openCursor(), s2 = 1;
                      o3.onsuccess = function() {
                        var e5 = o3.result;
                        if (e5) {
                          var t5 = e5.value;
                          y(t5) && (t5 = N(t5));
                          var n4 = a2(t5, e5.key, s2++);
                          void 0 !== n4 ? r2(n4) : e5.continue();
                        } else
                          r2();
                      }, o3.onerror = function() {
                        i2(o3.error);
                      };
                    } catch (e5) {
                      i2(e5);
                    }
                  });
                }).catch(i2);
              });
              return p(t3, e3), t3;
            }, getItem: function(i2, e3) {
              var a2 = this;
              i2 = u(i2);
              var t3 = new S(function(s2, r2) {
                a2.ready().then(function() {
                  M(a2._dbInfo, T, function(e4, t4) {
                    if (e4)
                      return r2(e4);
                    try {
                      var n3 = t4.objectStore(a2._dbInfo.storeName), o3 = n3.get(i2);
                      o3.onsuccess = function() {
                        var e5 = o3.result;
                        void 0 === e5 && (e5 = null), y(e5) && (e5 = N(e5)), s2(e5);
                      }, o3.onerror = function() {
                        r2(o3.error);
                      };
                    } catch (e5) {
                      r2(e5);
                    }
                  });
                }).catch(r2);
              });
              return p(t3, e3), t3;
            }, setItem: function(a2, t3, e3) {
              var E2 = this;
              a2 = u(a2);
              var n3 = new S(function(r2, i2) {
                var e4;
                E2.ready().then(function() {
                  return e4 = E2._dbInfo, "[object Blob]" === C.call(t3) ? _(e4.db).then(function(e5) {
                    return e5 ? t3 : (o3 = t3, new S(function(n4, e6) {
                      var t4 = new FileReader();
                      t4.onerror = e6, t4.onloadend = function(e7) {
                        var t5 = btoa(e7.target.result || "");
                        n4({ __local_forage_encoded_blob: true, data: t5, type: o3.type });
                      }, t4.readAsBinaryString(o3);
                    }));
                    var o3;
                  }) : t3;
                }).then(function(s2) {
                  M(E2._dbInfo, d, function(e5, t4) {
                    if (e5)
                      return i2(e5);
                    try {
                      var n4 = t4.objectStore(E2._dbInfo.storeName);
                      null === s2 && (s2 = void 0);
                      var o3 = n4.put(s2, a2);
                      t4.oncomplete = function() {
                        void 0 === s2 && (s2 = null), r2(s2);
                      }, t4.onabort = t4.onerror = function() {
                        var e6 = o3.error ? o3.error : o3.transaction.error;
                        i2(e6);
                      };
                    } catch (e6) {
                      i2(e6);
                    }
                  });
                }).catch(i2);
              });
              return p(n3, e3), n3;
            }, removeItem: function(i2, e3) {
              var a2 = this;
              i2 = u(i2);
              var t3 = new S(function(s2, r2) {
                a2.ready().then(function() {
                  M(a2._dbInfo, d, function(e4, t4) {
                    if (e4)
                      return r2(e4);
                    try {
                      var n3 = t4.objectStore(a2._dbInfo.storeName), o3 = n3.delete(i2);
                      t4.oncomplete = function() {
                        s2();
                      }, t4.onerror = function() {
                        r2(o3.error);
                      }, t4.onabort = function() {
                        var e5 = o3.error ? o3.error : o3.transaction.error;
                        r2(e5);
                      };
                    } catch (e5) {
                      r2(e5);
                    }
                  });
                }).catch(r2);
              });
              return p(t3, e3), t3;
            }, clear: function(e3) {
              var i2 = this, t3 = new S(function(s2, r2) {
                i2.ready().then(function() {
                  M(i2._dbInfo, d, function(e4, t4) {
                    if (e4)
                      return r2(e4);
                    try {
                      var n3 = t4.objectStore(i2._dbInfo.storeName), o3 = n3.clear();
                      t4.oncomplete = function() {
                        s2();
                      }, t4.onabort = t4.onerror = function() {
                        var e5 = o3.error ? o3.error : o3.transaction.error;
                        r2(e5);
                      };
                    } catch (e5) {
                      r2(e5);
                    }
                  });
                }).catch(r2);
              });
              return p(t3, e3), t3;
            }, length: function(e3) {
              var i2 = this, t3 = new S(function(s2, r2) {
                i2.ready().then(function() {
                  M(i2._dbInfo, T, function(e4, t4) {
                    if (e4)
                      return r2(e4);
                    try {
                      var n3 = t4.objectStore(i2._dbInfo.storeName), o3 = n3.count();
                      o3.onsuccess = function() {
                        s2(o3.result);
                      }, o3.onerror = function() {
                        r2(o3.error);
                      };
                    } catch (e5) {
                      r2(e5);
                    }
                  });
                }).catch(r2);
              });
              return p(t3, e3), t3;
            }, key: function(a2, e3) {
              var E2 = this, t3 = new S(function(r2, i2) {
                a2 < 0 ? r2(null) : E2.ready().then(function() {
                  M(E2._dbInfo, T, function(e4, t4) {
                    if (e4)
                      return i2(e4);
                    try {
                      var n3 = t4.objectStore(E2._dbInfo.storeName), o3 = false, s2 = n3.openKeyCursor();
                      s2.onsuccess = function() {
                        var e5 = s2.result;
                        e5 ? 0 === a2 ? r2(e5.key) : o3 ? r2(e5.key) : (o3 = true, e5.advance(a2)) : r2(null);
                      }, s2.onerror = function() {
                        i2(s2.error);
                      };
                    } catch (e5) {
                      i2(e5);
                    }
                  });
                }).catch(i2);
              });
              return p(t3, e3), t3;
            }, keys: function(e3) {
              var a2 = this, t3 = new S(function(r2, i2) {
                a2.ready().then(function() {
                  M(a2._dbInfo, T, function(e4, t4) {
                    if (e4)
                      return i2(e4);
                    try {
                      var n3 = t4.objectStore(a2._dbInfo.storeName), o3 = n3.openKeyCursor(), s2 = [];
                      o3.onsuccess = function() {
                        var e5 = o3.result;
                        e5 ? (s2.push(e5.key), e5.continue()) : r2(s2);
                      }, o3.onerror = function() {
                        i2(o3.error);
                      };
                    } catch (e5) {
                      i2(e5);
                    }
                  });
                }).catch(i2);
              });
              return p(t3, e3), t3;
            }, dropInstance: function(a2, e3) {
              e3 = r.apply(this, arguments);
              var t3, n3 = this.config();
              if ((a2 = "function" != typeof a2 && a2 || {}).name || (a2.name = a2.name || n3.name, a2.storeName = a2.storeName || n3.storeName), a2.name) {
                var o3 = a2.name === n3.name && this._dbInfo.db, s2 = o3 ? S.resolve(this._dbInfo.db) : I(a2).then(function(e4) {
                  var t4 = l[a2.name], n4 = t4.forages;
                  t4.db = e4;
                  for (var o4 = 0; o4 < n4.length; o4++)
                    n4[o4]._dbInfo.db = e4;
                  return e4;
                });
                t3 = a2.storeName ? s2.then(function(e4) {
                  if (e4.objectStoreNames.contains(a2.storeName)) {
                    var s3 = e4.version + 1;
                    g(a2);
                    var o4 = l[a2.name], r2 = o4.forages;
                    e4.close();
                    for (var t4 = 0; t4 < r2.length; t4++) {
                      var n4 = r2[t4];
                      n4._dbInfo.db = null, n4._dbInfo.version = s3;
                    }
                    var i2 = new S(function(t5, n5) {
                      var o5 = E.open(a2.name, s3);
                      o5.onerror = function(e5) {
                        var t6 = o5.result;
                        t6.close(), n5(e5);
                      }, o5.onupgradeneeded = function() {
                        var e5 = o5.result;
                        e5.deleteObjectStore(a2.storeName);
                      }, o5.onsuccess = function() {
                        var e5 = o5.result;
                        e5.close(), t5(e5);
                      };
                    });
                    return i2.then(function(e5) {
                      o4.db = e5;
                      for (var t5 = 0; t5 < r2.length; t5++) {
                        var n5 = r2[t5];
                        n5._dbInfo.db = e5, h(n5._dbInfo);
                      }
                    }).catch(function(e5) {
                      throw (A(a2, e5) || S.resolve()).catch(function() {
                      }), e5;
                    });
                  }
                }) : s2.then(function(e4) {
                  g(a2);
                  var o4 = l[a2.name], s3 = o4.forages;
                  e4.close();
                  for (var t4 = 0; t4 < s3.length; t4++) {
                    var n4 = s3[t4];
                    n4._dbInfo.db = null;
                  }
                  var r2 = new S(function(t5, n5) {
                    var o5 = E.deleteDatabase(a2.name);
                    o5.onerror = function() {
                      var e5 = o5.result;
                      e5 && e5.close(), n5(o5.error);
                    }, o5.onblocked = function() {
                    }, o5.onsuccess = function() {
                      var e5 = o5.result;
                      e5 && e5.close(), t5(e5);
                    };
                  });
                  return r2.then(function(e5) {
                    o4.db = e5;
                    for (var t5 = 0; t5 < s3.length; t5++) {
                      var n5 = s3[t5];
                      h(n5._dbInfo);
                    }
                  }).catch(function(e5) {
                    throw (A(a2, e5) || S.resolve()).catch(function() {
                    }), e5;
                  });
                });
              } else
                t3 = S.reject("Invalid arguments");
              return p(t3, e3), t3;
            } }, P = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", L = /^~~local_forage_type~([^~]+)~/, D = "__lfsc__:", U = D.length, Y = "arbf", G = "blob", w = U + Y.length, K = Object.prototype.toString;
            function b(e3) {
              var t3, n3, o3, s2, r2, i2 = 0.75 * e3.length, a2 = e3.length, E2 = 0;
              "=" === e3[e3.length - 1] && (i2--, "=" === e3[e3.length - 2] && i2--);
              var c2 = new ArrayBuffer(i2), u2 = new Uint8Array(c2);
              for (t3 = 0; t3 < a2; t3 += 4)
                n3 = P.indexOf(e3[t3]), o3 = P.indexOf(e3[t3 + 1]), s2 = P.indexOf(e3[t3 + 2]), r2 = P.indexOf(e3[t3 + 3]), u2[E2++] = n3 << 2 | o3 >> 4, u2[E2++] = (15 & o3) << 4 | s2 >> 2, u2[E2++] = (3 & s2) << 6 | 63 & r2;
              return c2;
            }
            function B(e3) {
              var t3, n3 = new Uint8Array(e3), o3 = "";
              for (t3 = 0; t3 < n3.length; t3 += 3)
                o3 += P[n3[t3] >> 2], o3 += P[(3 & n3[t3]) << 4 | n3[t3 + 1] >> 4], o3 += P[(15 & n3[t3 + 1]) << 2 | n3[t3 + 2] >> 6], o3 += P[63 & n3[t3 + 2]];
              return n3.length % 3 == 2 ? o3 = o3.substring(0, o3.length - 1) + "=" : n3.length % 3 == 1 && (o3 = o3.substring(0, o3.length - 2) + "=="), o3;
            }
            var F = { serialize: function(t3, n3) {
              var e3 = "";
              if (t3 && (e3 = K.call(t3)), t3 && ("[object ArrayBuffer]" === e3 || t3.buffer && "[object ArrayBuffer]" === K.call(t3.buffer))) {
                var o3, s2 = D;
                t3 instanceof ArrayBuffer ? (o3 = t3, s2 += Y) : (o3 = t3.buffer, "[object Int8Array]" === e3 ? s2 += "si08" : "[object Uint8Array]" === e3 ? s2 += "ui08" : "[object Uint8ClampedArray]" === e3 ? s2 += "uic8" : "[object Int16Array]" === e3 ? s2 += "si16" : "[object Uint16Array]" === e3 ? s2 += "ur16" : "[object Int32Array]" === e3 ? s2 += "si32" : "[object Uint32Array]" === e3 ? s2 += "ui32" : "[object Float32Array]" === e3 ? s2 += "fl32" : "[object Float64Array]" === e3 ? s2 += "fl64" : n3(new Error("Failed to get type for BinaryArray"))), n3(s2 + B(o3));
              } else if ("[object Blob]" === e3) {
                var r2 = new FileReader();
                r2.onload = function() {
                  var e4 = "~~local_forage_type~" + t3.type + "~" + B(this.result);
                  n3(D + G + e4);
                }, r2.readAsArrayBuffer(t3);
              } else
                try {
                  n3(JSON.stringify(t3));
                } catch (e4) {
                  n3(null, e4);
                }
            }, deserialize: function(e3) {
              if (e3.substring(0, U) !== D)
                return JSON.parse(e3);
              var t3, n3 = e3.substring(w), o3 = e3.substring(U, w);
              if (o3 === G && L.test(n3)) {
                var s2 = n3.match(L);
                t3 = s2[1], n3 = n3.substring(s2[0].length);
              }
              var r2 = b(n3);
              switch (o3) {
                case Y:
                  return r2;
                case G:
                  return i([r2], { type: t3 });
                case "si08":
                  return new Int8Array(r2);
                case "ui08":
                  return new Uint8Array(r2);
                case "uic8":
                  return new Uint8ClampedArray(r2);
                case "si16":
                  return new Int16Array(r2);
                case "ur16":
                  return new Uint16Array(r2);
                case "si32":
                  return new Int32Array(r2);
                case "ui32":
                  return new Uint32Array(r2);
                case "fl32":
                  return new Float32Array(r2);
                case "fl64":
                  return new Float64Array(r2);
                default:
                  throw new Error("Unkown type: " + o3);
              }
            }, stringToBuffer: b, bufferToString: B };
            function x(e3, t3, n3, o3) {
              e3.executeSql("CREATE TABLE IF NOT EXISTS " + t3.storeName + " (id INTEGER PRIMARY KEY, key unique, value)", [], n3, o3);
            }
            function V(e3, o3, s2, r2, i2, a2) {
              e3.executeSql(s2, r2, i2, function(e4, n3) {
                n3.code === n3.SYNTAX_ERR ? e4.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?", [o3.storeName], function(e5, t3) {
                  t3.rows.length ? a2(e5, n3) : x(e5, o3, function() {
                    e5.executeSql(s2, r2, i2, a2);
                  }, a2);
                }, a2) : a2(e4, n3);
              }, a2);
            }
            function k(i2, e3, a2, E2) {
              var c2 = this;
              i2 = u(i2);
              var t3 = new S(function(s2, r2) {
                c2.ready().then(function() {
                  void 0 === e3 && (e3 = null);
                  var n3 = e3, o3 = c2._dbInfo;
                  o3.serializer.serialize(e3, function(t4, e4) {
                    e4 ? r2(e4) : o3.db.transaction(function(e5) {
                      V(e5, o3, "INSERT OR REPLACE INTO " + o3.storeName + " (key, value) VALUES (?, ?)", [i2, t4], function() {
                        s2(n3);
                      }, function(e6, t5) {
                        r2(t5);
                      });
                    }, function(e5) {
                      if (e5.code === e5.QUOTA_ERR) {
                        if (0 < E2)
                          return void s2(k.apply(c2, [i2, n3, a2, E2 - 1]));
                        r2(e5);
                      }
                    });
                  });
                }).catch(r2);
              });
              return p(t3, a2), t3;
            }
            var J = { _driver: "webSQLStorage", _initStorage: function(e3) {
              var o3 = this, s2 = { db: null };
              if (e3)
                for (var t3 in e3)
                  s2[t3] = "string" != typeof e3[t3] ? e3[t3].toString() : e3[t3];
              var n3 = new S(function(t4, n4) {
                try {
                  s2.db = openDatabase(s2.name, String(s2.version), s2.description, s2.size);
                } catch (e4) {
                  return n4(e4);
                }
                s2.db.transaction(function(e4) {
                  x(e4, s2, function() {
                    o3._dbInfo = s2, t4();
                  }, function(e5, t5) {
                    n4(t5);
                  });
                }, n4);
              });
              return s2.serializer = F, n3;
            }, _support: "function" == typeof openDatabase, iterate: function(c2, e3) {
              var t3 = this, n3 = new S(function(E2, n4) {
                t3.ready().then(function() {
                  var a2 = t3._dbInfo;
                  a2.db.transaction(function(e4) {
                    V(e4, a2, "SELECT * FROM " + a2.storeName, [], function(e5, t4) {
                      for (var n5 = t4.rows, o3 = n5.length, s2 = 0; s2 < o3; s2++) {
                        var r2 = n5.item(s2), i2 = r2.value;
                        if (i2 && (i2 = a2.serializer.deserialize(i2)), void 0 !== (i2 = c2(i2, r2.key, s2 + 1)))
                          return void E2(i2);
                      }
                      E2();
                    }, function(e5, t4) {
                      n4(t4);
                    });
                  });
                }).catch(n4);
              });
              return p(n3, e3), n3;
            }, getItem: function(t3, e3) {
              var r2 = this;
              t3 = u(t3);
              var n3 = new S(function(s2, n4) {
                r2.ready().then(function() {
                  var o3 = r2._dbInfo;
                  o3.db.transaction(function(e4) {
                    V(e4, o3, "SELECT * FROM " + o3.storeName + " WHERE key = ? LIMIT 1", [t3], function(e5, t4) {
                      var n5 = t4.rows.length ? t4.rows.item(0).value : null;
                      n5 && (n5 = o3.serializer.deserialize(n5)), s2(n5);
                    }, function(e5, t4) {
                      n4(t4);
                    });
                  });
                }).catch(n4);
              });
              return p(n3, e3), n3;
            }, setItem: function(e3, t3, n3) {
              return k.apply(this, [e3, t3, n3, 1]);
            }, removeItem: function(s2, e3) {
              var r2 = this;
              s2 = u(s2);
              var t3 = new S(function(n3, o3) {
                r2.ready().then(function() {
                  var t4 = r2._dbInfo;
                  t4.db.transaction(function(e4) {
                    V(e4, t4, "DELETE FROM " + t4.storeName + " WHERE key = ?", [s2], function() {
                      n3();
                    }, function(e5, t5) {
                      o3(t5);
                    });
                  });
                }).catch(o3);
              });
              return p(t3, e3), t3;
            }, clear: function(e3) {
              var s2 = this, t3 = new S(function(n3, o3) {
                s2.ready().then(function() {
                  var t4 = s2._dbInfo;
                  t4.db.transaction(function(e4) {
                    V(e4, t4, "DELETE FROM " + t4.storeName, [], function() {
                      n3();
                    }, function(e5, t5) {
                      o3(t5);
                    });
                  });
                }).catch(o3);
              });
              return p(t3, e3), t3;
            }, length: function(e3) {
              var s2 = this, t3 = new S(function(o3, n3) {
                s2.ready().then(function() {
                  var t4 = s2._dbInfo;
                  t4.db.transaction(function(e4) {
                    V(e4, t4, "SELECT COUNT(key) as c FROM " + t4.storeName, [], function(e5, t5) {
                      var n4 = t5.rows.item(0).c;
                      o3(n4);
                    }, function(e5, t5) {
                      n3(t5);
                    });
                  });
                }).catch(n3);
              });
              return p(t3, e3), t3;
            }, key: function(s2, e3) {
              var r2 = this, t3 = new S(function(o3, n3) {
                r2.ready().then(function() {
                  var t4 = r2._dbInfo;
                  t4.db.transaction(function(e4) {
                    V(e4, t4, "SELECT key FROM " + t4.storeName + " WHERE id = ? LIMIT 1", [s2 + 1], function(e5, t5) {
                      var n4 = t5.rows.length ? t5.rows.item(0).key : null;
                      o3(n4);
                    }, function(e5, t5) {
                      n3(t5);
                    });
                  });
                }).catch(n3);
              });
              return p(t3, e3), t3;
            }, keys: function(e3) {
              var o3 = this, t3 = new S(function(s2, n3) {
                o3.ready().then(function() {
                  var t4 = o3._dbInfo;
                  t4.db.transaction(function(e4) {
                    V(e4, t4, "SELECT key FROM " + t4.storeName, [], function(e5, t5) {
                      for (var n4 = [], o4 = 0; o4 < t5.rows.length; o4++)
                        n4.push(t5.rows.item(o4).key);
                      s2(n4);
                    }, function(e5, t5) {
                      n3(t5);
                    });
                  });
                }).catch(n3);
              });
              return p(t3, e3), t3;
            }, dropInstance: function(n3, e3) {
              e3 = r.apply(this, arguments);
              var o3 = this.config();
              (n3 = "function" != typeof n3 && n3 || {}).name || (n3.name = n3.name || o3.name, n3.storeName = n3.storeName || o3.storeName);
              var t3, s2 = this;
              return p(t3 = n3.name ? new S(function(e4) {
                var t4, r2;
                t4 = n3.name === o3.name ? s2._dbInfo.db : openDatabase(n3.name, "", "", 0), n3.storeName ? e4({ db: t4, storeNames: [n3.storeName] }) : e4((r2 = t4, new S(function(s3, n4) {
                  r2.transaction(function(e5) {
                    e5.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'", [], function(e6, t5) {
                      for (var n5 = [], o4 = 0; o4 < t5.rows.length; o4++)
                        n5.push(t5.rows.item(o4).name);
                      s3({ db: r2, storeNames: n5 });
                    }, function(e6, t5) {
                      n4(t5);
                    });
                  }, function(e5) {
                    n4(e5);
                  });
                })));
              }).then(function(a2) {
                return new S(function(r2, i2) {
                  a2.db.transaction(function(o4) {
                    function e4(t5) {
                      return new S(function(e5, n5) {
                        o4.executeSql("DROP TABLE IF EXISTS " + t5, [], function() {
                          e5();
                        }, function(e6, t6) {
                          n5(t6);
                        });
                      });
                    }
                    for (var t4 = [], n4 = 0, s3 = a2.storeNames.length; n4 < s3; n4++)
                      t4.push(e4(a2.storeNames[n4]));
                    S.all(t4).then(function() {
                      r2();
                    }).catch(function(e5) {
                      i2(e5);
                    });
                  }, function(e4) {
                    i2(e4);
                  });
                });
              }) : S.reject("Invalid arguments"), e3), t3;
            } };
            function H(e3, t3) {
              var n3 = e3.name + "/";
              return e3.storeName !== t3.storeName && (n3 += e3.storeName + "/"), n3;
            }
            function W() {
              return !function() {
                var e3 = "_localforage_support_test";
                try {
                  return localStorage.setItem(e3, true), localStorage.removeItem(e3), false;
                } catch (e4) {
                  return true;
                }
              }() || 0 < localStorage.length;
            }
            var j = { _driver: "localStorageWrapper", _initStorage: function(e3) {
              var t3 = {};
              if (e3)
                for (var n3 in e3)
                  t3[n3] = e3[n3];
              return t3.keyPrefix = H(e3, this._defaultConfig), W() ? ((this._dbInfo = t3).serializer = F, S.resolve()) : S.reject();
            }, _support: function() {
              try {
                return "undefined" != typeof localStorage && "setItem" in localStorage && !!localStorage.setItem;
              } catch (e3) {
                return false;
              }
            }(), iterate: function(E2, e3) {
              var c2 = this, t3 = c2.ready().then(function() {
                for (var e4 = c2._dbInfo, t4 = e4.keyPrefix, n3 = t4.length, o3 = localStorage.length, s2 = 1, r2 = 0; r2 < o3; r2++) {
                  var i2 = localStorage.key(r2);
                  if (0 === i2.indexOf(t4)) {
                    var a2 = localStorage.getItem(i2);
                    if (a2 && (a2 = e4.serializer.deserialize(a2)), void 0 !== (a2 = E2(a2, i2.substring(n3), s2++)))
                      return a2;
                  }
                }
              });
              return p(t3, e3), t3;
            }, getItem: function(n3, e3) {
              var o3 = this;
              n3 = u(n3);
              var t3 = o3.ready().then(function() {
                var e4 = o3._dbInfo, t4 = localStorage.getItem(e4.keyPrefix + n3);
                return t4 && (t4 = e4.serializer.deserialize(t4)), t4;
              });
              return p(t3, e3), t3;
            }, setItem: function(i2, e3, t3) {
              var a2 = this;
              i2 = u(i2);
              var n3 = a2.ready().then(function() {
                void 0 === e3 && (e3 = null);
                var r2 = e3;
                return new S(function(n4, o3) {
                  var s2 = a2._dbInfo;
                  s2.serializer.serialize(e3, function(e4, t4) {
                    if (t4)
                      o3(t4);
                    else
                      try {
                        localStorage.setItem(s2.keyPrefix + i2, e4), n4(r2);
                      } catch (e5) {
                        "QuotaExceededError" !== e5.name && "NS_ERROR_DOM_QUOTA_REACHED" !== e5.name || o3(e5), o3(e5);
                      }
                  });
                });
              });
              return p(n3, t3), n3;
            }, removeItem: function(t3, e3) {
              var n3 = this;
              t3 = u(t3);
              var o3 = n3.ready().then(function() {
                var e4 = n3._dbInfo;
                localStorage.removeItem(e4.keyPrefix + t3);
              });
              return p(o3, e3), o3;
            }, clear: function(e3) {
              var o3 = this, t3 = o3.ready().then(function() {
                for (var e4 = o3._dbInfo.keyPrefix, t4 = localStorage.length - 1; 0 <= t4; t4--) {
                  var n3 = localStorage.key(t4);
                  0 === n3.indexOf(e4) && localStorage.removeItem(n3);
                }
              });
              return p(t3, e3), t3;
            }, length: function(e3) {
              var t3 = this.keys().then(function(e4) {
                return e4.length;
              });
              return p(t3, e3), t3;
            }, key: function(n3, e3) {
              var o3 = this, t3 = o3.ready().then(function() {
                var t4, e4 = o3._dbInfo;
                try {
                  t4 = localStorage.key(n3);
                } catch (e5) {
                  t4 = null;
                }
                return t4 && (t4 = t4.substring(e4.keyPrefix.length)), t4;
              });
              return p(t3, e3), t3;
            }, keys: function(e3) {
              var r2 = this, t3 = r2.ready().then(function() {
                for (var e4 = r2._dbInfo, t4 = localStorage.length, n3 = [], o3 = 0; o3 < t4; o3++) {
                  var s2 = localStorage.key(o3);
                  0 === s2.indexOf(e4.keyPrefix) && n3.push(s2.substring(e4.keyPrefix.length));
                }
                return n3;
              });
              return p(t3, e3), t3;
            }, dropInstance: function(t3, e3) {
              if (e3 = r.apply(this, arguments), !(t3 = "function" != typeof t3 && t3 || {}).name) {
                var n3 = this.config();
                t3.name = t3.name || n3.name, t3.storeName = t3.storeName || n3.storeName;
              }
              var o3, s2 = this;
              return p(o3 = t3.name ? new S(function(e4) {
                t3.storeName ? e4(H(t3, s2._defaultConfig)) : e4(t3.name + "/");
              }).then(function(e4) {
                for (var t4 = localStorage.length - 1; 0 <= t4; t4--) {
                  var n4 = localStorage.key(t4);
                  0 === n4.indexOf(e4) && localStorage.removeItem(n4);
                }
              }) : S.reject("Invalid arguments"), e3), o3;
            } }, q = function(e3, t3) {
              for (var n3 = e3.length, o3 = 0; o3 < n3; ) {
                if ((s2 = e3[o3]) === (r2 = t3) || "number" == typeof s2 && "number" == typeof r2 && isNaN(s2) && isNaN(r2))
                  return true;
                o3++;
              }
              var s2, r2;
              return false;
            }, X = Array.isArray || function(e3) {
              return "[object Array]" === Object.prototype.toString.call(e3);
            }, Q = {}, z = {}, Z = { INDEXEDDB: v, WEBSQL: J, LOCALSTORAGE: j }, $ = [Z.INDEXEDDB._driver, Z.WEBSQL._driver, Z.LOCALSTORAGE._driver], ee = ["dropInstance"], te = ["clear", "getItem", "iterate", "key", "keys", "length", "removeItem", "setItem"].concat(ee), ne = { description: "", driver: $.slice(), name: "localforage", size: 4980736, storeName: "keyvaluepairs", version: 1 };
            function oe(t3, n3) {
              t3[n3] = function() {
                var e3 = arguments;
                return t3.ready().then(function() {
                  return t3[n3].apply(t3, e3);
                });
              };
            }
            function se() {
              for (var e3 = 1; e3 < arguments.length; e3++) {
                var t3 = arguments[e3];
                if (t3)
                  for (var n3 in t3)
                    t3.hasOwnProperty(n3) && (X(t3[n3]) ? arguments[0][n3] = t3[n3].slice() : arguments[0][n3] = t3[n3]);
              }
              return arguments[0];
            }
            var re = function() {
              function s2(e3) {
                for (var t3 in function(e4, t4) {
                  if (!(e4 instanceof t4))
                    throw new TypeError("Cannot call a class as a function");
                }(this, s2), Z)
                  if (Z.hasOwnProperty(t3)) {
                    var n3 = Z[t3], o3 = n3._driver;
                    this[t3] = o3, Q[o3] || this.defineDriver(n3);
                  }
                this._defaultConfig = se({}, ne), this._config = se({}, this._defaultConfig, e3), this._driverSet = null, this._initDriver = null, this._ready = false, this._dbInfo = null, this._wrapLibraryMethodsWithReady(), this.setDriver(this._config.driver).catch(function() {
                });
              }
              return s2.prototype.config = function(e3) {
                if ("object" !== (void 0 === e3 ? "undefined" : o2(e3)))
                  return "string" == typeof e3 ? this._config[e3] : this._config;
                if (this._ready)
                  return new Error("Can't call config() after localforage has been used.");
                for (var t3 in e3) {
                  if ("storeName" === t3 && (e3[t3] = e3[t3].replace(/\W/g, "_")), "version" === t3 && "number" != typeof e3[t3])
                    return new Error("Database version must be a number.");
                  this._config[t3] = e3[t3];
                }
                return !("driver" in e3 && e3.driver) || this.setDriver(this._config.driver);
              }, s2.prototype.defineDriver = function(u2, e3, t3) {
                var n3 = new S(function(t4, n4) {
                  try {
                    var o3 = u2._driver, e4 = new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");
                    if (!u2._driver)
                      return void n4(e4);
                    for (var s3 = te.concat("_initStorage"), r2 = 0, i2 = s3.length; r2 < i2; r2++) {
                      var a2 = s3[r2], E2 = !q(ee, a2);
                      if ((E2 || u2[a2]) && "function" != typeof u2[a2])
                        return void n4(e4);
                    }
                    !function() {
                      for (var e5 = function(n6) {
                        return function() {
                          var e6 = new Error("Method " + n6 + " is not implemented by the current driver"), t6 = S.reject(e6);
                          return p(t6, arguments[arguments.length - 1]), t6;
                        };
                      }, t5 = 0, n5 = ee.length; t5 < n5; t5++) {
                        var o4 = ee[t5];
                        u2[o4] || (u2[o4] = e5(o4));
                      }
                    }();
                    var c2 = function(e5) {
                      Q[o3], Q[o3] = u2, z[o3] = e5, t4();
                    };
                    "_support" in u2 ? u2._support && "function" == typeof u2._support ? u2._support().then(c2, n4) : c2(!!u2._support) : c2(true);
                  } catch (e5) {
                    n4(e5);
                  }
                });
                return c(n3, e3, t3), n3;
              }, s2.prototype.driver = function() {
                return this._driver || null;
              }, s2.prototype.getDriver = function(e3, t3, n3) {
                var o3 = Q[e3] ? S.resolve(Q[e3]) : S.reject(new Error("Driver not found."));
                return c(o3, t3, n3), o3;
              }, s2.prototype.getSerializer = function(e3) {
                var t3 = S.resolve(F);
                return c(t3, e3), t3;
              }, s2.prototype.ready = function(e3) {
                var t3 = this, n3 = t3._driverSet.then(function() {
                  return null === t3._ready && (t3._ready = t3._initDriver()), t3._ready;
                });
                return c(n3, e3, e3), n3;
              }, s2.prototype.setDriver = function(e3, t3, n3) {
                var r2 = this;
                X(e3) || (e3 = [e3]);
                var o3 = this._getSupportedDrivers(e3);
                function i2() {
                  r2._config.driver = r2.driver();
                }
                function a2(e4) {
                  return r2._extend(e4), i2(), r2._ready = r2._initStorage(r2._config), r2._ready;
                }
                var s3 = null !== this._driverSet ? this._driverSet.catch(function() {
                  return S.resolve();
                }) : S.resolve();
                return this._driverSet = s3.then(function() {
                  var e4 = o3[0];
                  return r2._dbInfo = null, r2._ready = null, r2.getDriver(e4).then(function(e5) {
                    var s4;
                    r2._driver = e5._driver, i2(), r2._wrapLibraryMethodsWithReady(), r2._initDriver = (s4 = o3, function() {
                      var n4 = 0;
                      function o4() {
                        for (; n4 < s4.length; ) {
                          var e6 = s4[n4];
                          return n4++, r2._dbInfo = null, r2._ready = null, r2.getDriver(e6).then(a2).catch(o4);
                        }
                        i2();
                        var t4 = new Error("No available storage method found.");
                        return r2._driverSet = S.reject(t4), r2._driverSet;
                      }
                      return o4();
                    });
                  });
                }).catch(function() {
                  i2();
                  var e4 = new Error("No available storage method found.");
                  return r2._driverSet = S.reject(e4), r2._driverSet;
                }), c(this._driverSet, t3, n3), this._driverSet;
              }, s2.prototype.supports = function(e3) {
                return !!z[e3];
              }, s2.prototype._extend = function(e3) {
                se(this, e3);
              }, s2.prototype._getSupportedDrivers = function(e3) {
                for (var t3 = [], n3 = 0, o3 = e3.length; n3 < o3; n3++) {
                  var s3 = e3[n3];
                  this.supports(s3) && t3.push(s3);
                }
                return t3;
              }, s2.prototype._wrapLibraryMethodsWithReady = function() {
                for (var e3 = 0, t3 = te.length; e3 < t3; e3++)
                  oe(this, te[e3]);
              }, s2.prototype.createInstance = function(e3) {
                return new s2(e3);
              }, s2;
            }(), ie = new re();
            t2.exports = ie;
          }, { 3: 3 }] }, {}, [4])(4);
        }).call(this, n(44));
      }, function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", { value: true }), t.LocalStorage = void 0;
        var o = n(0), s = n(1), r = n(13), i = n(4), a = n(2), E = function() {
          function e2(e3) {
            this.store = s.constants.DEFAULT_STORE, o.isFalsy(e3) || (this.store = e3), this.localStore = r.createInstance({ name: o.format(s.LOCAL_STORE.STORE_STRING, i.CometChat.getAppId(), s.LOCAL_STORE.COMMON_STORE) }), this.localStore.setDriver([r.LOCALSTORAGE, r.INDEXEDDB, r.WEBSQL]);
          }
          return e2.getInstance = function() {
            return null == e2.localStorage && (e2.localStorage = new e2()), e2.localStorage;
          }, e2.prototype.set = function(e3, t2) {
            return this.localStore.setItem(e3, JSON.stringify(t2));
          }, e2.prototype.remove = function(e3) {
            this.localStore.removeItem(e3);
          }, e2.prototype.update = function(e3, t2) {
            this.remove(e3), this.set(e3, t2);
          }, e2.prototype.get = function(e3) {
            var o2 = this;
            return new Promise(function(n2, t2) {
              try {
                o2.localStore.getItem(e3).then(function(t3) {
                  try {
                    n2(JSON.parse(t3));
                  } catch (e4) {
                    n2(t3);
                  }
                }, function(e4) {
                  t2(e4);
                });
              } catch (e4) {
                t2(new a.CometChatException(e4));
              }
            });
          }, e2.prototype.clearStore = function() {
            var o2 = this;
            return new Promise(function(n2, t2) {
              try {
                o2.localStore.keys().then(function(e3) {
                  if (0 < e3.length)
                    for (var t3 = 0; t3 < e3.length; t3++)
                      "appId" !== e3[t3] && o2.localStore.removeItem(e3[t3]), t3 === e3.length - 1 && n2(true);
                });
              } catch (e3) {
                t2(e3);
              }
            });
          }, e2.prototype.clear = function(e3) {
          }, e2.prototype.selectStore = function(e3) {
            this.store = e3;
          }, e2.localStorage = null, e2;
        }();
        t.LocalStorage = E;
      }, function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", { value: true }), t.GroupsController = void 0;
        var o = n(8), s = n(1), r = n(0), i = function() {
          function e2() {
          }
          return e2.trasformJSONGroup = function(e3) {
            var t2;
            try {
              t2 = new o.Group(e3[s.GroupConstants.KEYS.GUID], e3[s.GroupConstants.KEYS.NAME], e3[s.GroupConstants.KEYS.TYPE]), e3.wsChannel && delete e3.wsChannel, Object.assign(t2, e3), e3 = t2;
            } catch (e4) {
              r.Logger.error("GroupsController:transformJSONGroup", e4);
            }
            return e3;
          }, e2;
        }();
        t.GroupsController = i;
      }, function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", { value: true }), t.CometChat = t.init = void 0;
        var o = n(4);
        t.init = function(e2) {
          return o.CometChat.getInstance(e2);
        }, t.CometChat = o.CometChat;
      }, function(e, t, n) {
        "use strict";
        var o, r = this && this.__extends || (o = function(e2, t2) {
          return (o = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e3, t3) {
            e3.__proto__ = t3;
          } || function(e3, t3) {
            for (var n2 in t3)
              t3.hasOwnProperty(n2) && (e3[n2] = t3[n2]);
          })(e2, t2);
        }, function(e2, t2) {
          function n2() {
            this.constructor = e2;
          }
          o(e2, t2), e2.prototype = null === t2 ? Object.create(t2) : (n2.prototype = t2.prototype, new n2());
        }), i = this && this.__assign || function() {
          return (i = Object.assign || function(e2) {
            for (var t2, n2 = 1, o2 = arguments.length; n2 < o2; n2++)
              for (var s2 in t2 = arguments[n2])
                Object.prototype.hasOwnProperty.call(t2, s2) && (e2[s2] = t2[s2]);
            return e2;
          }).apply(this, arguments);
        };
        Object.defineProperty(t, "__esModule", { value: true }), t.TextMessage = void 0;
        var s = n(7), a = n(1), E = n(3), c = n(8), u = n(0), S = function(s2) {
          function e2(e3, t2, n2) {
            var o2 = s2.call(this, e3, "text", n2, a.MessageCategory.MESSAGE) || this;
            return o2.type = "text", o2.data = { text: t2 }, o2.text = t2, o2;
          }
          return r(e2, s2), e2.prototype.getSender = function() {
            try {
              return this.getSenderFromData();
            } catch (e3) {
              return this.sender;
            }
          }, e2.prototype.getReceiver = function() {
            try {
              return this.getReceiverFromData();
            } catch (e3) {
              return this.receiver;
            }
          }, e2.prototype.getMetadata = function() {
            return this.data.metadata && (this.metadata = this.data.metadata), this.metadata;
          }, e2.prototype.setMetadata = function(e3) {
            this.metadata = e3, this.data = i(i({}, this.data), { metadata: e3 });
          }, e2.prototype.getData = function() {
            return this.data;
          }, e2.prototype.setData = function(e3) {
            this.data = e3;
          }, e2.prototype.getText = function() {
            return this.text;
          }, e2.prototype.setText = function(e3) {
            this.text = e3, this.data.text = e3;
          }, e2.prototype.setProcessedText = function(e3) {
            this.processedText = e3;
          }, e2.prototype.getProcessedText = function() {
            return this.processedText;
          }, e2.prototype.getTags = function() {
            return this.tags;
          }, e2.prototype.setTags = function(e3) {
            this.tags = e3;
          }, e2.prototype.getSenderFromData = function() {
            try {
              var e3 = this.getData();
              if (e3[a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][a.MessageConstatnts.KEYS.SENDER][a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITITY])
                return new E.User(e3[a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][a.MessageConstatnts.KEYS.SENDER][a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITITY]);
            } catch (e4) {
              u.Logger.error("TextMessageModel: getSenderFromData", e4);
            }
          }, e2.prototype.getReceiverFromData = function() {
            try {
              var e3 = this.getData(), t2 = e3[a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][a.MessageConstatnts.KEYS.RECEIVER][a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITITY];
              if (e3[a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][a.MessageConstatnts.KEYS.RECEIVER][a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITYTYPE] == [a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITY_TYPE.USER])
                return new E.User(t2);
              var n2 = new c.Group(t2[a.GroupConstants.KEYS.GUID], t2[a.GroupConstants.KEYS.NAME], t2[a.MessageConstatnts.KEYS.TYPE]);
              return Object.assign(n2, t2);
            } catch (e4) {
              u.Logger.error("TextMessageModel: getReceiverFromData", e4);
            }
          }, e2.TYPE = a.MessageConstatnts.TYPE.TEXT, e2.RECEIVER_TYPE = a.MessageConstatnts.RECEIVER_TYPE, e2.CATEGORY = a.MessageConstatnts.CATEGORY.MESSAGE, e2;
        }(s.BaseMessage);
        t.TextMessage = S;
      }, function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", { value: true }), t.MessageReaction = t.ReactionCount = void 0;
        var o = n(3), s = function() {
          function e2(e3) {
            Object.assign(this, e3);
          }
          return e2.prototype.getReaction = function() {
            return this.reaction;
          }, e2.prototype.setReaction = function(e3) {
            this.reaction = e3;
          }, e2.prototype.getCount = function() {
            return this.count;
          }, e2.prototype.setCount = function(e3) {
            this.count = e3;
          }, e2.prototype.getReactedByMe = function() {
            var e3;
            return null !== (e3 = this.reactedByMe) && void 0 !== e3 && e3;
          }, e2.prototype.setReactedByMe = function(e3) {
            this.reactedByMe = e3;
          }, e2;
        }();
        t.ReactionCount = s;
        var r = function() {
          function e2(e3) {
            Object.assign(this, e3);
          }
          return e2.prototype.getReactionId = function() {
            return this.id;
          }, e2.prototype.setReactionId = function(e3) {
            this.id = e3;
          }, e2.prototype.getMessageId = function() {
            return this.messageId;
          }, e2.prototype.setMessageId = function(e3) {
            this.messageId = e3;
          }, e2.prototype.getReaction = function() {
            return this.reaction;
          }, e2.prototype.setReaction = function(e3) {
            this.reaction = e3;
          }, e2.prototype.getUid = function() {
            return this.uid;
          }, e2.prototype.setUid = function(e3) {
            this.uid = e3;
          }, e2.prototype.getReactedAt = function() {
            return this.reactedAt;
          }, e2.prototype.setReactedAt = function(e3) {
            this.reactedAt = e3;
          }, e2.prototype.getReactedBy = function() {
            return new o.User(this.reactedBy);
          }, e2.prototype.setReactedBy = function(e3) {
            this.reactedBy = e3;
          }, e2;
        }();
        t.MessageReaction = r;
      }, function(e, t, n) {
        "use strict";
        var o, s = this && this.__extends || (o = function(e2, t2) {
          return (o = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e3, t3) {
            e3.__proto__ = t3;
          } || function(e3, t3) {
            for (var n2 in t3)
              t3.hasOwnProperty(n2) && (e3[n2] = t3[n2]);
          })(e2, t2);
        }, function(e2, t2) {
          function n2() {
            this.constructor = e2;
          }
          o(e2, t2), e2.prototype = null === t2 ? Object.create(t2) : (n2.prototype = t2.prototype, new n2());
        }), i = this && this.__assign || function() {
          return (i = Object.assign || function(e2) {
            for (var t2, n2 = 1, o2 = arguments.length; n2 < o2; n2++)
              for (var s2 in t2 = arguments[n2])
                Object.prototype.hasOwnProperty.call(t2, s2) && (e2[s2] = t2[s2]);
            return e2;
          }).apply(this, arguments);
        };
        Object.defineProperty(t, "__esModule", { value: true }), t.MediaMessage = void 0;
        var r = n(7), a = n(1), E = n(3), c = n(20), u = n(8), S = n(0), p = function(r2) {
          function e2(e3, t2, n2, o2) {
            var s2 = r2.call(this, e3, n2, o2, a.MessageCategory.MESSAGE) || this;
            return s2.data = {}, "object" != typeof t2 ? s2.data = { url: t2 } : t2 && (0 < t2.length ? s2.files = t2 : s2.files = [t2]), s2;
          }
          return s(e2, r2), e2.prototype.setCaption = function(e3) {
            this.caption = e3, this.data[a.MessageConstatnts.KEYS.TEXT] = e3;
          }, e2.prototype.getCaption = function() {
            return this.data[a.MessageConstatnts.KEYS.TEXT];
          }, e2.prototype.getSender = function() {
            try {
              return this.getSenderFromData();
            } catch (e3) {
              return this.sender;
            }
          }, e2.prototype.getReceiver = function() {
            try {
              return this.getReceiverFromData();
            } catch (e3) {
              return this.receiver;
            }
          }, e2.prototype.getMetadata = function() {
            return this.data.metadata && (this.metadata = this.data.metadata), this.metadata;
          }, e2.prototype.setMetadata = function(e3) {
            this.metadata = e3, this.data = i(i({}, this.data), { metadata: e3 });
          }, e2.prototype.getData = function() {
            return this.data;
          }, e2.prototype.setData = function(e3) {
            this.data = e3;
          }, e2.prototype.getAttachment = function() {
            return new c.Attachment(this.data.attachments[0]);
          }, e2.prototype.setAttachment = function(e3) {
            this.data.attachments = [c.Attachment.toJSON(e3)];
          }, e2.prototype.getAttachments = function() {
            var e3 = [];
            if (this.data.attachments && 0 < this.data.attachments.length)
              for (var t2 = 0; t2 < this.data.attachments.length; t2++)
                e3.push(new c.Attachment(this.data.attachments[t2]));
            return e3;
          }, e2.prototype.setAttachments = function(e3) {
            var t2 = [];
            if (e3 && 0 < e3.length)
              for (var n2 = 0; n2 < e3.length; n2++)
                t2.push(c.Attachment.toJSON(e3[n2]));
            this.data.attachments = t2;
          }, e2.prototype.getURL = function() {
            try {
              var e3 = this.getData();
              if (e3[a.MessageConstatnts.KEYS.URL])
                return e3[a.MessageConstatnts.KEYS.URL];
            } catch (e4) {
              S.Logger.error("MediaMessageModel: getURL", e4);
            }
          }, e2.prototype.getTags = function() {
            return this.tags;
          }, e2.prototype.setTags = function(e3) {
            this.tags = e3;
          }, e2.prototype.getSenderFromData = function() {
            try {
              var e3 = this.getData();
              if (e3[a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][a.MessageConstatnts.KEYS.SENDER][a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITITY])
                return new E.User(e3[a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][a.MessageConstatnts.KEYS.SENDER][a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITITY]);
            } catch (e4) {
              S.Logger.error("MediaMessageModel: getSenderFromData", e4);
            }
          }, e2.prototype.getReceiverFromData = function() {
            try {
              var e3 = this.getData(), t2 = e3[a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][a.MessageConstatnts.KEYS.RECEIVER][a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITITY];
              if (e3[a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][a.MessageConstatnts.KEYS.RECEIVER][a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITYTYPE] == [a.ResponseConstants.RESPONSE_KEYS.KEY_ENTITY_TYPE.USER])
                return new E.User(t2);
              var n2 = new u.Group(t2[a.GroupConstants.KEYS.GUID], t2[a.GroupConstants.KEYS.NAME], t2[a.MessageConstatnts.KEYS.TYPE]);
              return Object.assign(n2, t2);
            } catch (e4) {
              S.Logger.error("MediaMessageModel: getReceiverFromData", e4);
            }
          }, e2.TYPE = a.MessageConstatnts.TYPE, e2.RECEIVER_TYPE = a.MessageConstatnts.RECEIVER_TYPE, e2.CATEGORY = a.MessageConstatnts.CATEGORY, e2;
        }(r.BaseMessage);
        t.MediaMessage = p;
      }, function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", { value: true }), t.Attachment = void 0;
        var o = n(1), s = function() {
          function t2(e2) {
            e2.hasOwnProperty(o.ATTACHMENTS_CONSTANTS.KEYS.EXTENSION) && (this.extension = e2[o.ATTACHMENTS_CONSTANTS.KEYS.EXTENSION]), e2.hasOwnProperty(o.ATTACHMENTS_CONSTANTS.KEYS.MIME_TYPE) && (this.mimeType = e2[o.ATTACHMENTS_CONSTANTS.KEYS.MIME_TYPE]), e2.hasOwnProperty(o.ATTACHMENTS_CONSTANTS.KEYS.NAME) && (this.name = e2[o.ATTACHMENTS_CONSTANTS.KEYS.NAME]), e2.hasOwnProperty(o.ATTACHMENTS_CONSTANTS.KEYS.SIZE) && (this.size = e2[o.ATTACHMENTS_CONSTANTS.KEYS.SIZE]), e2.hasOwnProperty(o.ATTACHMENTS_CONSTANTS.KEYS.URL) && (this.url = e2[o.ATTACHMENTS_CONSTANTS.KEYS.URL]);
          }
          return t2.prototype.createFileFromJSON = function(e2) {
            return new t2(e2);
          }, t2.toJSON = function(e2) {
            return { extension: e2.getExtension(), mimeType: e2.getMimeType(), name: e2.getName(), url: e2.getUrl(), size: e2.getSize() };
          }, t2.prototype.getExtension = function() {
            return this.extension;
          }, t2.prototype.setExtension = function(e2) {
            this.extension = e2;
          }, t2.prototype.getMimeType = function() {
            return this.mimeType;
          }, t2.prototype.setMimeType = function(e2) {
            this.mimeType = e2;
          }, t2.prototype.getName = function() {
            return this.name;
          }, t2.prototype.setName = function(e2) {
            this.name = e2;
          }, t2.prototype.getSize = function() {
            return this.size;
          }, t2.prototype.setSize = function(e2) {
            this.size = e2;
          }, t2.prototype.getUrl = function() {
            return this.url;
          }, t2.prototype.setUrl = function(e2) {
            this.url = e2;
          }, t2;
        }();
        t.Attachment = s;
      }, function(e, t, n) {
        "use strict";
        var o, s = this && this.__extends || (o = function(e2, t2) {
          return (o = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e3, t3) {
            e3.__proto__ = t3;
          } || function(e3, t3) {
            for (var n2 in t3)
              t3.hasOwnProperty(n2) && (e3[n2] = t3[n2]);
          })(e2, t2);
        }, function(e2, t2) {
          function n2() {
            this.constructor = e2;
          }
          o(e2, t2), e2.prototype = null === t2 ? Object.create(t2) : (n2.prototype = t2.prototype, new n2());
        }), r = this && this.__assign || function() {
          return (r = Object.assign || function(e2) {
            for (var t2, n2 = 1, o2 = arguments.length; n2 < o2; n2++)
              for (var s2 in t2 = arguments[n2])
                Object.prototype.hasOwnProperty.call(t2, s2) && (e2[s2] = t2[s2]);
            return e2;
          }).apply(this, arguments);
        };
        Object.defineProperty(t, "__esModule", { value: true }), t.CustomMessage = void 0;
        var i = n(7), E = n(1), c = n(3), u = n(0), S = n(8), a = function(a2) {
          function e2() {
            for (var e3 = [], t2 = 0; t2 < arguments.length; t2++)
              e3[t2] = arguments[t2];
            var n2 = this;
            if (3 == e3.length) {
              var o2 = e3[0], s2 = e3[1], r2 = e3[2];
              n2 = a2.call(this, o2, E.MessageConstatnts.TYPE.CUSTOM, s2, E.MessageCategory.MESSAGE) || this, ("object" != typeof r2 || Array.isArray(r2)) && (r2 = {}), n2.customData = r2, u.isFalsy(n2.data) && (n2.data = {}), n2.data[E.MessageConstatnts.KEYS.CUSTOM_DATA] = r2;
            }
            if (4 == e3.length) {
              o2 = e3[0], s2 = e3[1];
              var i2 = e3[2];
              r2 = e3[3];
              n2 = a2.call(this, o2, i2, s2, E.MessageCategory.CUSTOM) || this, ("object" != typeof r2 || Array.isArray(r2)) && (r2 = {}), n2.customData = r2, u.isFalsy(n2.data) && (n2.data = {}), n2.data[E.MessageConstatnts.KEYS.CUSTOM_DATA] = r2;
            }
            return n2;
          }
          return s(e2, a2), e2.prototype.getCustomData = function() {
            return this.customData;
          }, e2.prototype.setCustomData = function(e3) {
            this.customData = e3, this.data[E.MessageConstatnts.KEYS.CUSTOM_DATA] = e3;
          }, e2.prototype.getSender = function() {
            try {
              return this.getSenderFromData();
            } catch (e3) {
              return this.sender;
            }
          }, e2.prototype.getReceiver = function() {
            try {
              return this.getReceiverFromData();
            } catch (e3) {
              return this.receiver;
            }
          }, e2.prototype.getSubType = function() {
            return this.subType;
          }, e2.prototype.setSubType = function(e3) {
            this.subType = e3, this.data = r(r({}, this.data), { subType: e3 });
          }, e2.prototype.getMetadata = function() {
            return this.metadata;
          }, e2.prototype.setMetadata = function(e3) {
            this.metadata = e3, this.data = r(r({}, this.data), { metadata: e3 });
          }, e2.prototype.getData = function() {
            return this.data;
          }, e2.prototype.getTags = function() {
            return this.tags;
          }, e2.prototype.setTags = function(e3) {
            this.tags = e3;
          }, e2.prototype.getSenderFromData = function() {
            try {
              var e3 = this.getData();
              if (e3[E.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][E.MessageConstatnts.KEYS.SENDER][E.ResponseConstants.RESPONSE_KEYS.KEY_ENTITITY])
                return new c.User(e3[E.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][E.MessageConstatnts.KEYS.SENDER][E.ResponseConstants.RESPONSE_KEYS.KEY_ENTITITY]);
            } catch (e4) {
              u.Logger.error("CustomMessageModel: getSenderFromData", e4);
            }
          }, e2.prototype.getReceiverFromData = function() {
            try {
              var e3 = this.getData(), t2 = e3[E.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][E.MessageConstatnts.KEYS.RECEIVER][E.ResponseConstants.RESPONSE_KEYS.KEY_ENTITITY];
              if (e3[E.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][E.MessageConstatnts.KEYS.RECEIVER][E.ResponseConstants.RESPONSE_KEYS.KEY_ENTITYTYPE] == [E.ResponseConstants.RESPONSE_KEYS.KEY_ENTITY_TYPE.USER])
                return new c.User(t2);
              var n2 = new S.Group(t2[E.GroupConstants.KEYS.GUID], t2[E.GroupConstants.KEYS.NAME], t2[E.MessageConstatnts.KEYS.TYPE]);
              return Object.assign(n2, t2);
            } catch (e4) {
              u.Logger.error("CustomMessageModel: getReceiverFromData", e4);
            }
          }, e2;
        }(i.BaseMessage);
        t.CustomMessage = a;
      }, function(e, t, n) {
        "use strict";
        var o, s = this && this.__extends || (o = function(e2, t2) {
          return (o = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e3, t3) {
            e3.__proto__ = t3;
          } || function(e3, t3) {
            for (var n2 in t3)
              t3.hasOwnProperty(n2) && (e3[n2] = t3[n2]);
          })(e2, t2);
        }, function(e2, t2) {
          function n2() {
            this.constructor = e2;
          }
          o(e2, t2), e2.prototype = null === t2 ? Object.create(t2) : (n2.prototype = t2.prototype, new n2());
        }), r = this && this.__assign || function() {
          return (r = Object.assign || function(e2) {
            for (var t2, n2 = 1, o2 = arguments.length; n2 < o2; n2++)
              for (var s2 in t2 = arguments[n2])
                Object.prototype.hasOwnProperty.call(t2, s2) && (e2[s2] = t2[s2]);
            return e2;
          }).apply(this, arguments);
        };
        Object.defineProperty(t, "__esModule", { value: true }), t.InteractiveMessage = void 0;
        var i = n(7), c = n(1), a = n(3), u = n(0), S = n(8), p = n(35), l = n(23), E = function(E2) {
          function e2() {
            for (var e3 = [], t2 = 0; t2 < arguments.length; t2++)
              e3[t2] = arguments[t2];
            var n2 = this;
            if (4 == e3.length) {
              var o2 = e3[0], s2 = e3[1], r2 = e3[2], i2 = e3[3];
              (n2 = E2.call(this, o2, r2, s2, c.MessageCategory.INTERACTIVE) || this).interactionGoal = new p.InteractionGoal(c.GoalType.NONE, []), ("object" != typeof i2 || Array.isArray(i2)) && (i2 = {}), n2.interactiveData = i2, n2.interactions = [], u.isFalsy(n2.data) && (n2.data = {}), n2.data[c.MessageConstatnts.KEYS.INTERACTIVE_DATA] = i2, n2.data[c.MessageConstatnts.KEYS.INTERACTION_GOAL] = new p.InteractionGoal(c.GoalType.NONE, []);
            } else if (5 == e3.length) {
              o2 = e3[0], s2 = e3[1], r2 = e3[2], i2 = e3[3];
              var a2 = e3[4];
              n2 = E2.call(this, o2, r2, s2, c.MessageCategory.INTERACTIVE) || this, ("object" != typeof i2 || Array.isArray(i2)) && (i2 = {}), ("object" != typeof a2 || Array.isArray(a2)) && (a2 = {}), n2.interactiveData = i2, n2.interactionGoal = a2, u.isFalsy(n2.data) && (n2.data = {}), n2.data[c.MessageConstatnts.KEYS.INTERACTIVE_DATA] = i2, n2.data[c.MessageConstatnts.KEYS.INTERACTION_GOAL] = a2, n2.interactions = [];
            }
            return n2;
          }
          return s(e2, E2), e2.prototype.getSender = function() {
            try {
              return this.getSenderFromData();
            } catch (e3) {
              return this.sender;
            }
          }, e2.prototype.getInteractiveData = function() {
            return this.interactiveData;
          }, e2.prototype.setInteractiveData = function(e3) {
            this.interactiveData = e3, this.data[c.MessageConstatnts.KEYS.INTERACTIVE_DATA] = e3;
          }, e2.prototype.getReceiver = function() {
            try {
              return this.getReceiverFromData();
            } catch (e3) {
              return this.receiver;
            }
          }, e2.prototype.getInteractionGoal = function() {
            try {
              return this.getInteractionGoalFromdata();
            } catch (e3) {
              return this.interactionGoal;
            }
          }, e2.prototype.setInteractionGoal = function(e3) {
            this.interactionGoal = e3, this.data = r(r({}, this.data), { interactionGoal: e3 });
          }, e2.prototype.getInteractions = function() {
            try {
              return this.getInteractionsFromData();
            } catch (e3) {
              return this.interactions;
            }
          }, e2.prototype.setInteractions = function(e3) {
            this.interactions = e3;
            var t2 = c.MessageConstatnts.KEYS.INTERACTIONS;
            this.data[t2] = e3;
          }, e2.prototype.getMetadata = function() {
            return this.metadata;
          }, e2.prototype.setMetadata = function(e3) {
            this.metadata = e3, this.data = r(r({}, this.data), { metadata: e3 });
          }, e2.prototype.getData = function() {
            return this.data;
          }, e2.prototype.getTags = function() {
            return this.tags;
          }, e2.prototype.setTags = function(e3) {
            this.tags = e3;
          }, e2.prototype.setIsSenderInteractionAllowed = function(e3) {
            this.allowSenderInteraction = e3;
            var t2 = c.MessageConstatnts.KEYS.ALLOW_SENDER_INTERACTION;
            this.data[t2] = e3;
          }, e2.prototype.getIsSenderInteractionAllowed = function(e3) {
            return this.allowSenderInteraction;
          }, e2.prototype.getInteractionGoalFromdata = function() {
            try {
              var e3 = this.getData();
              if (e3[c.MessageConstatnts.KEYS.INTERACTION_GOAL])
                return new p.InteractionGoal(e3[c.MessageConstatnts.KEYS.INTERACTION_GOAL][c.MessageConstatnts.KEYS.TYPE], e3[c.MessageConstatnts.KEYS.INTERACTION_GOAL][c.MessageConstatnts.KEYS.ELEMENT_IDS]);
            } catch (e4) {
              u.Logger.error("InteractiveMessageModel: getFromData", e4);
            }
          }, e2.prototype.getInteractionsFromData = function() {
            try {
              var e3 = this.getData();
              if (e3[c.MessageConstatnts.KEYS.INTERACTIONS])
                return (e3[c.MessageConstatnts.KEYS.INTERACTIONS] || []).map(function(e4) {
                  return new l.Interaction(e4[c.MessageConstatnts.KEYS.ELEMENT_ID], e4[c.MessageConstatnts.KEYS.INTERACTED_AT]);
                });
            } catch (e4) {
              u.Logger.error("InteractiveMessageModel: getFromData", e4);
            }
          }, e2.prototype.getSenderFromData = function() {
            try {
              var e3 = this.getData();
              if (e3[c.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][c.MessageConstatnts.KEYS.SENDER][c.ResponseConstants.RESPONSE_KEYS.KEY_ENTITITY])
                return new a.User(e3[c.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][c.MessageConstatnts.KEYS.SENDER][c.ResponseConstants.RESPONSE_KEYS.KEY_ENTITITY]);
            } catch (e4) {
              u.Logger.error("CustomMessageModel: getSenderFromData", e4);
            }
          }, e2.prototype.getReceiverFromData = function() {
            try {
              var e3 = this.getData(), t2 = e3[c.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][c.MessageConstatnts.KEYS.RECEIVER][c.ResponseConstants.RESPONSE_KEYS.KEY_ENTITITY];
              if (e3[c.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES][c.MessageConstatnts.KEYS.RECEIVER][c.ResponseConstants.RESPONSE_KEYS.KEY_ENTITYTYPE] == [c.ResponseConstants.RESPONSE_KEYS.KEY_ENTITY_TYPE.USER])
                return new a.User(t2);
              var n2 = new S.Group(t2[c.GroupConstants.KEYS.GUID], t2[c.GroupConstants.KEYS.NAME], t2[c.MessageConstatnts.KEYS.TYPE]);
              return Object.assign(n2, t2);
            } catch (e4) {
              u.Logger.error("InteractiveMessageModel: getReceiverFromData", e4);
            }
          }, e2.TYPE = c.MessageConstatnts.TYPE, e2.RECEIVER_TYPE = c.MessageConstatnts.RECEIVER_TYPE, e2.CATEGORY = c.MessageConstatnts.CATEGORY, e2;
        }(i.BaseMessage);
        t.InteractiveMessage = E;
      }, function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", { value: true }), t.Interaction = void 0;
        var o = n(1), s = function() {
          function n2(e2, t2) {
            this.elementId = e2, this.interactedAt = t2;
          }
          return n2.prototype.getElementId = function() {
            return this.elementId;
          }, n2.prototype.getInteractedAt = function() {
            return this.interactedAt;
          }, n2.prototype.setElementId = function(e2) {
            this.elementId = e2;
          }, n2.prototype.setInteractedAt = function(e2) {
            this.interactedAt = this.interactedAt;
          }, n2.getInteractionFromJSON = function(e2) {
            var t2 = e2[o.MessageConstatnts.KEYS.INTERACTED_AT];
            return new n2(e2[o.MessageConstatnts.KEYS.ELEMENT_ID], t2);
          }, n2;
        }();
        t.Interaction = s;
      }, function(e, t, n) {
        "use strict";
        var o, s = this && this.__extends || (o = function(e2, t2) {
          return (o = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e3, t3) {
            e3.__proto__ = t3;
          } || function(e3, t3) {
            for (var n2 in t3)
              t3.hasOwnProperty(n2) && (e3[n2] = t3[n2]);
          })(e2, t2);
        }, function(e2, t2) {
          function n2() {
            this.constructor = e2;
          }
          o(e2, t2), e2.prototype = null === t2 ? Object.create(t2) : (n2.prototype = t2.prototype, new n2());
        }), r = this && this.__assign || function() {
          return (r = Object.assign || function(e2) {
            for (var t2, n2 = 1, o2 = arguments.length; n2 < o2; n2++)
              for (var s2 in t2 = arguments[n2])
                Object.prototype.hasOwnProperty.call(t2, s2) && (e2[s2] = t2[s2]);
            return e2;
          }).apply(this, arguments);
        };
        Object.defineProperty(t, "__esModule", { value: true }), t.Action = void 0;
        var i = n(7), c = n(8), u = n(3), S = n(1), a = n(0), p = n(11), E = function(e2) {
          function t2() {
            return null !== e2 && e2.apply(this, arguments) || this;
          }
          return s(t2, e2), t2.actionFromJSON = function(e3) {
            var t3 = new this(e3[S.MessageConstatnts.KEYS.RECEIVER], e3[S.MessageConstatnts.KEYS.TYPE], e3[S.MessageConstatnts.KEYS.RECEIVER_TYPE], S.MessageCategory.ACTION), n2 = e3[S.MessageConstatnts.KEYS.DATA];
            if (t3.data = n2, t3.setAction(n2[S.MessageConstatnts.KEYS.ACTION]), n2[S.ActionConstatnts.ACTION_KEYS.EXTRAS]) {
              var o2 = n2[S.ActionConstatnts.ACTION_KEYS.EXTRAS];
              if (o2[S.ActionConstatnts.ACTION_KEYS.SCOPE]) {
                var s2 = o2[S.ActionConstatnts.ACTION_KEYS.SCOPE];
                s2[S.ActionConstatnts.ACTION_KEYS.NEW] && s2[S.ActionConstatnts.ACTION_KEYS.OLD] && (t3.setOldScope(s2[S.ActionConstatnts.ACTION_KEYS.OLD]), t3.setNewScope(s2[S.ActionConstatnts.ACTION_KEYS.NEW]));
              }
            }
            n2[S.MessageConstatnts.KEYS.METADATA] && t3.setMetadata(n2[S.MessageConstatnts.KEYS.METADATA]);
            var r2 = n2[S.ActionConstatnts.ACTION_KEYS.ENTITIES];
            if (r2[S.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY])
              if (r2[S.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY][S.ActionConstatnts.ACTION_KEYS.ENTITY_TYPE] == S.ActionConstatnts.ACTION_ENTITY_TYPE.USER) {
                var i2 = new u.User(r2[S.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY][S.ActionConstatnts.ACTION_KEYS.ENTITY]);
                Object.assign(i2, r2[S.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY][S.ActionConstatnts.ACTION_KEYS.ENTITY]), t3.actionBy = i2, t3.setSender(i2);
              } else {
                var a2 = new c.Group("", "", "");
                Object.assign(a2, r2[S.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY][S.ActionConstatnts.ACTION_KEYS.ENTITY]), t3.actionBy = a2;
              }
            if (r2[S.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR])
              if (r2[S.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][S.ActionConstatnts.ACTION_KEYS.ENTITY_TYPE] == S.ActionConstatnts.ACTION_ENTITY_TYPE.USER) {
                i2 = new u.User(r2[S.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][S.ActionConstatnts.ACTION_KEYS.ENTITY]);
                Object.assign(i2, r2[S.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][S.ActionConstatnts.ACTION_KEYS.ENTITY]), t3.actionFor = i2;
              } else {
                a2 = new c.Group("", "", "");
                Object.assign(a2, r2[S.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][S.ActionConstatnts.ACTION_KEYS.ENTITY]), t3.actionFor = a2;
              }
            if (r2[S.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON]) {
              if (r2[S.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON][S.ActionConstatnts.ACTION_KEYS.ENTITY_TYPE] == S.ActionConstatnts.ACTION_ENTITY_TYPE.USER) {
                i2 = new u.User(r2[S.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON][S.ActionConstatnts.ACTION_KEYS.ENTITY]);
                Object.assign(i2, r2[S.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON][S.ActionConstatnts.ACTION_KEYS.ENTITY]), t3.actionOn = i2;
              } else if (r2[S.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON][S.ActionConstatnts.ACTION_KEYS.ENTITY_TYPE] == S.ActionConstatnts.ACTION_ENTITY_TYPE.GROUP) {
                a2 = new c.Group("", "", "");
                Object.assign(a2, r2[S.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON][S.ActionConstatnts.ACTION_KEYS.ENTITY]), t3.actionOn = a2;
              } else if (r2[S.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON][S.ActionConstatnts.ACTION_KEYS.ENTITY_TYPE] == S.ActionConstatnts.ACTION_ENTITY_TYPE.MESSAGE) {
                var E2 = p.MessageController.trasformJSONMessge(r2[S.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON][S.ActionConstatnts.ACTION_KEYS.ENTITY]);
                t3.actionOn = E2;
              }
            }
            return t3.setMessage(t3.getActionMessage(t3)), t3;
          }, t2.prototype.getOldScope = function() {
            return this.oldScope;
          }, t2.prototype.setOldScope = function(e3) {
            this.oldScope = e3;
          }, t2.prototype.getNewScope = function() {
            return this.newScope;
          }, t2.prototype.setNewScope = function(e3) {
            this.newScope = e3;
          }, t2.prototype.getRawData = function() {
            return this.rawData;
          }, t2.prototype.setRawData = function(e3) {
            this.rawData = e3;
          }, t2.prototype.getMessage = function() {
            return this.message;
          }, t2.prototype.setMessage = function(e3) {
            this.message = e3;
          }, t2.prototype.getAction = function() {
            return this.action;
          }, t2.prototype.setAction = function(e3) {
            this.action = e3;
          }, t2.prototype.getSender = function() {
            try {
              return this.getSenderFromData();
            } catch (e3) {
              return this.sender;
            }
          }, t2.prototype.getActionBy = function() {
            return this.actionBy;
          }, t2.prototype.setActionBy = function(e3) {
            this.actionBy = e3;
          }, t2.prototype.getActionOn = function() {
            return this.actionOn;
          }, t2.prototype.setActionOn = function(e3) {
            this.actionOn = e3;
          }, t2.prototype.getActionFor = function() {
            return this.actionFor;
          }, t2.prototype.setActionFor = function(e3) {
            this.actionFor = e3;
          }, t2.prototype.getMetadata = function() {
            return this.data.metadata && (this.metadata = this.data.metadata), this.metadata;
          }, t2.prototype.setMetadata = function(e3) {
            this.metadata = e3, this.data = r(r({}, this.data), { metadata: e3 });
          }, t2.prototype.getActionMessage = function(e3) {
            var t3 = "";
            switch (e3.getType()) {
              case S.ActionConstatnts.ACTION_KEYS.ACTION_TYPE_USER:
              case S.ActionConstatnts.ACTION_KEYS.ACTION_TYPE_GROUP:
                switch (e3.getAction()) {
                  case S.ActionConstatnts.ACTION_KEYS.ACTION_CREATED:
                  case S.ActionConstatnts.ACTION_KEYS.ACTION_UPDATED:
                  case S.ActionConstatnts.ACTION_KEYS.ACTION_DELETED:
                }
                break;
              case S.ActionConstatnts.ACTION_KEYS.ACTION_TYPE_GROUP_MEMBER:
                switch (e3.getAction()) {
                  case S.ActionConstatnts.ACTION_KEYS.TYPE_MEMBER_JOINED:
                    var n2 = e3.getActionBy();
                    t3 = a.format(S.ActionConstatnts.ActionMessages.ACTION_GROUP_JOINED_MESSAGE, n2.getName());
                    break;
                  case S.ActionConstatnts.ACTION_KEYS.TYPE_MEMBER_LEFT:
                    n2 = e3.getActionBy();
                    t3 = a.format(S.ActionConstatnts.ActionMessages.ACTION_GROUP_LEFT_MESSAGE, n2.getName());
                    break;
                  case S.ActionConstatnts.ACTION_KEYS.TYPE_MEMBER_KICKED:
                    n2 = e3.getActionBy();
                    var o2 = e3.getActionOn();
                    t3 = a.format(S.ActionConstatnts.ActionMessages.ACTION_MEMBER_KICKED_MESSAGE, n2.getName(), o2.getName());
                    break;
                  case S.ActionConstatnts.ACTION_KEYS.TYPE_MEMBER_BANNED:
                    n2 = e3.getActionBy(), o2 = e3.getActionOn();
                    t3 = a.format(S.ActionConstatnts.ActionMessages.ACTION_MEMBER_BANNED_MESSAGE, n2.getName(), o2.getName());
                    break;
                  case S.ActionConstatnts.ACTION_KEYS.TYPE_MEMBER_UNBANNED:
                    n2 = e3.getActionBy(), o2 = e3.getActionOn();
                    t3 = a.format(S.ActionConstatnts.ActionMessages.ACTION_MEMBER_UNBANNED_MESSAGE, n2.getName(), o2.getName());
                    break;
                  case S.ActionConstatnts.ACTION_KEYS.ACTION_SCOPE_CHANGED:
                    n2 = e3.getActionBy(), o2 = e3.getActionOn();
                    var s2 = e3.getNewScope();
                    t3 = a.format(S.ActionConstatnts.ActionMessages.ACTION_MEMBER_SCOPE_CHANGED, n2.getName(), o2.getName(), s2);
                    break;
                  case S.ActionConstatnts.ACTION_KEYS.TYPE_MEMBER_ADDED:
                    n2 = e3.getActionBy(), o2 = e3.getActionOn();
                    t3 = a.format(S.ActionConstatnts.ActionMessages.ACTION_MEMBER_ADDED_TO_GROUP, n2.getName(), o2.getName());
                    break;
                  case S.ActionConstatnts.ACTION_KEYS.TYPE_MESSAGE_EDITED:
                    t3 = a.format(S.ActionConstatnts.ActionMessages.ACTION_MESSAGE_EDITED_MESSAGE, "");
                    break;
                  case S.ActionConstatnts.ACTION_KEYS.TYPE_MESSAGE_DELETED:
                    t3 = a.format(S.ActionConstatnts.ActionMessages.ACTION_MESSAGE_DELETED_MESSAGE, "");
                }
            }
            return t3;
          }, t2.prototype.getSenderFromData = function() {
            var e3 = this.data[S.ActionConstatnts.ACTION_KEYS.ENTITIES];
            if (e3[S.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY] && e3[S.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY][S.ActionConstatnts.ACTION_KEYS.ENTITY_TYPE] == S.ActionConstatnts.ACTION_ENTITY_TYPE.USER) {
              var t3 = new u.User(e3[S.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY][S.ActionConstatnts.ACTION_KEYS.ENTITY]);
              return Object.assign(t3, e3[S.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY][S.ActionConstatnts.ACTION_KEYS.ENTITY]), t3;
            }
          }, t2.TYPE = S.MessageConstatnts.TYPE, t2.RECEIVER_TYPE = S.MessageConstatnts.RECEIVER_TYPE, t2.CATEGORY = S.MessageConstatnts.CATEGORY, t2.ACTION_TYPE = S.ActionConstatnts.ACTION_TYPE, t2;
        }(i.BaseMessage);
        t.Action = E;
      }, function(e, t, n) {
        "use strict";
        var o, r = this && this.__extends || (o = function(e2, t2) {
          return (o = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e3, t3) {
            e3.__proto__ = t3;
          } || function(e3, t3) {
            for (var n2 in t3)
              t3.hasOwnProperty(n2) && (e3[n2] = t3[n2]);
          })(e2, t2);
        }, function(e2, t2) {
          function n2() {
            this.constructor = e2;
          }
          o(e2, t2), e2.prototype = null === t2 ? Object.create(t2) : (n2.prototype = t2.prototype, new n2());
        }), i = this && this.__assign || function() {
          return (i = Object.assign || function(e2) {
            for (var t2, n2 = 1, o2 = arguments.length; n2 < o2; n2++)
              for (var s2 in t2 = arguments[n2])
                Object.prototype.hasOwnProperty.call(t2, s2) && (e2[s2] = t2[s2]);
            return e2;
          }).apply(this, arguments);
        };
        Object.defineProperty(t, "__esModule", { value: true }), t.Call = void 0;
        var s = n(7), a = n(8), E = n(1), c = n(0), u = n(3), S = function(s2) {
          function e2(e3, t2, n2, o2) {
            return c.isFalsy(o2) ? s2.call(this, e3, t2, n2, E.MessageCategory.CALL) || this : s2.call(this, e3, t2, n2, o2) || this;
          }
          return r(e2, s2), e2.prototype.getCallInitiator = function() {
            return this.getCallInitiatedByFromData();
          }, e2.prototype.setCallInitiator = function(e3) {
            this.callInitiator = e3;
          }, e2.prototype.getCallReceiver = function() {
            return this.getCallReceivedByFromData();
          }, e2.prototype.setCallReceiver = function(e3) {
            this.callReceiver = e3;
          }, e2.prototype.getData = function() {
            return this.data;
          }, e2.prototype.setData = function(e3) {
            this.data = e3;
          }, e2.prototype.getSessionId = function() {
            return this.sessionId;
          }, e2.prototype.setSessionId = function(e3) {
            this.sessionId = e3;
          }, e2.prototype.getMetadata = function() {
            return this.data.metadata && (this.metadata = this.data.metadata), this.metadata;
          }, e2.prototype.setMetadata = function(e3) {
            this.metadata = e3, this.data = i(i({}, this.data), { metadata: e3 });
          }, e2.prototype.getSender = function() {
            try {
              return this.getSenderFromData();
            } catch (e3) {
              return this.sender;
            }
          }, e2.prototype.getAction = function() {
            return this.action;
          }, e2.prototype.setAction = function(e3) {
            this.action = e3;
          }, e2.prototype.getInitiatedAt = function() {
            return this.initiatedAt;
          }, e2.prototype.setInitiatedAt = function(e3) {
            this.initiatedAt = e3;
          }, e2.prototype.getJoinedAt = function() {
            return this.joinedAt;
          }, e2.prototype.setJoinedAt = function(e3) {
            this.joinedAt = e3;
          }, e2.prototype.getRawData = function() {
            return this.rawData;
          }, e2.prototype.setRawData = function(e3) {
            this.rawData = e3;
          }, e2.callFromJSON = function(e3) {
            try {
              var t2 = new this(e3[E.MessageConstatnts.KEYS.RECEIVER], e3[E.MessageConstatnts.KEYS.TYPE], e3[E.MessageConstatnts.KEYS.RECEIVER_TYPE], E.MessageCategory.CALL), n2 = e3[E.MessageConstatnts.KEYS.DATA];
              t2.setAction(n2[E.MessageConstatnts.KEYS.ACTION]), n2[E.MessageConstatnts.KEYS.METADATA] && t2.setMetadata(n2[E.MessageConstatnts.KEYS.METADATA]);
              var o2 = n2[E.ActionConstatnts.ACTION_KEYS.ENTITIES];
              if (o2[E.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY])
                o2[E.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY];
              if (o2[E.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON]) {
                var s3 = o2[E.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON];
                if (s3[E.CallConstants.CALL_KEYS.CALL_ENTITY]) {
                  var r2 = s3[E.CallConstants.CALL_KEYS.CALL_ENTITY];
                  if (r2[E.CallConstants.CALL_KEYS.CALL_SESSION_ID] && (t2.sessionId = r2[E.CallConstants.CALL_KEYS.CALL_SESSION_ID]), r2[E.CallConstants.CALL_KEYS.CALL_STATUS] && (t2.status = r2[E.CallConstants.CALL_KEYS.CALL_STATUS]), r2[E.CallConstants.CALL_KEYS.CALL_DATA]) {
                    var i2 = r2[E.CallConstants.CALL_KEYS.CALL_DATA];
                    if (i2[E.CallConstants.CALL_KEYS.CALL_METADATA] && (t2.metadata = i2[E.CallConstants.CALL_KEYS.CALL_METADATA]), i2[E.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES])
                      i2[E.ResponseConstants.RESPONSE_KEYS.KEY_ENTITIES];
                  }
                  r2[E.CallConstants.CALL_KEYS.CALL_INITIATED_AT] && (t2.initiatedAt = r2[E.CallConstants.CALL_KEYS.CALL_INITIATED_AT]), r2[E.CallConstants.CALL_KEYS.CALL_JOINED_AT] && (t2.joinedAt = r2[E.CallConstants.CALL_KEYS.CALL_JOINED_AT]), r2[E.CallConstants.CALL_KEYS.CALL_LEFT_AT] && (t2.joinedAt = r2[E.CallConstants.CALL_KEYS.CALL_LEFT_AT]);
                }
              }
              return t2;
            } catch (e4) {
              c.Logger.error("CallModel: callFromJSON", e4);
            }
          }, e2.prototype.getSenderFromData = function() {
            try {
              var e3 = this.getData();
              if ((e3 = e3[E.ActionConstatnts.ACTION_KEYS.ENTITIES])[E.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY][E.CallConstants.CALL_KEYS.CALL_ENTITY])
                return new u.User(e3[E.ActionConstatnts.ACTION_SUBJECTS.ACTION_BY][E.CallConstants.CALL_KEYS.CALL_ENTITY]);
            } catch (e4) {
              c.Logger.error("CallModel:getSenderFromData", e4);
            }
          }, e2.prototype.getCallInitiatedByFromData = function() {
            try {
              var e3 = this.getData();
              if ((e3 = e3[E.ActionConstatnts.ACTION_KEYS.ENTITIES])[E.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON][E.CallConstants.CALL_KEYS.CALL_ENTITY][E.CallConstants.CALL_KEYS.CALL_DATA][E.ActionConstatnts.ACTION_KEYS.ENTITIES][E.CallConstants.CALL_KEYS.CALL_SENDER])
                return new u.User(e3[E.ActionConstatnts.ACTION_SUBJECTS.ACTION_ON][E.CallConstants.CALL_KEYS.CALL_ENTITY][E.CallConstants.CALL_KEYS.CALL_DATA][E.ActionConstatnts.ACTION_KEYS.ENTITIES][E.CallConstants.CALL_KEYS.CALL_SENDER][E.CallConstants.CALL_KEYS.CALL_ENTITY]);
            } catch (e4) {
              c.Logger.error("CallModel:getCallInitiatedByFromData", e4);
            }
          }, e2.prototype.getCallReceivedByFromData = function() {
            try {
              var e3 = this.getData();
              if ((e3 = e3[E.ActionConstatnts.ACTION_KEYS.ENTITIES])[E.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][E.CallConstants.CALL_KEYS.CALL_ENTITY]) {
                if (e3[E.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][E.CallConstants.CALL_KEYS.CALL_ENTITY_TYPE] == E.CallConstants.CALL_KEYS.CALL_ENTITY_USER)
                  return new u.User(e3[E.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][E.CallConstants.CALL_KEYS.CALL_ENTITY]);
                var t2 = new a.Group(e3[E.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][E.CallConstants.CALL_KEYS.CALL_ENTITY][E.GroupConstants.KEYS.GUID], e3[E.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][E.CallConstants.CALL_KEYS.CALL_ENTITY][E.GroupConstants.KEYS.NAME], e3[E.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][E.CallConstants.CALL_KEYS.CALL_ENTITY][E.GroupConstants.KEYS.TYPE]);
                return Object.assign(t2, e3[E.ActionConstatnts.ACTION_SUBJECTS.ACTION_FOR][E.CallConstants.CALL_KEYS.CALL_ENTITY]);
              }
            } catch (e4) {
              c.Logger.error("CallModel:getCallReceivedByFromData", e4);
            }
          }, e2.TYPE = E.MessageConstatnts.TYPE, e2.RECEIVER_TYPE = E.MessageConstatnts.RECEIVER_TYPE, e2.CATEGORY = E.MessageConstatnts.CATEGORY, e2.ACTION_TYPE = E.ActionConstatnts.ACTION_TYPE, e2;
        }(s.BaseMessage);
        t.Call = S;
      }, function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", { value: true }), t.MessageReceipt = void 0;
        var o = function() {
          function e2() {
            this.RECEIPT_TYPE = { READ_RECEIPT: "read", DELIVERY_RECEIPT: "delivery" }, this.receiptType = this.RECEIPT_TYPE.DELIVERY_RECEIPT;
          }
          return e2.prototype.getReceiverType = function() {
            return this.receiverType;
          }, e2.prototype.setReceiverType = function(e3) {
            this.receiverType = e3;
          }, e2.prototype.getSender = function() {
            return this.sender;
          }, e2.prototype.setSender = function(e3) {
            this.sender = e3;
          }, e2.prototype.getReceiver = function() {
            return this.receiver;
          }, e2.prototype.setReceiver = function(e3) {
            this.receiver = e3;
          }, e2.prototype.getTimestamp = function() {
            return this.timestamp;
          }, e2.prototype.setTimestamp = function(e3) {
            this.timestamp = e3;
          }, e2.prototype.setReadAt = function(e3) {
            this.readAt = e3;
          }, e2.prototype.getReadAt = function() {
            return this.readAt;
          }, e2.prototype.setDeliveredAt = function(e3) {
            this.deliveredAt = e3;
          }, e2.prototype.getDeliveredAt = function() {
            return this.deliveredAt;
          }, e2.prototype.getMessageId = function() {
            return this.messageId;
          }, e2.prototype.setMessageId = function(e3) {
            this.messageId = e3;
          }, e2.prototype.getReceiptType = function() {
            return this.receiptType;
          }, e2.prototype.setReceiptType = function(e3) {
            void 0 === e3 && (e3 = this.RECEIPT_TYPE.DELIVERY_RECEIPT), this.receiptType = e3;
          }, e2;
        }();
        t.MessageReceipt = o;
      }, function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", { value: true }), t.KeyStore = void 0;
        var o = n(4), s = n(0), r = n(1), i = n(13), a = n(2), E = function() {
          function e2(e3) {
            this.store = r.constants.DEFAULT_STORE, s.isFalsy(e3) || (this.store = e3), this.keyStore = i.createInstance({ name: s.format(r.LOCAL_STORE.STORE_STRING, o.CometChat.getAppId(), r.LOCAL_STORE.KEYS_STORE) }), this.keyStore.setDriver([i.LOCALSTORAGE, i.INDEXEDDB, i.WEBSQL]);
          }
          return e2.getInstance = function() {
            return null == e2.KeyStore && (e2.KeyStore = new e2()), e2.KeyStore;
          }, e2.prototype.set = function(e3, t2) {
            return this.keyStore.setItem(e3, t2);
          }, e2.prototype.remove = function(e3) {
            this.keyStore.removeItem(e3);
          }, e2.prototype.get = function(e3) {
            var o2 = this;
            return new Promise(function(n2, t2) {
              try {
                o2.keyStore.getItem(e3).then(function(t3) {
                  try {
                    n2(JSON.parse(t3));
                  } catch (e4) {
                    n2(t3);
                  }
                }, function(e4) {
                  t2(e4);
                });
              } catch (e4) {
                t2(new a.CometChatException(e4));
              }
            });
          }, e2.prototype.clearStore = function() {
            return this.keyStore.clear();
          }, e2;
        }();
        t.KeyStore = E;
      }, function(e, t, n) {
        "use strict";
        var o, i = this && this.__extends || (o = function(e2, t2) {
          return (o = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e3, t3) {
            e3.__proto__ = t3;
          } || function(e3, t3) {
            for (var n2 in t3)
              t3.hasOwnProperty(n2) && (e3[n2] = t3[n2]);
          })(e2, t2);
        }, function(e2, t2) {
          function n2() {
            this.constructor = e2;
          }
          o(e2, t2), e2.prototype = null === t2 ? Object.create(t2) : (n2.prototype = t2.prototype, new n2());
        });
        Object.defineProperty(t, "__esModule", { value: true }), t.WSConnectionListener = t.UserLoginListener = t.CallsListener = t.UserCallListener = t.GroupsListener = t.UsersListener = t.MessagesListener = t.Listener = t.ConnectionListener = t.LoginListener = t.OngoingCallListener = t.GroupListener = t.UserListener = t.CallListener = t.MessageListener = void 0;
        var s = n(0), r = function() {
          for (var e2 = [], t2 = 0; t2 < arguments.length; t2++)
            e2[t2] = arguments[t2];
          this.onTextMessageReceived = void 0, this.onMediaMessageReceived = void 0, this.onCustomMessageReceived = void 0, this.onTypingStarted = void 0, this.onTypingEnded = void 0, this.onMessagesDelivered = void 0, this.onMessagesRead = void 0, this.onMessageEdited = void 0, this.onMessageDeleted = void 0, this.onTransientMessageReceived = void 0, this.onInteractiveMessageReceived = void 0, this.onInteractionGoalCompleted = void 0, this.onMessageReactionAdded = void 0, this.onMessageReactionRemoved = void 0, s.isFalsy(e2[0].onTextMessageReceived) || (this.onTextMessageReceived = e2[0].onTextMessageReceived), s.isFalsy(e2[0].onMediaMessageReceived) || (this.onMediaMessageReceived = e2[0].onMediaMessageReceived), s.isFalsy(e2[0].onTypingStarted) || (this.onTypingStarted = e2[0].onTypingStarted), s.isFalsy(e2[0].onTypingEnded) || (this.onTypingEnded = e2[0].onTypingEnded), s.isFalsy(e2[0].onMessagesDelivered) || (this.onMessagesDelivered = e2[0].onMessagesDelivered), s.isFalsy(e2[0].onMessagesRead) || (this.onMessagesRead = e2[0].onMessagesRead), s.isFalsy(e2[0].onCustomMessageReceived) || (this.onCustomMessageReceived = e2[0].onCustomMessageReceived), s.isFalsy(e2[0].onMessageEdited) || (this.onMessageEdited = e2[0].onMessageEdited), s.isFalsy(e2[0].onMessageDeleted) || (this.onMessageDeleted = e2[0].onMessageDeleted), s.isFalsy(e2[0].onTransientMessageReceived) || (this.onTransientMessageReceived = e2[0].onTransientMessageReceived), s.isFalsy(e2[0].onInteractiveMessageReceived) || (this.onInteractiveMessageReceived = e2[0].onInteractiveMessageReceived), s.isFalsy(e2[0].onInteractionGoalCompleted) || (this.onInteractionGoalCompleted = e2[0].onInteractionGoalCompleted), s.isFalsy(e2[0].onMessageReactionAdded) || (this.onMessageReactionAdded = e2[0].onMessageReactionAdded), s.isFalsy(e2[0].onMessageReactionRemoved) || (this.onMessageReactionRemoved = e2[0].onMessageReactionRemoved);
        };
        t.MessageListener = r;
        var a = function() {
          for (var e2 = [], t2 = 0; t2 < arguments.length; t2++)
            e2[t2] = arguments[t2];
          this.onIncomingCallReceived = void 0, this.onOutgoingCallAccepted = void 0, this.onOutgoingCallRejected = void 0, this.onIncomingCallCancelled = void 0, this.onCallEndedMessageReceived = void 0, s.isFalsy(e2[0].onIncomingCallReceived) || (this.onIncomingCallReceived = e2[0].onIncomingCallReceived), s.isFalsy(e2[0].onOutgoingCallAccepted) || (this.onOutgoingCallAccepted = e2[0].onOutgoingCallAccepted), s.isFalsy(e2[0].onOutgoingCallRejected) || (this.onOutgoingCallRejected = e2[0].onOutgoingCallRejected), s.isFalsy(e2[0].onIncomingCallCancelled) || (this.onIncomingCallCancelled = e2[0].onIncomingCallCancelled), s.isFalsy(e2[0].onCallEndedMessageReceived) || (this.onCallEndedMessageReceived = e2[0].onCallEndedMessageReceived);
        };
        t.CallListener = a;
        var E = function() {
          for (var e2 = [], t2 = 0; t2 < arguments.length; t2++)
            e2[t2] = arguments[t2];
          s.isFalsy(e2[0].onUserOnline) || (this.onUserOnline = e2[0].onUserOnline), s.isFalsy(e2[0].onUserOffline) || (this.onUserOffline = e2[0].onUserOffline);
        };
        t.UserListener = E;
        var c = function() {
          for (var e2 = [], t2 = 0; t2 < arguments.length; t2++)
            e2[t2] = arguments[t2];
          s.isFalsy(e2[0].onGroupMemberJoined) || (this.onGroupMemberJoined = e2[0].onGroupMemberJoined), s.isFalsy(e2[0].onGroupMemberLeft) || (this.onGroupMemberLeft = e2[0].onGroupMemberLeft), s.isFalsy(e2[0].onGroupMemberKicked) || (this.onGroupMemberKicked = e2[0].onGroupMemberKicked), s.isFalsy(e2[0].onGroupMemberBanned) || (this.onGroupMemberBanned = e2[0].onGroupMemberBanned), s.isFalsy(e2[0].onGroupMemberUnbanned) || (this.onGroupMemberUnbanned = e2[0].onGroupMemberUnbanned), s.isFalsy(e2[0].onGroupMemberScopeChanged) || (this.onGroupMemberScopeChanged = e2[0].onGroupMemberScopeChanged), s.isFalsy(e2[0].onMemberAddedToGroup) || (this.onGroupMemberAddedToGroup = e2[0].onMemberAddedToGroup);
        };
        t.GroupListener = c;
        var u = function() {
          for (var e2 = [], t2 = 0; t2 < arguments.length; t2++)
            e2[t2] = arguments[t2];
          s.isFalsy(e2[0].onYouLeft) || (this.onYouLeft = e2[0].onYouLeft), s.isFalsy(e2[0].onYouJoined) || (this.onYouJoined = e2[0].onYouJoined), s.isFalsy(e2[0].onUserJoined) || (this.onUserJoined = e2[0].onUserJoined), s.isFalsy(e2[0].onUserLeft) || (this.onUserLeft = e2[0].onUserLeft), s.isFalsy(e2[0].onUserListUpdated) || (this.onUserListUpdated = e2[0].onUserListUpdated), s.isFalsy(e2[0].onMediaDeviceListUpdated) || (this.onMediaDeviceListUpdated = e2[0].onMediaDeviceListUpdated), s.isFalsy(e2[0].onRecordingStarted) || (this.onRecordingStarted = e2[0].onRecordingStarted), s.isFalsy(e2[0].onRecordingStopped) || (this.onRecordingStopped = e2[0].onRecordingStopped), s.isFalsy(e2[0].onScreenShareStarted) || (this.onScreenShareStarted = e2[0].onScreenShareStarted), s.isFalsy(e2[0].onScreenShareStopped) || (this.onScreenShareStopped = e2[0].onScreenShareStopped), s.isFalsy(e2[0].onUserMuted) || (this.onUserMuted = e2[0].onUserMuted), s.isFalsy(e2[0].onCallSwitchedToVideo) || (this.onCallSwitchedToVideo = e2[0].onCallSwitchedToVideo), s.isFalsy(e2[0].onCallEnded) || (this.onCallEnded = e2[0].onCallEnded), s.isFalsy(e2[0].onError) || (this.onError = e2[0].onError);
        };
        t.OngoingCallListener = u;
        var S = function() {
          for (var e2 = [], t2 = 0; t2 < arguments.length; t2++)
            e2[t2] = arguments[t2];
          s.isFalsy(e2[0].loginSuccess) || (this.loginSuccess = e2[0].loginSuccess), s.isFalsy(e2[0].loginFailure) || (this.loginFailure = e2[0].loginFailure), s.isFalsy(e2[0].logoutSuccess) || (this.logoutSuccess = e2[0].logoutSuccess), s.isFalsy(e2[0].logoutFailure) || (this.logoutFailure = e2[0].logoutFailure);
        };
        t.LoginListener = S;
        var p = function() {
          for (var e2 = [], t2 = 0; t2 < arguments.length; t2++)
            e2[t2] = arguments[t2];
          this.onConnected = void 0, this.inConnecting = void 0, this.onDisconnected = void 0, this.onFeatureThrottled = void 0, s.isFalsy(e2[0].onConnected) || (this.onConnected = e2[0].onConnected), s.isFalsy(e2[0].inConnecting) || (this.inConnecting = e2[0].inConnecting), s.isFalsy(e2[0].onDisconnected) || (this.onDisconnected = e2[0].onDisconnected), s.isFalsy(e2[0].onFeatureThrottled) || (this.onFeatureThrottled = e2[0].onFeatureThrottled);
        };
        t.ConnectionListener = p;
        var l = function(e2, t2) {
          this._name = e2, this._callback = t2;
        }, C = function(r2) {
          function e2(e3, t2, n2, o2) {
            var s2 = r2.call(this, e3, o2) || this;
            return s2._eventListener = t2, n2 && (s2._cursor = n2), s2;
          }
          return i(e2, r2), e2;
        }(t.Listener = l);
        t.MessagesListener = C;
        var T = function(r2) {
          function e2(e3, t2, n2, o2) {
            var s2 = r2.call(this, e3, o2) || this;
            return s2._eventListener = t2, n2 && (s2._cursor = n2), s2;
          }
          return i(e2, r2), e2;
        }(l);
        t.UsersListener = T;
        var d = function(r2) {
          function e2(e3, t2, n2, o2) {
            var s2 = r2.call(this, e3, o2) || this;
            return s2._eventListener = t2, n2 && (s2._cursor = n2), s2;
          }
          return i(e2, r2), e2;
        }(l);
        t.GroupsListener = d;
        var _ = function(s2) {
          function e2(e3, t2, n2) {
            var o2 = s2.call(this, "callListner", n2) || this;
            return o2._eventListener = e3, o2;
          }
          return i(e2, s2), e2;
        }(l);
        t.UserCallListener = _;
        var g = function(r2) {
          function e2(e3, t2, n2, o2) {
            var s2 = r2.call(this, e3, o2) || this;
            return s2._eventListener = t2, s2;
          }
          return i(e2, r2), e2;
        }(l);
        t.CallsListener = g;
        var h = function(r2) {
          function e2(e3, t2, n2, o2) {
            var s2 = r2.call(this, e3, o2) || this;
            return s2._eventListener = t2, n2 && (s2._cursor = n2), s2;
          }
          return i(e2, r2), e2;
        }(l);
        t.UserLoginListener = h;
        var A = function(r2) {
          function e2(e3, t2, n2, o2) {
            var s2 = r2.call(this, e3, o2) || this;
            return s2._eventListener = t2, n2 && (s2._cursor = n2), s2;
          }
          return i(e2, r2), e2;
        }(l);
        t.WSConnectionListener = A;
      }, function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", { value: true }), t.ConversationController = void 0;
        var c = n(40), u = n(0), o = function() {
          function e2() {
          }
          return e2.trasformJSONConversation = function(e3, t2, n2, o2, s, r, i, a) {
            var E;
            try {
              E = new c.Conversation(e3, t2, n2, o2, s, r, i, a);
            } catch (e4) {
              u.Logger.error("ConversationController:transformJSONConversation", e4);
            }
            return E;
          }, e2;
        }();
        t.ConversationController = o;
      }, function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", { value: true }), t.MessageListnerMaping = void 0;
        var o = n(0), s = n(1), r = n(13), i = n(4), a = function() {
          function e2(e3) {
            this.store = s.constants.DEFAULT_STORE, o.isFalsy(e3) || (this.store = e3), this.settingsStore = r.createInstance({ name: o.format(s.LOCAL_STORE.STORE_STRING, i.CometChat.getAppId(), s.LOCAL_STORE.MESSAGE_LISTENERS_LIST) }), this.settingsStore.setDriver([r.LOCALSTORAGE, r.INDEXEDDB, r.WEBSQL]);
          }
          return e2.getInstance = function() {
            return null == e2.settingsStore && (e2.settingsStore = new e2()), e2.settingsStore;
          }, e2.prototype.set = function(e3, t2) {
            return this.settingsStore.setItem(e3, t2);
          }, e2.prototype.remove = function(e3) {
            this.settingsStore.removeItem(e3);
          }, e2.prototype.get = function(e3) {
            return this.settingsStore.getItem(e3);
          }, e2.prototype.clearStore = function() {
            return this.settingsStore.clear();
          }, e2.prototype.clear = function(e3) {
          }, e2.prototype.selectStore = function(e3) {
            this.store = e3;
          }, e2.settingsStore = null, e2;
        }();
        t.MessageListnerMaping = a;
      }, function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", { value: true }), t.TypingIndicator = void 0;
        var o = function() {
          function e2(e3, t2, n2) {
            this.receiverId = e3, this.receiverType = t2, this.metadata = n2;
          }
          return e2.prototype.getReceiverType = function() {
            return this.receiverType;
          }, e2.prototype.setReceiverType = function(e3) {
            this.receiverType = e3;
          }, e2.prototype.getReceiverId = function() {
            return this.receiverId;
          }, e2.prototype.setReceiverId = function(e3) {
            this.receiverId = e3;
          }, e2.prototype.getMetadata = function() {
            return this.metadata;
          }, e2.prototype.setMetadata = function(e3) {
            this.metadata = e3;
          }, e2.prototype.getSender = function() {
            return this.sender;
          }, e2.prototype.setSender = function(e3) {
            this.sender = e3;
          }, e2;
        }();
        t.TypingIndicator = o;
      }, function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", { value: true }), t.TransientMessage = void 0;
        var o = function() {
          function e2(e3, t2, n2) {
            this.receiverId = e3, this.receiverType = t2, this.data = n2 || {};
          }
          return e2.prototype.getReceiverId = function() {
            return this.receiverId;
          }, e2.prototype.setReceiverId = function(e3) {
            this.receiverId = e3;
          }, e2.prototype.getReceiverType = function() {
            return this.receiverType;
          }, e2.prototype.setReceiverType = function(e3) {
            this.receiverType = e3;
          }, e2.prototype.getData = function() {
            return this.data;
          }, e2.prototype.setData = function(e3) {
            this.data = e3;
          }, e2.prototype.getSender = function() {
            return this.sender;
          }, e2.prototype.setSender = function(e3) {
            this.sender = e3;
          }, e2;
        }();
        t.TransientMessage = o;
      }, function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", { value: true }), t.EndpointFactory = void 0;
        var c = n(0), u = n(1), o = n(14), S = n(4), p = n(2), s = function() {
          function E() {
            this.baseUrl = "https://%s.apiclient-%s.cometchat.io/", this.apiVersion = u.APPINFO.apiVersion, this.adminApiUrl = "https://%s.api-%s.cometchat.io/", this.adminApiVersion = u.APPINFO.apiVersion, this.extensionApi = "https://%s-%s.%s/%s", this.prosodyApi = "https://%s.%s/%s", this.wsApi = "https://%s/%s", this.uriEndpoints = { authToken: { endpoint: "users/{{uid}}/auth_tokens", method: "POST", data: { uid: "string|max:100" }, isAdminApi: true }, appSettings: { endpoint: "settings", method: "GET" }, login: { endpoint: "admin/users/auth", method: "POST", data: { uid: "string|max:100" } }, logout: { endpoint: "admin/users/auth/{{authToken}}", method: "DELETE" }, getMyDetails: { endpoint: "me", method: "GET" }, updateMyDetails: { endpoint: "me", method: "PUT" }, getJWT: { endpoint: "me/jwt", method: "POST" }, userSessions: { endpoint: "user_sessions", method: "POST" }, users: { endpoint: "users", method: "GET" }, user: { endpoint: "users/{{uid}}", method: "GET" }, blockUsers: { endpoint: "blockedusers", method: "POST" }, blockedUsersList: { endpoint: "blockedusers", method: "GET" }, unblockUsers: { endpoint: "blockedusers", method: "DELETE" }, userLogout: { endpoint: "me", method: "DELETE" }, createUser: { endpoint: "users", method: "POST", isAdminApi: true }, updateUser: { endpoint: "users/{{uid}}", method: "PUT", isAdminApi: true }, sendFriendRequests: { endpoint: "user/friends", method: "POST", data: { uids: "array<string|max:100>" } }, getFriends: { endpoint: "user/friends", method: "GET" }, unfriend: { endpoint: "user/friends/{{uid}}/{{gid}}", method: "DELETE", data: { uids: "array<string|max:100>" } }, acceptFriendRequest: { endpoint: "user/friends/{{uid}}/accept", method: "PUT", data: { uids: "array<string|max:100>" } }, rejectFriendRequest: { endpoint: "user/friends/{{uid}}/reject", method: "DELETE", data: { uids: "array<string|max:100>" } }, createGroup: { endpoint: "groups", method: "POST", data: { guid: "required|string|max:100", name: "required|string|max:100", type: "enum|public,protected,password", password: "filled|string|max:100" } }, getGroups: { endpoint: "groups", method: "GET" }, getGroup: { endpoint: "groups/{{guid}}", method: "GET" }, updateGroup: { endpoint: "groups/{{guid}}", method: "PUT" }, deleteGroup: { endpoint: "groups/{{guid}}", method: "DELETE" }, addGroupMembers: { endpoint: "groups/{{guid}}/members", method: "POST", data: { uids: "array<string|max:100>" } }, getGroupMembers: { endpoint: "groups/{{guid}}/members", method: "GET" }, joinGroup: { endpoint: "groups/{{guid}}/members", method: "POST" }, leaveGroup: { endpoint: "groups/{{guid}}/members", method: "DELETE" }, kickGroupMembers: { endpoint: "groups/{{guid}}/members/{{uid}}", method: "DELETE", data: { uids: "array<string|max:100>" } }, changeScopeOfMember: { endpoint: "groups/{{guid}}/members/{{uid}}", method: "PUT", data: { uids: "array<string|max:100>" } }, banGroupMember: { endpoint: "groups/{{guid}}/bannedusers/{{uid}}", method: "POST", data: { uids: "array<string|max:100>" } }, unbanGroupMember: { endpoint: "groups/{{guid}}/bannedusers/{{uid}}", method: "DELETE", data: { uids: "array<string|max:100>" } }, addMemebersToGroup: { endpoint: "groups/{{guid}}/members", method: "PUT" }, getBannedGroupMembers: { endpoint: "groups/{{guid}}/bannedusers", method: "GET" }, promotemoteGroupMember: { endpoint: "groups/{{guid}}/promote", method: "PUT", data: { uids: "array<string|max:100>" } }, demoteGroupMember: { endpoint: "groups/{{guid}}/demote", method: "DELETE", data: { uids: "array<string|max:100>" } }, transferOwnership: { endpoint: "groups/{{guid}}/owner", method: "PATCH" }, sendMessage: { endpoint: "messages", method: "POST", data: { sender: "array:string:max:100>", isGroupMember: "filled|boolean|bail", data: "required|json" } }, sendMessageInThread: { endpoint: "messages/{{parentId}}/thread", method: "POST", data: { sender: "array:string:max:100>", isGroupMember: "filled|boolean|bail", data: "required|json" } }, getMessages: { endpoint: "messages", method: "GET" }, getMessageDetails: { endpoint: "messages/{{messageId}}", method: "GET" }, addReaction: { endpoint: "messages/{{messageId}}/reactions/{{reaction}}", method: "POST" }, removeReaction: { endpoint: "messages/{{messageId}}/reactions/{{reaction}}", method: "DELETE" }, getFilteredReactionsList: { endpoint: "messages/{{messageId}}/reactions/{{reaction}}", method: "GET", data: {} }, getReactionsList: { endpoint: "messages/{{messageId}}/reactions", method: "GET", data: {} }, getUserMessages: { endpoint: "users/{{listId}}/messages", method: "GET" }, getGroupMessages: { endpoint: "groups/{{listId}}/messages", method: "GET" }, getThreadMessages: { endpoint: "messages/{{listId}}/thread", method: "GET" }, getMessage: { endpoint: "user/messages/{{muid}}", method: "GET" }, updateMessage: { endpoint: "messages/{{messageId}}", method: "PUT" }, deleteMessage: { endpoint: "messages/{{messageId}}", method: "DELETE" }, markUserMessagesAsUnread: { endpoint: "users/{{uid}}/conversation/read", method: "DELETE" }, markGroupMessagesAsUnread: { endpoint: "groups/{{guid}}/conversation/read", method: "DELETE" }, createCallSession: { endpoint: "calls", method: "POST", data: {} }, updateCallSession: { endpoint: "calls/{{sessionid}}", method: "put", data: {} }, getConversations: { endpoint: "conversations", method: "GET" }, getUserConversation: { endpoint: "users/{{uid}}/conversation", method: "GET" }, getGroupConversation: { endpoint: "groups/{{guid}}/conversation", method: "GET" }, deleteUserConversation: { endpoint: "users/{{uid}}/conversation", method: "DELETE" }, deleteGroupConversation: { endpoint: "groups/{{guid}}/conversation", method: "DELETE" }, updateUserConversation: { endpoint: "users/{{uid}}/conversation", method: "PUT" }, updateGroupConversation: { endpoint: "groups/{{guid}}/conversation", method: "PUT" }, updateCallType: { endpoint: "calls/{{sessionid}}/type", method: "PATCH" }, getUserConversationStarter: { endpoint: "ai/conversation-starter/users/{{uid}}", method: "GET", isAIApi: true }, getGroupConversationStarter: { endpoint: "ai/conversation-starter/groups/{{guid}}", method: "GET", isAIApi: true }, getUserSmartReply: { endpoint: "ai/smart-replies/users/{{uid}}", method: "GET", isAIApi: true }, getGroupSmartReply: { endpoint: "ai/smart-replies/groups/{{guid}}", method: "GET", isAIApi: true }, markInteracted: { endpoint: "messages/{{messageId}}/interacted", method: "PATCH" }, getUserConversationSummary: { endpoint: "ai/conversation-summary/users/{{uid}}", method: "GET", isAIApi: true }, getGroupConversationSummary: { endpoint: "ai/conversation-summary/groups/{{guid}}", method: "GET", isAIApi: true }, getBotAssistanceInUserConversation: { endpoint: "ai/bots/{{botId}}/assistance/users/{{uid}}", method: "GET", isAIApi: true }, getBotAssistanceInGroupConversation: { endpoint: "ai/bots/{{botId}}/assistance/groups/{{guid}}", method: "GET", isAIApi: true } };
          }
          return E.prototype.getEndpointData = function(a) {
            return new Promise(function(s2, t2) {
              try {
                var r = S.CometChat.appSettings.getAdminHost(), i = S.CometChat.appSettings.getClientHost();
                o.LocalStorage.getInstance().get(u.LOCAL_STORE.KEY_APP_SETTINGS).then(function(e2) {
                  if (c.isFalsy(e2)) {
                    var t3 = {};
                    if (new E().uriEndpoints.hasOwnProperty(a))
                      if ((t3 = new E().uriEndpoints[a]).hasOwnProperty("isAdminApi"))
                        if (c.isFalsy(r)) {
                          var n2 = c.format(new E().adminApiUrl, S.CometChat.getAppId(), S.CometChat.appSettings.getRegion()) + new E().adminApiVersion + "/" + t3.endpoint;
                          t3.endpoint = n2, s2(t3);
                        } else {
                          n2 = "https://" + r + "/" + t3.endpoint;
                          t3.endpoint = n2, s2(t3);
                        }
                      else if (c.isFalsy(i)) {
                        n2 = c.format(new E().baseUrl, S.CometChat.getAppId(), S.CometChat.appSettings.getRegion()) + new E().apiVersion + "/" + t3.endpoint;
                        t3.endpoint = n2, s2(t3);
                      } else {
                        n2 = "https://" + i + "/" + t3.endpoint;
                        t3.endpoint = n2, s2(t3);
                      }
                  } else {
                    t3 = {};
                    if (new E().uriEndpoints.hasOwnProperty(a))
                      if ((t3 = new E().uriEndpoints[a]).hasOwnProperty("isAdminApi")) {
                        var o2 = "https://" + e2[u.APP_SETTINGS.KEYS.ADMIN_API_HOST] + "/" + e2[u.APP_SETTINGS.KEYS.CHAT_API_VERSION] + "/" + t3.endpoint;
                        t3.endpoint = o2, s2(t3);
                      } else {
                        o2 = "https://" + e2[u.APP_SETTINGS.KEYS.CLIENT_API_HOST] + "/" + e2[u.APP_SETTINGS.KEYS.CHAT_API_VERSION] + "/" + t3.endpoint;
                        t3.endpoint = o2, s2(t3);
                      }
                  }
                }, function(e2) {
                  var t3;
                  if (new E().uriEndpoints.hasOwnProperty(a))
                    if ((t3 = new E().uriEndpoints[a]).hasOwnProperty(["isAdminApi"]))
                      if (c.isFalsy(r)) {
                        var n2 = c.format(new E().adminApiUrl, S.CometChat.getAppId(), S.CometChat.appSettings.getRegion()) + new E().adminApiVersion + "/" + t3.endpoint;
                        t3.endpoint = n2, s2(t3);
                      } else
                        t3.endpoint = "https://" + r + "/" + t3.endpoint, s2(t3);
                    else if (c.isFalsy(i)) {
                      n2 = c.format(new E().baseUrl, S.CometChat.getAppId(), S.CometChat.appSettings.getRegion()) + new E().apiVersion + "/" + t3.endpoint;
                      t3.endpoint = n2, s2(t3);
                    } else
                      t3.endpoint = "https://" + i + "/" + t3.endpoint, s2(t3);
                });
              } catch (e2) {
                t2(new p.CometChatException(e2));
              }
            });
          }, E;
        }();
        t.EndpointFactory = s;
      }, function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", { value: true }), t.getEndPoint = void 0;
        var o = n(33), i = n(2);
        t.getEndPoint = function(e2, r) {
          void 0 === e2 && (e2 = ""), void 0 === r && (r = {});
          var t2 = new o.EndpointFactory();
          return new Promise(function(o2, s) {
            try {
              t2.getEndpointData(e2).then(function(e3) {
                var t3 = e3;
                if (t3) {
                  for (var n2 in r)
                    t3.endpoint = t3.endpoint.replace("{{" + n2 + "}}", r[n2]);
                  o2(t3);
                } else
                  s({ error: "Unknown endPoint name." });
              });
            } catch (e3) {
              s(new i.CometChatException(e3));
            }
          });
        };
      }, function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", { value: true }), t.InteractionGoal = void 0;
        var o = function() {
          function e2(e3, t2) {
            this.elementIds = [], this.type = e3, this.elementIds = t2;
          }
          return e2.prototype.getType = function() {
            return this.type;
          }, e2.prototype.setType = function(e3) {
            this.type = e3;
          }, e2.prototype.getElementIds = function() {
            return this.elementIds;
          }, e2.prototype.setElementIds = function(e3) {
            this.elementIds = e3;
          }, e2;
        }();
        t.InteractionGoal = o;
      }, function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", { value: true }), t.CallController = void 0;
        var h = n(1), A = n(0), R = n(4), s = n(2), o = n(28), r = n(37), I = n(3), f = n(6), i = function() {
          function g() {
            this.TAG = "calling Log", this.CALL_NO_ANSWER_INTERVAL = 45e3, this.view = void 0, this.isDev = false;
          }
          return g.prototype.getCallListner = function() {
            return g.callListner;
          }, g.prototype.setCallListner = function(e2) {
            g.callListner = new o.UserCallListener(e2);
          }, g.getInstance = function() {
            try {
              return null != this.callController && null != this.callController || (this.callController = new g()), this.callController;
            } catch (e2) {
              A.Logger.error("CallController: getInstance", e2);
            }
          }, g.prototype.getActiveCall = function() {
            try {
              return A.isFalsy(this.call) ? null : this.call;
            } catch (e2) {
              A.Logger.error("CallController: getActiveCall", e2);
            }
          }, g.prototype.initiateCall = function(n2) {
            var o2 = this;
            return new Promise(function(e2, t2) {
              try {
                A.isFalsy(o2.call) ? null != n2 && null != n2 ? (o2.call = n2, o2.startCallTimer(), e2(n2)) : t2(new s.CometChatException(h.CALL_ERROR.ERROR_IN_CALLING)) : t2(new s.CometChatException(h.CALL_ERROR.CALL_ALREADY_INITIATED));
              } catch (e3) {
                t2(new s.CometChatException(e3));
              }
            });
          }, g.prototype.endCall = function(e2) {
            var t2 = this;
            try {
              document.getElementsByName("frame").forEach(function(e3) {
                t2.view && (t2.view.removeChild(e3), t2.view = void 0);
              }), this.endCallSession();
            } catch (e3) {
              A.Logger.error("CallController: endCall", e3);
            }
          }, g.prototype.onCallStarted = function(n2) {
            var o2 = this;
            return new Promise(function(e2, t2) {
              try {
                A.isFalsy(o2.call) ? null != n2 && null != n2 ? e2(o2.call = n2) : t2(new s.CometChatException(h.CALL_ERROR.ERROR_IN_CALLING)) : t2(new s.CometChatException(h.CALL_ERROR.CALL_ALREADY_INITIATED));
              } catch (e3) {
                t2(new s.CometChatException(e3));
              }
            });
          }, g.prototype.endCallSession = function() {
            try {
              this.call = void 0, g.callController = void 0, this.timer && this.stopCallTimer(), this.view = void 0, this.removeListener(), g.callScreen = null, g.callSettings = null;
            } catch (e2) {
              A.Logger.error("CallController:EndCallSession", { e: e2 });
            }
          }, g.prototype.startCallTimer = function() {
            var t2 = this;
            try {
              this.timer = setTimeout(function() {
                t2.call ? R.CometChat.sendUnansweredResponse(t2.call.getSessionId()).then(function(e2) {
                  t2.endCallSession();
                }, function(e2) {
                  t2.endCallSession();
                }) : t2.endCallSession();
              }, this.CALL_NO_ANSWER_INTERVAL);
            } catch (e2) {
              A.Logger.error("CallController: startCallTimer", e2);
            }
          }, g.prototype.stopCallTimer = function() {
            try {
              clearTimeout(this.timer);
            } catch (e2) {
              A.Logger.error("CallController: stopCallTimer", e2);
            }
          }, g.prototype.startCall = function(t2, n2) {
            var o2 = this;
            try {
              this.timer && this.stopCallTimer();
              var s2 = document.createElement("iframe");
              this.getCallUrl().then(function(e2) {
                s2.src = e2 + "", s2.name = "frame", s2.setAttribute("allow", "camera; microphone; display-capture;"), s2.setAttribute("width", "100%"), s2.setAttribute("height", "100%"), g.callScreen = s2, g.callSettings = t2, n2 && (o2.view = n2), n2.appendChild(s2), o2.addListener();
              });
            } catch (e2) {
              A.Logger.error("CallController: startCall", e2);
            }
          }, g.prototype.addListener = function() {
            window.addEventListener("message", this.handler, true);
          }, g.prototype.removeListener = function() {
            window.removeEventListener("message", this.handler, true);
          }, g.prototype.handler = function(e2) {
            var t2, n2 = this, o2 = g.callSettings, s2 = g.callScreen, r2 = g.getInstance().getActiveCall();
            try {
              if (void 0 !== (t2 = JSON.parse(e2.data)) && t2.type == h.CallConstants.POST_MESSAGES.TYPES.HANGUP)
                g.deviceList = null, r2 ? (A.Logger.info(this.TAG, g.callListner), window.setTimeout(function() {
                  R.CometChat.endCall(r2.getSessionId(), true).then(function(e3) {
                    A.Logger.info(n2.TAG, { call: e3 });
                  }).catch(function(e3) {
                    A.Logger.info(n2.TAG, "The Call Was Already Ended");
                  });
                }, 1e3)) : R.CometChat.endCall(o2.getSessionId(), true).then(function(e3) {
                  A.Logger.info(n2.TAG, { call: e3 });
                }).catch(function(e3) {
                  A.Logger.info(n2.TAG, "The Call Was Already Ended");
                });
              else if (void 0 !== t2 && t2.type == h.CallConstants.POST_MESSAGES.TYPES.ACTION_MESSAGE && t2.action == h.CallConstants.POST_MESSAGES.ACTIONS.USER_JOINED) {
                if (t2.value) {
                  var i2 = void 0, a = t2.value;
                  A.isFalsy(a.uid) || A.isFalsy(a.name) || ((i2 = new I.User(a)).setStatus("online"), R.CometChat.user.getUid().toLowerCase() != i2.getUid().toLowerCase() && g.callListner && (A.isFalsy(g.callListner._eventListener.onUserJoined) || g.callListner._eventListener.onUserJoined(i2)));
                }
              } else if (void 0 !== t2 && t2.type == h.CallConstants.POST_MESSAGES.TYPES.ACTION_MESSAGE && t2.action == h.CallConstants.POST_MESSAGES.ACTIONS.USER_LEFT) {
                if (t2.value) {
                  i2 = void 0, a = t2.value;
                  A.isFalsy(a.uid) || A.isFalsy(a.name) || ((i2 = new I.User(a)).setStatus("online"), R.CometChat.user.getUid().toLowerCase() != i2.getUid().toLowerCase() && g.callListner && (A.isFalsy(g.callListner._eventListener.onUserLeft) || g.callListner._eventListener.onUserLeft(i2)));
                }
              } else if (void 0 !== t2 && t2.type == h.CallConstants.POST_MESSAGES.TYPES.ACTION_MESSAGE && t2.action == h.CallConstants.POST_MESSAGES.ACTIONS.USER_LIST_CHANGED) {
                var E = [];
                if (t2.value && 0 < t2.value.length)
                  t2.value.map(function(e3) {
                    if (!A.isFalsy(e3.uid) && !A.isFalsy(e3.name)) {
                      var t3 = new I.User(e3);
                      t3.setStatus("online"), E.push(t3);
                    }
                  }), g.callListner && (A.isFalsy(g.callListner._eventListener.onUserListUpdated) || g.callListner._eventListener.onUserListUpdated(E));
              } else if (void 0 !== t2 && t2.type == h.CallConstants.POST_MESSAGES.TYPES.ACTION_MESSAGE && t2.action == h.CallConstants.POST_MESSAGES.ACTIONS.INITIAL_DEVICE_LIST)
                A.Logger.info("initialDeviceList received in SDK = ", t2), t2.value && (g.deviceList = t2.value);
              else if (void 0 !== t2 && t2.type == h.CallConstants.POST_MESSAGES.TYPES.ACTION_MESSAGE && t2.action == h.CallConstants.POST_MESSAGES.ACTIONS.DEVICE_CHANGE) {
                if (A.Logger.info("onDeviceChange received in SDK = ", t2), t2.value) {
                  g.deviceList = t2.value;
                  var c = g.getAvailableDeviceObject(g.deviceList);
                  g.callListner && (A.isFalsy(g.callListner._eventListener.onMediaDeviceListUpdated) || g.callListner._eventListener.onMediaDeviceListUpdated(c));
                }
              } else if (void 0 !== t2 && t2.type == h.CallConstants.POST_MESSAGES.TYPES.ACTION_MESSAGE && t2.action == h.CallConstants.POST_MESSAGES.ACTIONS.RECORDING_TOGGLED) {
                if (A.Logger.info("onRecordingToggled received in SDK = ", t2), t2.value) {
                  if ((C = t2.value).hasOwnProperty("user") && C.hasOwnProperty("recordingStarted") && !A.isFalsy(C.user.uid) && !A.isFalsy(C.user.name)) {
                    var u = new I.User(C.user);
                    u.setStatus("online");
                    var S = C.recordingStarted;
                    g.callListner && (S ? A.isFalsy(g.callListner._eventListener.onRecordingStarted) || g.callListner._eventListener.onRecordingStarted(u) : A.isFalsy(g.callListner._eventListener.onRecordingStopped) || g.callListner._eventListener.onRecordingStopped(u));
                  }
                }
              } else if (void 0 !== t2 && t2.type == h.CallConstants.POST_MESSAGES.TYPES.ACTION_MESSAGE && t2.action == h.CallConstants.POST_MESSAGES.ACTIONS.USER_MUTED) {
                if (A.Logger.info("onUserMuted received in SDK = ", t2), t2.value) {
                  if ((C = t2.value).hasOwnProperty("muted") && C.hasOwnProperty("mutedBy") && !A.isFalsy(C.muted.uid) && !A.isFalsy(C.muted.name) && !A.isFalsy(C.mutedBy.uid) && !A.isFalsy(C.mutedBy.name)) {
                    var p = new I.User(C.muted);
                    p.setStatus("online");
                    var l = new I.User(C.mutedBy);
                    l.setStatus("online"), g.callListner && (A.isFalsy(g.callListner._eventListener.onUserMuted) || g.callListner._eventListener.onUserMuted(p, l));
                  }
                }
              } else if (void 0 !== t2 && t2.type == h.CallConstants.POST_MESSAGES.TYPES.ACTION_MESSAGE && t2.action == h.CallConstants.POST_MESSAGES.ACTIONS.SCREEN_SHARE_STARTED)
                g.callListner && (A.isFalsy(g.callListner._eventListener.onScreenShareStarted) || g.callListner._eventListener.onScreenShareStarted(null));
              else if (void 0 !== t2 && t2.type == h.CallConstants.POST_MESSAGES.TYPES.ACTION_MESSAGE && t2.action == h.CallConstants.POST_MESSAGES.ACTIONS.SCREEN_SHARE_STOPPED)
                g.callListner && (A.isFalsy(g.callListner._eventListener.onScreenShareStopped) || g.callListner._eventListener.onScreenShareStopped(null));
              else if (void 0 !== t2 && t2.type == h.CallConstants.POST_MESSAGES.TYPES.ACTION_MESSAGE && t2.action == h.CallConstants.POST_MESSAGES.ACTIONS.SWITCHED_TO_VIDEO_CALL) {
                if (t2.value) {
                  var C = t2.value;
                  if (A.Logger.info("onCallSwitchedToVideo received in SDK = ", C), C.hasOwnProperty("initiator") && C.hasOwnProperty("sessionId") && !A.isFalsy(C.initiator.uid) && !A.isFalsy(C.sessionId) && C.hasOwnProperty("accepted") && !A.isFalsy(C.accepted.uid)) {
                    var T = C.sessionId, d = new I.User(C.initiator);
                    d.setStatus("online");
                    var _ = new I.User(C.accepted);
                    if (_.setStatus("online"), g.getInstance().getCallListner() && (A.isFalsy(g.getInstance().getCallListner()._eventListener.onCallSwitchedToVideo) || g.getInstance().getCallListner()._eventListener.onCallSwitchedToVideo(T, d, _)), C.initiator.uid.toLowerCase() === R.CometChat.user.getUid().toLowerCase() && !C.sessionId.includes("v1."))
                      try {
                        f.makeApiCall("updateCallType", { sessionid: T }, { type: "video" }).then(function(e3) {
                        }, function(e3) {
                          A.Logger.error("CallController :: onSwitchedToVideo", e3);
                        });
                      } catch (e3) {
                        A.Logger.error("CallController :: onSwitchedToVideo", e3);
                      }
                  }
                }
              } else
                void 0 !== t2 && t2.type && t2.action && t2.type == h.CallConstants.POST_MESSAGES.TYPES.ACTION_MESSAGE && t2.action == h.CallConstants.POST_MESSAGES.ACTIONS.LOAD && null != s2.contentWindow && s2.contentWindow.postMessage({ type: h.CallConstants.POST_MESSAGES.TYPES.COMETCHAT_RTC_SETTINGS, callsettings: JSON.stringify(o2) }, "*");
            } catch (e3) {
              t2 = void 0, A.Logger.error("CallController: startCall", e3);
            }
          }, g.prototype.getCallUrl = function() {
            var e2 = this, o2 = void 0;
            return new Promise(function(t2, n2) {
              try {
                e2.isDev ? (o2 = "https://rtc-test.cometchat.io/?v=" + h.CALLING_COMPONENT_VERSION, t2(o2)) : A.getAppSettings().then(function(e3) {
                  o2 = "https://" + e3[h.APP_SETTINGS.KEYS.WEBRTC_WEB_FRONTEND_HOST] + "/?v=" + h.CALLING_COMPONENT_VERSION, t2(o2);
                });
              } catch (e3) {
                n2(new s.CometChatException(e3));
              }
            });
          }, g.getAvailableDeviceArray = function(e2) {
            var t2 = [];
            try {
              return e2 && 0 < e2.length && e2.map(function(e3) {
                t2.push(new r.MediaDevice(e3.deviceId, e3.label, e3.active));
              }), t2;
            } catch (e3) {
              return A.Logger.error("CallController: getAvailableDeviceArray", e3), t2;
            }
          }, g.getAvailableDeviceObject = function(e2) {
            var t2 = [], n2 = [], o2 = [];
            try {
              return A.isFalsy(e2) || A.isFalsy(e2[h.CallConstants.AUDIO_INPUT_DEVICES]) || (t2 = g.getAvailableDeviceArray(e2[h.CallConstants.AUDIO_INPUT_DEVICES])), A.isFalsy(e2) || A.isFalsy(e2[h.CallConstants.AUDIO_OUTPUT_DEVICES]) || (n2 = g.getAvailableDeviceArray(e2[h.CallConstants.AUDIO_OUTPUT_DEVICES])), A.isFalsy(e2) || A.isFalsy(e2[h.CallConstants.VIDEO_INPUT_DEVICES]) || (o2 = g.getAvailableDeviceArray(e2[h.CallConstants.VIDEO_INPUT_DEVICES])), { audioInputDevices: t2, audioOutputDevices: n2, videoInputDevices: o2 };
            } catch (e3) {
              return A.Logger.error("CallController: getAvailableDeviceObject", e3), { audioInputDevices: t2, audioOutputDevices: n2, videoInputDevices: o2 };
            }
          }, g.prototype.getAudioInputDevices = function() {
            var t2 = [];
            try {
              return A.isFalsy(g.deviceList) || A.isFalsy(g.deviceList[h.CallConstants.AUDIO_INPUT_DEVICES]) || (t2 = g.getAvailableDeviceArray(g.deviceList[h.CallConstants.AUDIO_INPUT_DEVICES])), t2;
            } catch (e2) {
              return A.Logger.error("CallController: getAudioInputDevices", e2), t2;
            }
          }, g.prototype.getAudioOutputDevices = function() {
            var t2 = [];
            try {
              return A.isFalsy(g.deviceList) || A.isFalsy(g.deviceList[h.CallConstants.AUDIO_OUTPUT_DEVICES]) || (t2 = g.getAvailableDeviceArray(g.deviceList[h.CallConstants.AUDIO_OUTPUT_DEVICES])), t2;
            } catch (e2) {
              return A.Logger.error("CallController: getAudioOutputDevices", e2), t2;
            }
          }, g.prototype.getVideoInputDevices = function() {
            var t2 = [];
            try {
              return A.isFalsy(g.deviceList) || A.isFalsy(g.deviceList[h.CallConstants.VIDEO_INPUT_DEVICES]) || (t2 = g.getAvailableDeviceArray(g.deviceList[h.CallConstants.VIDEO_INPUT_DEVICES])), t2;
            } catch (e2) {
              return A.Logger.error("CallController: getVideoInputDevices", e2), t2;
            }
          }, g.prototype.setAudioInputDevice = function(t2) {
            try {
              if (g.callScreen && !A.isFalsy(t2)) {
                var e2 = g.getAvailableDeviceArray(g.deviceList[h.CallConstants.AUDIO_INPUT_DEVICES]).filter(function(e3) {
                  return e3[h.CallConstants.MEDIA_DEVICE.ID] === t2 && !e3[h.CallConstants.MEDIA_DEVICE.ACTIVE];
                });
                e2 && 0 < e2.length && g.callScreen.contentWindow.postMessage({ type: h.CallConstants.POST_MESSAGES.TYPES.ACTION_MESSAGE, action: h.CallConstants.POST_MESSAGES.ACTIONS.CHANGE_AUDIO_INPUT, value: t2 }, "*");
              }
            } catch (e3) {
              A.Logger.error("CallController: setAudioInputDevice", e3);
            }
          }, g.prototype.setAudioOutputDevice = function(t2) {
            try {
              if (g.callScreen && !A.isFalsy(t2)) {
                var e2 = g.getAvailableDeviceArray(g.deviceList[h.CallConstants.AUDIO_OUTPUT_DEVICES]).filter(function(e3) {
                  return e3[h.CallConstants.MEDIA_DEVICE.ID] === t2 && !e3[h.CallConstants.MEDIA_DEVICE.ACTIVE];
                });
                e2 && 0 < e2.length && g.callScreen.contentWindow.postMessage({ type: h.CallConstants.POST_MESSAGES.TYPES.ACTION_MESSAGE, action: h.CallConstants.POST_MESSAGES.ACTIONS.CHANGE_AUDIO_OUTPUT, value: t2 }, "*");
              }
            } catch (e3) {
              A.Logger.error("CallController: setAudioOutputDevice", e3);
            }
          }, g.prototype.setVideoInputDevice = function(t2) {
            try {
              if (g.callScreen && !A.isFalsy(t2)) {
                var e2 = g.getAvailableDeviceArray(g.deviceList[h.CallConstants.VIDEO_INPUT_DEVICES]).filter(function(e3) {
                  return e3[h.CallConstants.MEDIA_DEVICE.ID] === t2 && !e3[h.CallConstants.MEDIA_DEVICE.ACTIVE];
                });
                e2 && 0 < e2.length && g.callScreen.contentWindow.postMessage({ type: h.CallConstants.POST_MESSAGES.TYPES.ACTION_MESSAGE, action: h.CallConstants.POST_MESSAGES.ACTIONS.CHANGE_VIDEO_INPUT, value: t2 }, "*");
              }
            } catch (e3) {
              A.Logger.error("CallController: setVideoInputDevice", e3);
            }
          }, g.prototype.muteAudio = function(e2) {
            try {
              g.callScreen && (e2 ? g.callScreen.contentWindow.postMessage({ type: h.CallConstants.POST_MESSAGES.TYPES.ACTION_MESSAGE, action: h.CallConstants.POST_MESSAGES.ACTIONS.MUTE_AUDIO }, "*") : g.callScreen.contentWindow.postMessage({ type: h.CallConstants.POST_MESSAGES.TYPES.ACTION_MESSAGE, action: h.CallConstants.POST_MESSAGES.ACTIONS.UNMUTE_AUDIO }, "*"));
            } catch (e3) {
              A.Logger.error("CallController: muteAudio", e3);
            }
          }, g.prototype.pauseVideo = function(e2) {
            try {
              g.callScreen && (e2 ? g.callScreen.contentWindow.postMessage({ type: h.CallConstants.POST_MESSAGES.TYPES.ACTION_MESSAGE, action: h.CallConstants.POST_MESSAGES.ACTIONS.PAUSE_VIDEO }, "*") : g.callScreen.contentWindow.postMessage({ type: h.CallConstants.POST_MESSAGES.TYPES.ACTION_MESSAGE, action: h.CallConstants.POST_MESSAGES.ACTIONS.UNPAUSE_VIDEO }, "*"));
            } catch (e3) {
              A.Logger.error("CallController: pauseVideo", e3);
            }
          }, g.prototype.setMode = function(e2) {
            try {
              g.callScreen && !A.isFalsy(e2) && (e2 = e2.toUpperCase(), -1 < Object.values(h.CallConstants.CALL_MODE).indexOf(e2) && e2 != h.CallConstants.CALL_MODE.SINGLE && g.callScreen.contentWindow.postMessage({ type: h.CallConstants.POST_MESSAGES.TYPES.ACTION_MESSAGE, action: h.CallConstants.POST_MESSAGES.ACTIONS.SWITCH_MODE, value: e2 }, "*"));
            } catch (e3) {
              A.Logger.error("CallController: setMode", e3);
            }
          }, g.prototype.startScreenShare = function() {
            try {
              g.callScreen && g.callScreen.contentWindow.postMessage({ type: h.CallConstants.POST_MESSAGES.TYPES.ACTION_MESSAGE, action: h.CallConstants.POST_MESSAGES.ACTIONS.START_SCREENSHARE }, "*");
            } catch (e2) {
              A.Logger.error("CallController: startScreenShare", e2);
            }
          }, g.prototype.stopScreenShare = function() {
            try {
              g.callScreen && g.callScreen.contentWindow.postMessage({ type: h.CallConstants.POST_MESSAGES.TYPES.ACTION_MESSAGE, action: h.CallConstants.POST_MESSAGES.ACTIONS.STOP_SCREENSHARE }, "*");
            } catch (e2) {
              A.Logger.error("CallController: stopScreenShare", e2);
            }
          }, g.prototype.startRecording = function() {
            try {
              g.callScreen && g.callScreen.contentWindow.postMessage({ type: h.CallConstants.POST_MESSAGES.TYPES.ACTION_MESSAGE, action: h.CallConstants.POST_MESSAGES.ACTIONS.START_RECORDING }, "*");
            } catch (e2) {
              A.Logger.error("CallController: startRecording", e2);
            }
          }, g.prototype.stopRecording = function() {
            try {
              g.callScreen && g.callScreen.contentWindow.postMessage({ type: h.CallConstants.POST_MESSAGES.TYPES.ACTION_MESSAGE, action: h.CallConstants.POST_MESSAGES.ACTIONS.STOP_RECORDING }, "*");
            } catch (e2) {
              A.Logger.error("CallController: stopRecording", e2);
            }
          }, g.prototype.switchToVideoCall = function() {
            try {
              g.callScreen && g.callScreen.contentWindow.postMessage({ type: h.CallConstants.POST_MESSAGES.TYPES.ACTION_MESSAGE, action: h.CallConstants.POST_MESSAGES.ACTIONS.SWITCH_TO_VIDEO_CALL }, "*");
            } catch (e2) {
              A.Logger.error("CallController: switchToVideoCall", e2);
            }
          }, g.prototype.openVirtualBackground = function() {
            try {
              g.callScreen && g.callScreen.contentWindow.postMessage({ type: h.CallConstants.POST_MESSAGES.TYPES.ACTION_MESSAGE, action: h.CallConstants.POST_MESSAGES.ACTIONS.OPEN_VIRTUAL_BACKGROUND }, "*");
            } catch (e2) {
              A.Logger.error("CallController: openVirtualBackground", e2);
            }
          }, g.prototype.setBackgroundBlur = function(e2) {
            try {
              g.callScreen && g.callScreen.contentWindow.postMessage({ type: h.CallConstants.POST_MESSAGES.TYPES.ACTION_MESSAGE, action: h.CallConstants.POST_MESSAGES.ACTIONS.SET_BACKGROUND_BLUR, value: e2 }, "*");
            } catch (e3) {
              A.Logger.error("CallController: openVirtualBackground", e3);
            }
          }, g.prototype.setBackgroundImage = function(e2) {
            try {
              g.callScreen && g.callScreen.contentWindow.postMessage({ type: h.CallConstants.POST_MESSAGES.TYPES.ACTION_MESSAGE, action: h.CallConstants.POST_MESSAGES.ACTIONS.SET_BACKGROUND_IMAGE, value: e2 }, "*");
            } catch (e3) {
              A.Logger.error("CallController: openVirtualBackground", e3);
            }
          }, g.prototype.endSession = function() {
            try {
              g.callScreen && g.callScreen.contentWindow.postMessage({ type: h.CallConstants.POST_MESSAGES.TYPES.ACTION_MESSAGE, action: h.CallConstants.POST_MESSAGES.ACTIONS.END_CALL }, "*");
            } catch (e2) {
              A.Logger.error("CallController: endSession", e2);
            }
          }, g.callController = void 0, g.callListner = void 0, g;
        }();
        t.CallController = i;
      }, function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", { value: true }), t.MediaDevice = void 0;
        var o = n(0), s = function() {
          function e2(e3, t2, n2) {
            this.id = "", this.name = "", this.active = false, o.isFalsy(e3) || (this.id = e3), o.isFalsy(t2) || (this.name = t2), this.active = !!n2;
          }
          return e2.prototype.getId = function() {
            return this.id;
          }, e2.prototype.setId = function(e3) {
            this.id = e3 || "";
          }, e2.prototype.getName = function() {
            return this.name;
          }, e2.prototype.setName = function(e3) {
            this.name = e3 || "";
          }, e2.prototype.getIsActive = function() {
            return this.active;
          }, e2.prototype.setIsActive = function(e3) {
            this.active = !!e3;
          }, e2;
        }();
        t.MediaDevice = s;
      }, function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", { value: true }), t.GroupMembersController = void 0;
        var o = n(39), s = n(1), r = n(0), i = function() {
          function e2() {
          }
          return e2.trasformJSONGroupMember = function(t2) {
            var e3;
            try {
              return t2.status && "offline" !== t2.status ? t2.status = "online" : t2.status = "offline", e3 = new o.GroupMember(t2[s.GroupMemersConstans.KEYS.UID]), Object.assign(e3, t2), e3;
            } catch (e4) {
              return r.Logger.error("GroupMembersController:trasformJSONGroupMember", { e: e4, groupMember: t2 }), t2;
            }
          }, e2;
        }();
        t.GroupMembersController = i;
      }, function(e, t, n) {
        "use strict";
        var o, s = this && this.__extends || (o = function(e2, t2) {
          return (o = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e3, t3) {
            e3.__proto__ = t3;
          } || function(e3, t3) {
            for (var n2 in t3)
              t3.hasOwnProperty(n2) && (e3[n2] = t3[n2]);
          })(e2, t2);
        }, function(e2, t2) {
          function n2() {
            this.constructor = e2;
          }
          o(e2, t2), e2.prototype = null === t2 ? Object.create(t2) : (n2.prototype = t2.prototype, new n2());
        });
        Object.defineProperty(t, "__esModule", { value: true }), t.GroupMember = void 0;
        var r = n(3), i = n(1), a = function(o2) {
          function e2(e3, t2) {
            var n2 = o2.call(this, e3) || this;
            return n2.joinedAt = 0, t2 && (n2.scope = t2), n2;
          }
          return s(e2, o2), e2.prototype.setScope = function(e3) {
            this.scope = e3;
          }, e2.prototype.setJoinedAt = function(e3) {
            this.joinedAt = e3;
          }, e2.prototype.setGuid = function(e3) {
            this.guid = e3;
          }, e2.prototype.getScope = function() {
            return this.scope;
          }, e2.prototype.getJoinedAt = function() {
            return this.joinedAt;
          }, e2.prototype.getGuid = function() {
            return this.guid;
          }, e2.GroupMemberScope = i.GroupMemberScope, e2;
        }(r.User);
        t.GroupMember = a;
      }, function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", { value: true }), t.Conversation = void 0;
        var E = n(11), c = n(1), u = n(12), S = n(15), o = function() {
          function e2(e3, t2, n2, o2, s, r, i, a) {
            this.conversationId = e3, this.conversationType = t2, this.unreadMentionsCount = i, this.lastReadMessageId = a, r && 0 < r.length && (this.tags = r), void 0 !== n2 && void 0 !== (this.lastMessage = n2).id && (this.lastMessage = E.MessageController.trasformJSONMessge(n2)), this.conversationType == c.MessageConstatnts.RECEIVER_TYPE.USER ? this.conversationWith = u.UsersController.trasformJSONUser(o2) : this.conversationWith = S.GroupsController.trasformJSONGroup(o2), this.unreadMessageCount = void 0 !== s ? s : 0;
          }
          return e2.prototype.setConversationId = function(e3) {
            this.conversationId = e3;
          }, e2.prototype.getUnreadMentionsCount = function() {
            return this.unreadMentionsCount;
          }, e2.prototype.setUnreadMentionsCount = function(e3) {
            this.unreadMentionsCount = e3;
          }, e2.prototype.getLastReadMessageId = function() {
            return this.lastReadMessageId;
          }, e2.prototype.setLastReadMessageId = function(e3) {
            this.lastReadMessageId = e3;
          }, e2.prototype.setConversationType = function(e3) {
            this.conversationType = e3;
          }, e2.prototype.setLastMessage = function(e3) {
            this.lastMessage = e3;
          }, e2.prototype.setConversationWith = function(e3) {
            this.conversationWith = e3;
          }, e2.prototype.setUnreadMessageCount = function(e3) {
            this.unreadMessageCount = e3;
          }, e2.prototype.getConversationId = function() {
            return this.conversationId;
          }, e2.prototype.getConversationType = function() {
            return this.conversationType;
          }, e2.prototype.getLastMessage = function() {
            return this.lastMessage;
          }, e2.prototype.getConversationWith = function() {
            return this.conversationWith;
          }, e2.prototype.getUnreadMessageCount = function() {
            return this.unreadMessageCount;
          }, e2.prototype.getTags = function() {
            return this.tags;
          }, e2;
        }();
        t.Conversation = o;
      }, function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", { value: true }), t.TypingNotificationController = void 0;
        var o = n(0), s = function() {
          function e2() {
          }
          return e2.addTypingStarted = function(e3) {
            this.TYPING_STARTED_MAP[e3] = o.getCurrentTime();
          }, e2.removeTypingStarted = function(e3) {
            delete this.TYPING_STARTED_MAP[e3];
          }, e2.getTypingStartedMap = function(e3) {
            if (e3)
              return this.TYPING_STARTED_MAP[e3];
          }, e2.addTypingEnded = function(e3) {
            this.TYPING_ENDED_MAP[e3] = o.getCurrentTime();
          }, e2.removeTypingEnded = function(e3) {
            delete this.TYPING_ENDED_MAP[e3];
          }, e2.getTypingEndedMap = function(e3) {
            if (e3)
              return this.TYPING_ENDED_MAP[e3];
          }, e2.addIncomingTypingStarted = function(e3) {
            this.INCOMING_TYPING_STARTED_MAP[e3.getReceiverId()] = { typingNotification: e3, timestamp: o.getCurrentTime() };
          }, e2.removeIncomingTypingStarted = function(e3) {
            delete this.INCOMING_TYPING_STARTED_MAP[e3.getReceiverId()];
          }, e2.TYPING_STARTED_MAP = {}, e2.TYPING_ENDED_MAP = {}, e2.INCOMING_TYPING_STARTED_MAP = {}, e2;
        }();
        t.TypingNotificationController = s;
      }, function(e, t, n) {
        "use strict";
        var o = this && this.__spreadArrays || function() {
          for (var e2 = 0, t2 = 0, n2 = arguments.length; t2 < n2; t2++)
            e2 += arguments[t2].length;
          var o2 = Array(e2), s2 = 0;
          for (t2 = 0; t2 < n2; t2++)
            for (var r2 = arguments[t2], i2 = 0, a = r2.length; i2 < a; i2++, s2++)
              o2[s2] = r2[i2];
          return o2;
        };
        Object.defineProperty(t, "__esModule", { value: true }), t.ListenerHandlers = void 0;
        var s = n(0), r = n(28), i = function() {
          function e2() {
            this.connectionHandlers = [], this.loginHandlers = [], this.messageHandlers = [], this.userHandlers = [], this.groupHandlers = [], this.callHandlers = [];
          }
          return e2.getInstance = function() {
            return null != this.listenerHandlers && null != this.listenerHandlers || (this.listenerHandlers = new e2()), this.listenerHandlers;
          }, e2.prototype.addConnectionEventListener = function(t2, e3) {
            try {
              this.connectionHandlers = this.connectionHandlers.filter(function(e4) {
                return e4._name != t2;
              }), this.connectionHandlers = o(this.connectionHandlers, [new r.WSConnectionListener(t2, e3)]);
            } catch (e4) {
              s.Logger.error("ListenerHandlers: addWSConnectionEventListener", e4);
            }
          }, e2.prototype.removeConnectionEventListener = function(t2) {
            try {
              this.connectionHandlers = this.connectionHandlers.filter(function(e3) {
                return e3._name !== t2;
              });
            } catch (e3) {
              s.Logger.error("ListenerHandlers: removeWSConnectionEventListener", e3);
            }
          }, e2.prototype.addLoginEventListener = function(t2, e3) {
            try {
              this.loginHandlers = this.loginHandlers.filter(function(e4) {
                return e4._name != t2;
              }), this.loginHandlers = o(this.loginHandlers, [new r.UserLoginListener(t2, e3)]);
            } catch (e4) {
              s.Logger.error("ListenerHandlers: addLoginEventListener", e4);
            }
          }, e2.prototype.removeLoginEventListener = function(t2) {
            try {
              this.loginHandlers = this.loginHandlers.filter(function(e3) {
                return e3._name !== t2;
              });
            } catch (e3) {
              s.Logger.error("ListenerHandlers: removeLoginEventListener", e3);
            }
          }, e2.prototype.addMessageEventListener = function(t2, e3) {
            try {
              this.messageHandlers = this.messageHandlers.filter(function(e4) {
                return e4._name != t2;
              }), this.messageHandlers = o(this.messageHandlers, [new r.MessagesListener(t2, e3)]);
            } catch (e4) {
              s.Logger.error("ListenerHandlers: addMessageEventListener", e4);
            }
          }, e2.prototype.removeMessageEventListener = function(t2) {
            try {
              this.messageHandlers = this.messageHandlers.filter(function(e3) {
                return e3._name !== t2;
              });
            } catch (e3) {
              s.Logger.error("ListenerHandlers: removeMessageEventListener", e3);
            }
          }, e2.prototype.addUserEventListener = function(t2, e3) {
            try {
              this.userHandlers = this.userHandlers.filter(function(e4) {
                return e4._name != t2;
              }), this.userHandlers = o(this.userHandlers, [new r.UsersListener(t2, e3)]);
            } catch (e4) {
              s.Logger.error("ListenerHandlers: addUserEventListener", e4);
            }
          }, e2.prototype.removeUserEventListener = function(t2) {
            try {
              this.userHandlers = this.userHandlers.filter(function(e3) {
                return e3._name !== t2;
              });
            } catch (e3) {
              s.Logger.error("ListenerHandlers: removeUserEventListener", e3);
            }
          }, e2.prototype.addGroupEventListener = function(t2, e3) {
            try {
              this.groupHandlers = this.groupHandlers.filter(function(e4) {
                return e4._name != t2;
              }), this.groupHandlers = o(this.groupHandlers, [new r.GroupsListener(t2, e3)]);
            } catch (e4) {
              s.Logger.error("ListenerHandlers: addGroupEventListener", e4);
            }
          }, e2.prototype.removeGroupEventListener = function(t2) {
            try {
              this.groupHandlers = this.groupHandlers.filter(function(e3) {
                return e3._name !== t2;
              });
            } catch (e3) {
              s.Logger.error("ListenerHandlers: removeGroupEventListener", e3);
            }
          }, e2.prototype.addCallEventListener = function(t2, e3) {
            try {
              this.callHandlers = this.callHandlers.filter(function(e4) {
                return e4._name != t2;
              }), this.callHandlers = o(this.callHandlers, [new r.CallsListener(t2, e3)]);
            } catch (e4) {
              s.Logger.error("ListenerHandlers: addCallEventListener", e4);
            }
          }, e2.prototype.removeCallEventListener = function(t2) {
            try {
              this.callHandlers = this.callHandlers.filter(function(e3) {
                return e3._name !== t2;
              });
            } catch (e3) {
              s.Logger.error("ListenerHandlers: removeCallEventListener", e3);
            }
          }, e2.listenerHandlers = new e2(), e2;
        }();
        t.ListenerHandlers = i;
      }, function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", { value: true }), t.InteractionReceipt = void 0;
        var o = function() {
          function e2() {
          }
          return e2.prototype.getReceiverType = function() {
            return this.receiverType;
          }, e2.prototype.setReceiverType = function(e3) {
            this.receiverType = e3;
          }, e2.prototype.getSender = function() {
            return this.sender;
          }, e2.prototype.setSender = function(e3) {
            this.sender = e3;
          }, e2.prototype.getReceiveId = function() {
            return this.receiverId;
          }, e2.prototype.setReceiverId = function(e3) {
            this.receiverId = e3;
          }, e2.prototype.getMessageId = function() {
            return this.messageId;
          }, e2.prototype.setMessageId = function(e3) {
            this.messageId = e3;
          }, e2.prototype.getInteractions = function() {
            return this.interactions;
          }, e2.prototype.setInteractions = function(e3) {
            this.interactions = e3;
          }, e2;
        }();
        t.InteractionReceipt = o;
      }, function(e, t) {
        var n;
        n = /* @__PURE__ */ function() {
          return this;
        }();
        try {
          n = n || new Function("return this")();
        } catch (e2) {
          "object" == typeof window && (n = window);
        }
        e.exports = n;
      }, function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", { value: true }), t.GroupsRequestBuilder = t.GroupsRequest = void 0;
        var s = n(6), o = n(0), r = n(2), i = n(15), a = n(1), E = function() {
          function e2(e3) {
            this.cursor = -1, this.total = -1, this.next_page = 1, this.last_page = -1, this.current_page = 1, this.total_pages = -1, this.hasJoined = 0, this.withTags = false, this.pagination = { total: 0, count: 0, per_page: 0, current_page: 0, total_pages: 0, links: [] }, o.isFalsy(e3) || (o.isFalsy(e3.limit) || (this.limit = e3.limit), o.isFalsy(e3.searchKeyword) || (this.searchKeyword = e3.searchKeyword), o.isFalsy(e3.hasJoined) || (this.hasJoined = 1), o.isFalsy(e3.tags) || (this.tags = e3.tags), o.isFalsy(e3.showTags) || (this.withTags = e3.showTags));
          }
          return e2.prototype.validateGroupBuilder = function() {
            if (void 0 === this.limit)
              return new r.CometChatException(JSON.parse(o.format(JSON.stringify(a.GENERAL_ERROR.METHOD_COMPULSORY), "SET_LIMIT", "SET_LIMIT", "Set Limit")));
            if (isNaN(this.limit))
              return new r.CometChatException(JSON.parse(o.format(JSON.stringify(a.GENERAL_ERROR.PARAMETER_MUST_BE_A_NUMBER), "SET_LIMIT", "SET_LIMIT", "setLimit()")));
            if (this.limit > a.DEFAULT_VALUES.GROUPS_MAX_LIMIT)
              return new r.CometChatException(JSON.parse(o.format(JSON.stringify(a.GENERAL_ERROR.LIMIT_EXCEEDED), "SET_LIMIT", "SET_LIMIT", a.DEFAULT_VALUES.GROUPS_MAX_LIMIT)));
            if (this.limit < a.DEFAULT_VALUES.ZERO)
              return new r.CometChatException(JSON.parse(o.format(JSON.stringify(a.GENERAL_ERROR.PARAMETER_MUST_BE_A_POSITIVE_NUMBER), "SET_LIMIT", "SET_LIMIT", "setLimit()")));
            if (void 0 !== this.searchKeyword) {
              if (typeof this.searchKeyword !== a.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)
                return new r.CometChatException(JSON.parse(o.format(JSON.stringify(a.GENERAL_ERROR.PARAMETER_MUST_BE_A_STRING), "SET_SEARCH_KEYWORD", "SET_SEARCH_KEYWORD", "setSearchKeyword()")));
              if (o.isFalsy(this.searchKeyword.trim()))
                return new r.CometChatException(JSON.parse(o.format(JSON.stringify(a.GENERAL_ERROR.INVALID), "SET_SEARCH_KEYWORD", "SET_SEARCH_KEYWORD", "search keyword", "search keyword")));
              this.searchKeyword = this.searchKeyword.trim();
            }
            if (void 0 !== this.withTags) {
              if (typeof this.withTags !== a.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.BOOLEAN)
                return new r.CometChatException(JSON.parse(o.format(JSON.stringify(a.GENERAL_ERROR.PARAMETER_MUST_BE_A_BOOLEAN), "WITH_TAGS", "WITH_TAGS", "withTags()")));
              1 == this.withTags ? this.withTags = true : this.withTags = false;
            }
            return void 0 === this.tags || Array.isArray(this.tags) ? void 0 : new r.CometChatException(JSON.parse(o.format(JSON.stringify(a.GENERAL_ERROR.PARAMETER_MUST_BE_AN_ARRAY), "TAGS", "TAGS", "setTags()")));
          }, e2.prototype.fetchNext = function() {
            var o2 = this;
            return new Promise(function(t2, n2) {
              try {
                var e3 = o2.validateGroupBuilder();
                if (e3 instanceof r.CometChatException)
                  return void n2(e3);
                s.makeApiCall("getGroups", {}, o2.getNextData()).then(function(e4) {
                  if (e4.meta && (o2.total_pages = e4.meta.pagination.total_pages), 0 < e4.data.length) {
                    o2.pagination = e4.meta.pagination;
                    var n3 = [];
                    e4.data.map(function(e5, t3) {
                      n3.push(i.GroupsController.trasformJSONGroup(e5));
                    }), t2(n3);
                  }
                  t2([]);
                }, function(e4) {
                  n2(new r.CometChatException(e4.error));
                });
              } catch (e4) {
                n2(new r.CometChatException(e4));
              }
            });
          }, e2.prototype.getNextData = function() {
            var e3 = {};
            if (e3.per_page = this.limit, o.isFalsy(this.searchKeyword) || (e3.searchKey = this.searchKeyword), o.isFalsy(this.hasJoined) || (e3.hasJoined = 1), o.isFalsy(this.tags) || (e3.tags = this.tags), o.isFalsy(this.withTags) || (e3.withTags = 1), 1 == this.current_page)
              e3.page = this.next_page, this.next_page++, this.current_page++;
            else {
              if (this.next_page > this.total_pages)
                return e3.page = this.next_page, e3;
              e3.page = this.next_page++;
            }
            return e3;
          }, e2.MAX_LIMIT = 100, e2.DEFAULT_LIMIT = 30, e2;
        }();
        t.GroupsRequest = E;
        var c = function() {
          function e2() {
          }
          return e2.prototype.setLimit = function(e3) {
            return this.limit = e3, this;
          }, e2.prototype.setSearchKeyword = function(e3) {
            return this.searchKeyword = e3, this;
          }, e2.prototype.joinedOnly = function(e3) {
            return this.hasJoined = e3, this;
          }, e2.prototype.setTags = function(e3) {
            return this.tags = e3, this;
          }, e2.prototype.withTags = function(e3) {
            return this.showTags = e3, this;
          }, e2.prototype.build = function() {
            return new E(this);
          }, e2;
        }();
        t.GroupsRequestBuilder = c;
      }, function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", { value: true }), t.GroupMembersRequestBuilder = t.GroupMembersRequest = void 0;
        var s = n(6), o = n(0), r = n(14), i = n(2), a = n(38), E = n(1), c = function() {
          function e2(e3) {
            this.cursor = -1, this.total = -1, this.next_page = 1, this.last_page = -1, this.current_page = 1, this.total_pages = -1, this.pagination = { total: 0, count: 0, per_page: 0, current_page: 0, total_pages: 0, links: [] }, this.store = r.LocalStorage.getInstance(), o.isFalsy(e3) || (this.limit = e3.limit, this.guid = e3.guid, o.isFalsy(e3.searchKeyword) || (this.searchKeyword = e3.searchKeyword), o.isFalsy(e3.scopes) || (this.scopes = e3.scopes));
          }
          return e2.prototype.validateGroupMembersBuilder = function() {
            if (void 0 === this.limit)
              return new i.CometChatException(JSON.parse(o.format(JSON.stringify(E.GENERAL_ERROR.METHOD_COMPULSORY), "SET_LIMIT", "SET_LIMIT", "Set Limit")));
            if (isNaN(this.limit))
              return new i.CometChatException(JSON.parse(o.format(JSON.stringify(E.GENERAL_ERROR.PARAMETER_MUST_BE_A_NUMBER), "SET_LIMIT", "SET_LIMIT", "setLimit()")));
            if (this.limit > E.DEFAULT_VALUES.USERS_MAX_LIMIT)
              return new i.CometChatException(JSON.parse(o.format(JSON.stringify(E.GENERAL_ERROR.LIMIT_EXCEEDED), "SET_LIMIT", "SET_LIMIT", E.DEFAULT_VALUES.USERS_MAX_LIMIT)));
            if (this.limit < E.DEFAULT_VALUES.ZERO)
              return new i.CometChatException(JSON.parse(o.format(JSON.stringify(E.GENERAL_ERROR.PARAMETER_MUST_BE_A_POSITIVE_NUMBER), "SET_LIMIT", "SET_LIMIT", "setLimit()")));
            if (void 0 !== this.searchKeyword) {
              if (typeof this.searchKeyword !== E.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)
                return new i.CometChatException(JSON.parse(o.format(JSON.stringify(E.GENERAL_ERROR.PARAMETER_MUST_BE_A_STRING), "SET_SEARCH_KEYWORD", "SET_SEARCH_KEYWORD", "setSearchKeyword()")));
              if (o.isFalsy(this.searchKeyword.trim()))
                return new i.CometChatException(JSON.parse(o.format(JSON.stringify(E.GENERAL_ERROR.INVALID), "SET_SEARCH_KEYWORD", "SET_SEARCH_KEYWORD", "search keyword", "search keyword")));
              this.searchKeyword = this.searchKeyword.trim();
            }
            if (void 0 !== this.guid) {
              if (typeof this.guid !== E.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)
                return new i.CometChatException(JSON.parse(o.format(JSON.stringify(E.GENERAL_ERROR.PARAMETER_MUST_BE_A_STRING), "GUID", "GUID", "GroupMembersRequestBuilder()")));
              if (o.isFalsy(this.guid))
                return new i.CometChatException(JSON.parse(o.format(JSON.stringify(E.GENERAL_ERROR.INVALID), "GUID", "GUID", "GUID", "GUID")));
            }
            return void 0 === this.scopes || Array.isArray(this.scopes) ? void 0 : new i.CometChatException(JSON.parse(o.format(JSON.stringify(E.GENERAL_ERROR.PARAMETER_MUST_BE_AN_ARRAY), "SET_SCOPES", "SET_SCOPES", "setScopes()")));
          }, e2.prototype.fetchNext = function() {
            var o2 = this;
            return new Promise(function(n2, t2) {
              try {
                var e3 = o2.validateGroupMembersBuilder();
                if (e3 instanceof i.CometChatException)
                  return void t2(e3);
                s.makeApiCall("getGroupMembers", { guid: o2.guid }, o2.getNextData()).then(function(e4) {
                  if (e4.meta && (o2.total_pages = e4.meta.pagination.total_pages), 0 < e4.data.length) {
                    o2.pagination = e4.meta.pagination;
                    var t3 = [];
                    e4.data.map(function(e5) {
                      e5.guid = o2.guid, t3.push(a.GroupMembersController.trasformJSONGroupMember(e5));
                    }), n2(t3);
                  } else
                    n2([]);
                }, function(e4) {
                  t2(new i.CometChatException(e4.error));
                });
              } catch (e4) {
                t2(new i.CometChatException(e4));
              }
            });
          }, e2.prototype.getNextData = function() {
            var e3 = {};
            if (e3.per_page = this.limit, o.isFalsy(this.searchKeyword) || (e3.searchKey = this.searchKeyword), o.isFalsy(this.scopes) || (e3.scopes = this.scopes), 1 == this.current_page)
              e3.page = this.next_page, this.next_page++, this.current_page++;
            else {
              if (this.next_page > this.total_pages)
                return e3.page = this.next_page, e3;
              e3.page = this.next_page++;
            }
            return e3;
          }, e2.MAX_LIMIT = 2, e2.DEFAULT_LIMIT = 1, e2;
        }();
        t.GroupMembersRequest = c;
        var u = function() {
          function e2(e3) {
            this.guid = e3;
          }
          return e2.prototype.setLimit = function(e3) {
            return this.limit = e3, this;
          }, e2.prototype.setSearchKeyword = function(e3) {
            return this.searchKeyword = e3, this;
          }, e2.prototype.setScopes = function(e3) {
            return this.scopes = e3, this;
          }, e2.prototype.build = function() {
            return new c(this);
          }, e2;
        }();
        t.GroupMembersRequestBuilder = u;
      }, function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", { value: true }), t.BannedMembersRequestBuilder = t.BannedMembersRequest = void 0;
        var s = n(6), o = n(0), r = n(2), i = n(38), a = n(1), E = function() {
          function e2(e3) {
            this.cursor = -1, this.total = -1, this.next_page = 1, this.last_page = -1, this.current_page = 1, this.total_pages = -1, this.pagination = { total: 0, count: 0, per_page: 0, current_page: 0, total_pages: 0, links: [] }, o.isFalsy(e3) || (this.limit = e3.limit, this.guid = e3.guid, o.isFalsy(e3.searchKeyword) || (this.searchKeyword = e3.searchKeyword), o.isFalsy(e3.scopes) || (this.scopes = e3.scopes));
          }
          return e2.prototype.validateBannedMembersBuilder = function() {
            if (void 0 === this.limit)
              return new r.CometChatException(JSON.parse(o.format(JSON.stringify(a.GENERAL_ERROR.METHOD_COMPULSORY), "SET_LIMIT", "SET_LIMIT", "Set Limit")));
            if (isNaN(this.limit))
              return new r.CometChatException(JSON.parse(o.format(JSON.stringify(a.GENERAL_ERROR.PARAMETER_MUST_BE_A_NUMBER), "SET_LIMIT", "SET_LIMIT", "setLimit()")));
            if (this.limit > a.DEFAULT_VALUES.USERS_MAX_LIMIT)
              return new r.CometChatException(JSON.parse(o.format(JSON.stringify(a.GENERAL_ERROR.LIMIT_EXCEEDED), "SET_LIMIT", "SET_LIMIT", a.DEFAULT_VALUES.USERS_MAX_LIMIT)));
            if (this.limit < a.DEFAULT_VALUES.ZERO)
              return new r.CometChatException(JSON.parse(o.format(JSON.stringify(a.GENERAL_ERROR.PARAMETER_MUST_BE_A_POSITIVE_NUMBER), "SET_LIMIT", "SET_LIMIT", "setLimit()")));
            if (void 0 !== this.searchKeyword) {
              if (typeof this.searchKeyword !== a.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)
                return new r.CometChatException(JSON.parse(o.format(JSON.stringify(a.GENERAL_ERROR.PARAMETER_MUST_BE_A_STRING), "SET_SEARCH_KEYWORD", "SET_SEARCH_KEYWORD", "setSearchKeyword()")));
              if (o.isFalsy(this.searchKeyword.trim()))
                return new r.CometChatException(JSON.parse(o.format(JSON.stringify(a.GENERAL_ERROR.INVALID), "SET_SEARCH_KEYWORD", "SET_SEARCH_KEYWORD", "search keyword", "search keyword")));
              this.searchKeyword = this.searchKeyword.trim();
            }
            if (void 0 !== this.guid) {
              if (typeof this.guid !== a.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)
                return new r.CometChatException(JSON.parse(o.format(JSON.stringify(a.GENERAL_ERROR.PARAMETER_MUST_BE_A_STRING), "GUID", "GUID", "GroupMembersRequestBuilder()")));
              if (o.isFalsy(this.guid))
                return new r.CometChatException(JSON.parse(o.format(JSON.stringify(a.GENERAL_ERROR.INVALID), "GUID", "GUID", "GUID", "GUID")));
            }
            return void 0 === this.scopes || Array.isArray(this.scopes) ? void 0 : new r.CometChatException(JSON.parse(o.format(JSON.stringify(a.GENERAL_ERROR.PARAMETER_MUST_BE_AN_ARRAY), "SET_SCOPES", "SET_SCOPES", "setScopes()")));
          }, e2.prototype.fetchNext = function() {
            var o2 = this;
            return new Promise(function(n2, t2) {
              try {
                var e3 = o2.validateBannedMembersBuilder();
                if (e3 instanceof r.CometChatException)
                  return void t2(e3);
                s.makeApiCall("getBannedGroupMembers", { guid: o2.guid }, o2.getNextData()).then(function(e4) {
                  if (e4.meta && (o2.total_pages = e4.meta.pagination.total_pages), 0 < e4.data.length) {
                    o2.pagination = e4.meta.pagination;
                    var t3 = [];
                    e4.data.map(function(e5) {
                      e5.guid = o2.guid, t3.push(i.GroupMembersController.trasformJSONGroupMember(e5));
                    }), n2(t3);
                  } else
                    n2([]);
                }, function(e4) {
                  t2(new r.CometChatException(e4.error));
                });
              } catch (e4) {
                t2(new r.CometChatException(e4));
              }
            });
          }, e2.prototype.getNextData = function() {
            var e3 = {};
            if (e3.per_page = this.limit, o.isFalsy(this.searchKeyword) || (e3.searchKey = this.searchKeyword), o.isFalsy(this.scopes) || (e3.scopes = this.scopes), 1 == this.current_page)
              e3.page = this.next_page, this.next_page++, this.current_page++;
            else {
              if (this.next_page > this.total_pages)
                return e3.page = this.next_page, e3;
              e3.page = this.next_page++;
            }
            return e3;
          }, e2.MAX_LIMIT = 2, e2.DEFAULT_LIMIT = 1, e2;
        }();
        t.BannedMembersRequest = E;
        var c = function() {
          function e2(e3) {
            this.guid = e3;
          }
          return e2.prototype.setLimit = function(e3) {
            return this.limit = e3, this;
          }, e2.prototype.setSearchKeyword = function(e3) {
            return this.searchKeyword = e3, this;
          }, e2.prototype.setScopes = function(e3) {
            return this.scopes = e3, this;
          }, e2.prototype.build = function() {
            return new E(this);
          }, e2;
        }();
        t.BannedMembersRequestBuilder = c;
      }, function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", { value: true }), t.UsersRequestBuilder = t.UsersRequest = void 0;
        var s = n(6), o = n(0), r = n(12), i = n(2), a = n(49), E = n(1), c = function() {
          function t2(e2) {
            this.next_page = 1, this.current_page = 1, this.total_pages = -1, this.hideBlockedUsers = false, this.friendsOnly = false, this.fetchingInProgress = false, this.withTags = false, this.pagination = { total: 0, count: 0, per_page: 0, current_page: 0, total_pages: 0, links: [] }, t2.userStore = a.UserStore.getInstance(), o.isFalsy(e2) || (this.limit = e2.limit, o.isFalsy(e2.searchKeyword) || (this.searchKeyword = e2.searchKeyword), o.isFalsy(e2.status) || (e2.status == t2.USER_STATUS.ONLINE ? this.status = E.PresenceConstatnts.STATUS.AVAILABLE : this.status = e2.status), o.isFalsy(e2.shouldHideBlockedUsers) || (this.hideBlockedUsers = e2.shouldHideBlockedUsers), o.isFalsy(e2.showFriendsOnly) || (this.friendsOnly = e2.showFriendsOnly), o.isFalsy(e2.showTags) || (this.withTags = e2.showTags), o.isFalsy(e2.role) || (this.role = e2.role), o.isFalsy(e2.roles) || (this.roles = e2.roles), o.isFalsy(e2.tags) || (this.tags = e2.tags), o.isFalsy(e2.UIDs) || (this.UIDs = e2.UIDs), o.isFalsy(e2.SortBy) || (this.sortBy = e2.SortBy), o.isFalsy(e2.SearchIn) || (this.searchIn = e2.SearchIn), o.isFalsy(e2.SortOrder) || (this.sortOrder = e2.SortOrder));
          }
          return t2.prototype.validateUserBuilder = function() {
            if (void 0 === this.limit)
              return new i.CometChatException(JSON.parse(o.format(JSON.stringify(E.GENERAL_ERROR.METHOD_COMPULSORY), "SET_LIMIT", "SET_LIMIT", "Set Limit")));
            if (isNaN(this.limit))
              return new i.CometChatException(JSON.parse(o.format(JSON.stringify(E.GENERAL_ERROR.PARAMETER_MUST_BE_A_NUMBER), "SET_LIMIT", "SET_LIMIT", "setLimit()")));
            if (this.limit > E.DEFAULT_VALUES.USERS_MAX_LIMIT)
              return new i.CometChatException(JSON.parse(o.format(JSON.stringify(E.GENERAL_ERROR.LIMIT_EXCEEDED), "SET_LIMIT", "SET_LIMIT", E.DEFAULT_VALUES.USERS_MAX_LIMIT)));
            if (this.limit < E.DEFAULT_VALUES.ZERO)
              return new i.CometChatException(JSON.parse(o.format(JSON.stringify(E.GENERAL_ERROR.PARAMETER_MUST_BE_A_POSITIVE_NUMBER), "SET_LIMIT", "SET_LIMIT", "setLimit()")));
            if (void 0 !== this.searchKeyword) {
              if (typeof this.searchKeyword !== E.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)
                return new i.CometChatException(JSON.parse(o.format(JSON.stringify(E.GENERAL_ERROR.PARAMETER_MUST_BE_A_STRING), "SET_SEARCH_KEYWORD", "SET_SEARCH_KEYWORD", "setSearchKeyword()")));
              if (o.isFalsy(this.searchKeyword.trim()))
                return new i.CometChatException(JSON.parse(o.format(JSON.stringify(E.GENERAL_ERROR.INVALID), "SET_SEARCH_KEYWORD", "SET_SEARCH_KEYWORD", "search keyword", "search keyword")));
              this.searchKeyword = this.searchKeyword.trim();
            }
            if (this.status) {
              if (typeof this.status !== E.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)
                return new i.CometChatException(JSON.parse(o.format(JSON.stringify(E.GENERAL_ERROR.PARAMETER_MUST_BE_A_STRING), "SET_STATUS", "SET_STATUS", "setStatus()")));
              if ("available" != this.status.toLowerCase() && "offline" != this.status.toLowerCase())
                return new i.CometChatException(E.UserErrors.INVALID_STATUS);
            }
            if (void 0 !== this.hideBlockedUsers) {
              if (typeof this.hideBlockedUsers !== E.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.BOOLEAN)
                return new i.CometChatException(JSON.parse(o.format(JSON.stringify(E.GENERAL_ERROR.PARAMETER_MUST_BE_A_BOOLEAN), "HIDE_BLOCKED_USERS", "HIDE_BLOCKED_USERS", "hideBlockedUsers()")));
              1 == this.hideBlockedUsers ? this.hideBlockedUsers = true : this.hideBlockedUsers = false;
            }
            if (void 0 !== this.friendsOnly) {
              if (typeof this.friendsOnly !== E.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.BOOLEAN)
                return new i.CometChatException(JSON.parse(o.format(JSON.stringify(E.GENERAL_ERROR.PARAMETER_MUST_BE_A_BOOLEAN), "FRIENDS_ONLY", "FRIENDS_ONLY", "friendsOnly()")));
              1 == this.friendsOnly ? this.friendsOnly = true : this.friendsOnly = false;
            }
            if (void 0 !== this.withTags) {
              if (typeof this.withTags !== E.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.BOOLEAN)
                return new i.CometChatException(JSON.parse(o.format(JSON.stringify(E.GENERAL_ERROR.MUST_BE_A_BOOLEAN), "WITH_TAGS", "WITH_TAGS", "withTags()")));
              1 == this.withTags ? this.withTags = true : this.withTags = false;
            }
            if (void 0 !== this.roles && !Array.isArray(this.roles))
              return new i.CometChatException(JSON.parse(o.format(JSON.stringify(E.GENERAL_ERROR.PARAMETER_MUST_BE_AN_ARRAY), "ROLES", "ROLES", "setRoles()")));
            if (void 0 !== this.tags && !Array.isArray(this.tags))
              return new i.CometChatException(JSON.parse(o.format(JSON.stringify(E.GENERAL_ERROR.PARAMETER_MUST_BE_AN_ARRAY), "TAGS", "TAGS", "setTags()")));
            if (void 0 !== this.UIDs && !Array.isArray(this.UIDs))
              return new i.CometChatException(JSON.parse(o.format(JSON.stringify(E.GENERAL_ERROR.PARAMETER_MUST_BE_AN_ARRAY), "UIDs", "UIDs", "setUIDs()")));
            if (this.sortBy) {
              if (typeof this.sortBy !== E.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)
                return new i.CometChatException(JSON.parse(o.format(JSON.stringify(E.GENERAL_ERROR.PARAMETER_MUST_BE_A_STRING), "SORT_BY", "SORT_BY", "sortBy()")));
              if (o.isFalsy(this.sortBy.trim()))
                return new i.CometChatException(JSON.parse(o.format(JSON.stringify(E.GENERAL_ERROR.INVALID), "SORT_BY", "SORT_BY", "sort by", "sort by")));
              this.sortBy = this.sortBy.trim().toLowerCase();
            }
            if (this.sortOrder) {
              if (typeof this.sortOrder !== E.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)
                return new i.CometChatException(JSON.parse(o.format(JSON.stringify(E.GENERAL_ERROR.PARAMETER_MUST_BE_A_STRING), "SORT_BY_ORDER", "SORT_BY_ORDER", "sortByOrder()")));
              if (o.isFalsy(this.sortOrder.trim()))
                return new i.CometChatException(JSON.parse(o.format(JSON.stringify(E.GENERAL_ERROR.INVALID), "SORT_BY_ORDER", "SORT_BY_ORDER", "sort order", "sort order")));
              this.sortOrder = this.sortOrder.trim().toLowerCase();
            }
            return this.searchIn && !Array.isArray(this.searchIn) ? new i.CometChatException(JSON.parse(o.format(JSON.stringify(E.GENERAL_ERROR.PARAMETER_MUST_BE_AN_ARRAY), "SEARCH_IN", "SEARCH_IN", "searchIn()"))) : void 0;
          }, t2.prototype.fetchNext = function() {
            var o2 = this;
            return new Promise(function(n2, t3) {
              try {
                if (o2.fetchingInProgress)
                  o2.fetchingInProgress = false, n2([]);
                else {
                  o2.fetchingInProgress = true;
                  var e2 = o2.validateUserBuilder();
                  if (e2 instanceof i.CometChatException)
                    return void t3(e2);
                  s.makeApiCall("users", {}, o2.getNextData()).then(function(e3) {
                    if (e3.meta && (o2.total_pages = e3.meta.pagination.total_pages), 0 < e3.data.length) {
                      o2.pagination = e3.meta.pagination;
                      var t4 = [];
                      e3.data.map(function(e4) {
                        t4.push(r.UsersController.trasformJSONUser(e4));
                      }), n2(t4);
                    } else
                      n2([]);
                    o2.fetchingInProgress = false;
                  }, function(e3) {
                    o2.fetchingInProgress = false, t3(new i.CometChatException(e3.error));
                  });
                }
              } catch (e3) {
                o2.fetchingInProgress = false, t3(new i.CometChatException(e3));
              }
            });
          }, t2.prototype.getNextData = function() {
            var e2 = {};
            if (e2.per_page = this.limit, o.isFalsy(this.searchKeyword) || (e2.searchKey = this.searchKeyword), o.isFalsy(this.status) || (e2.status = this.status), o.isFalsy(this.hideBlockedUsers) || (e2.hideBlockedUsers = 1), o.isFalsy(this.role) || (e2.roles = this.role), o.isFalsy(this.roles) || (e2.roles = this.roles), o.isFalsy(this.tags) || (e2.tags = this.tags), o.isFalsy(this.friendsOnly) || (e2.friendsOnly = 1), o.isFalsy(this.withTags) || (e2.withTags = 1), o.isFalsy(this.UIDs) || (e2.uids = this.UIDs), o.isFalsy(this.sortBy) || (e2.sortBy = this.sortBy), o.isFalsy(this.sortOrder) || (e2.sortOrder = this.sortOrder), o.isFalsy(this.searchIn) || (e2.searchIn = this.searchIn), 1 == this.current_page)
              e2.page = this.next_page, this.next_page++, this.current_page++;
            else {
              if (this.next_page > this.total_pages)
                return e2.page = this.next_page, e2;
              e2.page = this.next_page++;
            }
            return e2;
          }, t2.USER_STATUS = { ONLINE: E.PresenceConstatnts.STATUS.ONLINE, OFFLINE: E.PresenceConstatnts.STATUS.OFFLINE }, t2;
        }();
        t.UsersRequest = c;
        var u = function() {
          function e2() {
            this.shouldHideBlockedUsers = false;
          }
          return e2.prototype.setLimit = function(e3) {
            return this.limit = e3, this;
          }, e2.prototype.setStatus = function(e3) {
            return this.status = e3, this;
          }, e2.prototype.setSearchKeyword = function(e3) {
            return this.searchKeyword = e3, this;
          }, e2.prototype.hideBlockedUsers = function(e3) {
            return this.shouldHideBlockedUsers = e3, this;
          }, e2.prototype.setRole = function(e3) {
            return this.role = e3, this;
          }, e2.prototype.setRoles = function(e3) {
            return this.roles = e3, this;
          }, e2.prototype.friendsOnly = function(e3) {
            return this.showFriendsOnly = e3, this;
          }, e2.prototype.setTags = function(e3) {
            return this.tags = e3, this;
          }, e2.prototype.withTags = function(e3) {
            return this.showTags = e3, this;
          }, e2.prototype.setUIDs = function(e3) {
            return this.UIDs = e3, this;
          }, e2.prototype.sortBy = function(e3) {
            return this.SortBy = e3, this;
          }, e2.prototype.sortByOrder = function(e3) {
            return this.SortOrder = e3, this;
          }, e2.prototype.searchIn = function(e3) {
            return this.SearchIn = e3, this;
          }, e2.prototype.build = function() {
            return this.role && this.roles && this.roles.push(this.role), new c(this);
          }, e2;
        }();
        t.UsersRequestBuilder = u;
      }, function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", { value: true }), t.UserStore = void 0;
        var o = n(4), s = n(0), r = n(1), i = n(13), a = function() {
          function e2(e3) {
            this.store = r.constants.DEFAULT_STORE, s.isFalsy(e3) || (this.store = e3), this.userStore = i.createInstance({ name: s.format(r.LOCAL_STORE.STORE_STRING, o.CometChat.getAppId(), r.LOCAL_STORE.USERS_STORE) }), this.userStore.setDriver([i.LOCALSTORAGE, i.INDEXEDDB, i.WEBSQL]);
          }
          return e2.getInstance = function() {
            return null == e2.UserStore && (e2.UserStore = new e2()), e2.UserStore;
          }, e2.prototype.set = function(e3, t2) {
            return this.userStore.setItem(e3, t2);
          }, e2.prototype.remove = function(e3) {
            this.userStore.removeItem(e3);
          }, e2.prototype.get = function(e3) {
            return this.userStore.getItem(e3);
          }, e2.prototype.clearStore = function() {
            var n2 = this;
            return new Promise(function(e3, t2) {
              n2.userStore.clear().then(function() {
                e3(true);
              }).catch(function(e4) {
                t2(e4);
              });
            });
          }, e2.prototype.clear = function(e3) {
          }, e2.prototype.selectStore = function(e3) {
            this.store = e3;
          }, e2.prototype.storeUsers = function(e3) {
            var t2 = this;
            return e3.map(function(e4) {
              t2.set(e4.getUid(), e4);
            }), true;
          }, e2.prototype.storeUser = function(e3) {
            return this.set(e3.getUid(), e3), true;
          }, e2;
        }();
        t.UserStore = a;
      }, function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", { value: true }), t.ConversationsRequestBuilder = t.ConversationsRequest = void 0;
        var s = n(6), o = n(0), r = n(2), i = n(29), a = n(1), E = function() {
          function e2(e3) {
            this.limit = 100, this.next_page = 1, this.current_page = 1, this.total_pages = -1, this.fetchingInProgress = false, this.getUserAndGroupTags = false, this.withTags = false, this.pagination = { total: 0, count: 0, per_page: 0, current_page: 0, total_pages: 0, links: [] }, o.isFalsy(e3) || (this.limit = e3.limit, o.isFalsy(e3.conversationType) || (this.conversationType = e3.conversationType), o.isFalsy(e3.getUserAndGroupTags) || (this.getUserAndGroupTags = e3.getUserAndGroupTags), e3.tags && (this.tags = e3.tags), o.isFalsy(e3.WithTags) || (this.withTags = e3.WithTags), e3.groupTags && (this.groupTags = e3.groupTags), e3.userTags && (this.userTags = e3.userTags));
          }
          return e2.prototype.validateConversationBuilder = function() {
            return void 0 === this.limit ? new r.CometChatException(JSON.parse(o.format(JSON.stringify(a.GENERAL_ERROR.METHOD_COMPULSORY), "SET_LIMIT", "SET_LIMIT", "Set Limit"))) : isNaN(this.limit) ? new r.CometChatException(JSON.parse(o.format(JSON.stringify(a.GENERAL_ERROR.PARAMETER_MUST_BE_A_NUMBER), "SET_LIMIT", "SET_LIMIT", "setLimit()"))) : this.limit > a.DEFAULT_VALUES.CONVERSATION_MAX_LIMIT ? new r.CometChatException(JSON.parse(o.format(JSON.stringify(a.GENERAL_ERROR.LIMIT_EXCEEDED), "SET_LIMIT", "SET_LIMIT", a.DEFAULT_VALUES.CONVERSATION_MAX_LIMIT))) : this.limit < a.DEFAULT_VALUES.ZERO ? new r.CometChatException(JSON.parse(o.format(JSON.stringify(a.GENERAL_ERROR.PARAMETER_MUST_BE_A_POSITIVE_NUMBER), "SET_LIMIT", "SET_LIMIT", "setLimit()"))) : void 0;
          }, e2.prototype.fetchNext = function() {
            var o2 = this;
            return new Promise(function(n2, t2) {
              try {
                if (o2.fetchingInProgress)
                  o2.fetchingInProgress = false, n2([]);
                else {
                  o2.fetchingInProgress = true;
                  var e3 = o2.validateConversationBuilder();
                  if (e3 instanceof r.CometChatException)
                    return void t2(e3);
                  s.makeApiCall("getConversations", {}, o2.getNextData()).then(function(e4) {
                    if (e4.meta && (o2.total_pages = e4.meta.pagination.total_pages), 0 < e4.data.length) {
                      o2.pagination = e4.meta.pagination;
                      var t3 = [];
                      e4.data.map(function(e5) {
                        t3.push(i.ConversationController.trasformJSONConversation(e5.conversationId, e5.conversationType, e5.lastMessage, e5.conversationWith, parseInt(e5.unreadMessageCount), e5.tags ? e5.tags : [], e5.unreadMentionsCount, e5.lastReadMessageId));
                      }), n2(t3);
                    } else
                      n2([]);
                    o2.fetchingInProgress = false;
                  }, function(e4) {
                    o2.fetchingInProgress = false, t2(new r.CometChatException(e4.error));
                  });
                }
              } catch (e4) {
                o2.fetchingInProgress = false, t2(new r.CometChatException(e4));
              }
            });
          }, e2.prototype.getNextData = function() {
            var e3 = {};
            if (e3.per_page = this.limit, o.isFalsy(this.conversationType) || (e3.conversationType = this.conversationType), o.isFalsy(this.getUserAndGroupTags) || (e3.withUserAndGroupTags = this.getUserAndGroupTags), o.isFalsy(this.tags) || (e3.tags = this.tags), o.isFalsy(this.withTags) || (e3.withTags = this.withTags), o.isFalsy(this.userTags) || (e3.userTags = this.userTags), o.isFalsy(this.groupTags) || (e3.groupTags = this.groupTags), 1 == this.current_page)
              e3.page = this.next_page, this.next_page++, this.current_page++;
            else {
              if (this.next_page > this.total_pages)
                return e3.page = this.next_page, e3;
              e3.page = this.next_page++;
            }
            return e3;
          }, e2;
        }();
        t.ConversationsRequest = E;
        var c = function() {
          function e2() {
            this.WithTags = false;
          }
          return e2.prototype.setLimit = function(e3) {
            return this.limit = e3, this;
          }, e2.prototype.setConversationType = function(e3) {
            return this.conversationType = e3, this;
          }, e2.prototype.withUserAndGroupTags = function(e3) {
            return "boolean" == typeof e3 && (this.getUserAndGroupTags = e3), this;
          }, e2.prototype.setTags = function(e3) {
            return this.tags = e3, this;
          }, e2.prototype.withTags = function(e3) {
            return this.WithTags = e3, this;
          }, e2.prototype.setGroupTags = function(e3) {
            return this.groupTags = e3, this;
          }, e2.prototype.setUserTags = function(e3) {
            return this.userTags = e3, this;
          }, e2.prototype.build = function() {
            return new E(this);
          }, e2;
        }();
        t.ConversationsRequestBuilder = c;
      }, function(e, t, n) {
        "use strict";
        var f = this && this.__awaiter || function(e2, i2, a2, E) {
          return new (a2 || (a2 = Promise))(function(n2, t2) {
            function o2(e3) {
              try {
                r2(E.next(e3));
              } catch (e4) {
                t2(e4);
              }
            }
            function s2(e3) {
              try {
                r2(E.throw(e3));
              } catch (e4) {
                t2(e4);
              }
            }
            function r2(e3) {
              var t3;
              e3.done ? n2(e3.value) : (t3 = e3.value, t3 instanceof a2 ? t3 : new a2(function(e4) {
                e4(t3);
              })).then(o2, s2);
            }
            r2((E = E.apply(e2, i2 || [])).next());
          });
        }, O = this && this.__generator || function(n2, o2) {
          var s2, r2, i2, e2, a2 = { label: 0, sent: function() {
            if (1 & i2[0])
              throw i2[1];
            return i2[1];
          }, trys: [], ops: [] };
          return e2 = { next: t2(0), throw: t2(1), return: t2(2) }, "function" == typeof Symbol && (e2[Symbol.iterator] = function() {
            return this;
          }), e2;
          function t2(t3) {
            return function(e3) {
              return function(t4) {
                if (s2)
                  throw new TypeError("Generator is already executing.");
                for (; a2; )
                  try {
                    if (s2 = 1, r2 && (i2 = 2 & t4[0] ? r2.return : t4[0] ? r2.throw || ((i2 = r2.return) && i2.call(r2), 0) : r2.next) && !(i2 = i2.call(r2, t4[1])).done)
                      return i2;
                    switch (r2 = 0, i2 && (t4 = [2 & t4[0], i2.value]), t4[0]) {
                      case 0:
                      case 1:
                        i2 = t4;
                        break;
                      case 4:
                        return a2.label++, { value: t4[1], done: false };
                      case 5:
                        a2.label++, r2 = t4[1], t4 = [0];
                        continue;
                      case 7:
                        t4 = a2.ops.pop(), a2.trys.pop();
                        continue;
                      default:
                        if (!(i2 = 0 < (i2 = a2.trys).length && i2[i2.length - 1]) && (6 === t4[0] || 2 === t4[0])) {
                          a2 = 0;
                          continue;
                        }
                        if (3 === t4[0] && (!i2 || t4[1] > i2[0] && t4[1] < i2[3])) {
                          a2.label = t4[1];
                          break;
                        }
                        if (6 === t4[0] && a2.label < i2[1]) {
                          a2.label = i2[1], i2 = t4;
                          break;
                        }
                        if (i2 && a2.label < i2[2]) {
                          a2.label = i2[2], a2.ops.push(t4);
                          break;
                        }
                        i2[2] && a2.ops.pop(), a2.trys.pop();
                        continue;
                    }
                    t4 = o2.call(n2, a2);
                  } catch (e4) {
                    t4 = [6, e4], r2 = 0;
                  } finally {
                    s2 = i2 = 0;
                  }
                if (5 & t4[0])
                  throw t4[1];
                return { value: t4[0] ? t4[1] : void 0, done: true };
              }([t3, e3]);
            };
          }
        }, s = this && this.__spreadArrays || function() {
          for (var e2 = 0, t2 = 0, n2 = arguments.length; t2 < n2; t2++)
            e2 += arguments[t2].length;
          var o2 = Array(e2), s2 = 0;
          for (t2 = 0; t2 < n2; t2++)
            for (var r2 = arguments[t2], i2 = 0, a2 = r2.length; i2 < a2; i2++, s2++)
              o2[s2] = r2[i2];
          return o2;
        };
        Object.defineProperty(t, "__esModule", { value: true }), t.MessagesRequestBuilder = t.MessagesRequest = void 0;
        var N = n(2), y = n(6), m = n(11), M = n(0), r = n(52), v = n(1), i = n(10), P = n(30), L = n(16), o = function() {
          function e2(e3) {
            this.limit = v.DEFAULT_VALUES.MSGS_LIMIT, this.timestamp = 0, this.id = v.DEFAULT_VALUES.DEFAULT_MSG_ID, this.messageStore = r.MessagesStore.getInstance(), this.endpointName = "getUserMessages", this.listId = "", this.totalPages = 0, this.unread = false, this.inProgress = false, this.hideMessagesFromBlockedUsers = false, this.updatedAt = 0, this.onlyUpdates = 0, this.paginationMeta = {}, this.WithTags = false, this.hideDeletedMessages = false, this.listMentionedMessages = false, this.mentionsWithUserTags = false, this.mentionsWithBlockedRelation = false, this.interactionGoalCompletedOnly = false, this.limit = e3.limit, this.paginationMeta[v.MessageConstatnts.PAGINATION.KEYS.PER_PAGE] = this.limit, this.uid = e3.uid, this.guid = e3.guid, this.parentMessageId = e3.parentMessageId, this.timestamp = e3.timestamp, this.timestamp && (this.paginationMeta[v.MessageConstatnts.PAGINATION.KEYS.SENT_AT] = this.timestamp), this.id = e3.id, this.id != v.DEFAULT_VALUES.DEFAULT_MSG_ID && (this.paginationMeta[v.MessageConstatnts.PAGINATION.KEYS.ID] = this.id), this.hideMessagesFromBlockedUsers = e3.HideMessagesFromBlockedUsers, this.hideMessagesFromBlockedUsers && (this.paginationMeta[v.MessageConstatnts.PAGINATION.KEYS.HIDE_MESSAGES_FROM_BLOCKED_USER] = this.hideMessagesFromBlockedUsers), this.unread = e3.unread, this.unread && (this.paginationMeta[v.MessageConstatnts.PAGINATION.KEYS.UNREAD] = this.unread), e3.searchKey && (this.searchKey = e3.searchKey, this.paginationMeta[v.MessageConstatnts.PAGINATION.KEYS.SEARCH_KEY] = this.searchKey), e3.onlyUpdate && (this.onlyUpdates = e3.onlyUpdate, this.paginationMeta[v.MessageConstatnts.PAGINATION.KEYS.ONLY_UPDATES] = this.onlyUpdates), e3.updatedAt && (this.updatedAt = e3.updatedAt, this.paginationMeta[v.MessageConstatnts.PAGINATION.KEYS.UPDATED_AT] = this.updatedAt), e3.category && (this.category = e3.category), e3.categories && (this.categories = e3.categories), e3.type && (this.type = e3.type), e3.types && (this.types = e3.types), e3.WithTags && (this.WithTags = e3.WithTags), e3.tags && (this.tags = e3.tags), e3.HideReplies && (this.hideReplies = e3.HideReplies, this.paginationMeta[v.MessageConstatnts.PAGINATION.KEYS.HIDE_REPLIES] = this.hideReplies), this.hideDeletedMessages = e3.HideDeletedMessages, this.hideDeletedMessages && (this.paginationMeta[v.MessageConstatnts.PAGINATION.KEYS.HIDE_DELETED_MESSAGES] = this.hideDeletedMessages), this.listMentionedMessages = e3.ListMentionedMessages, this.mentionsWithUserTags = e3.mentionsWithUserTags, this.mentionsWithBlockedRelation = e3.mentionsWithBlockedRelation, this.interactionGoalCompletedOnly = e3.interactionGoalCompletedOnly, this.interactionGoalCompletedOnly && (this.paginationMeta[v.MessageConstatnts.PAGINATION.KEYS.ONLY_INTERACTION_GOAL_COMPLETED] = this.interactionGoalCompletedOnly);
          }
          return e2.prototype.fetchNext = function() {
            var e3 = this;
            return new Promise(function(s2, r2) {
              return f(e3, void 0, void 0, function() {
                var t2, n2, o2;
                return O(this, function(e4) {
                  switch (e4.label) {
                    case 0:
                      if (e4.trys.push([0, 5, , 6]), this.inProgress)
                        return this.inProgress = false, r2(new N.CometChatException(i.MESSAGES_REQUEST_ERRORS.REQUEST_IN_PROGRESS_ERROR)), [2];
                      if (this.inProgress = true, this.onlyUpdates) {
                        if (0 == this.updatedAt)
                          return this.inProgress = false, r2(new N.CometChatException(i.MESSAGES_REQUEST_ERRORS.NOT_ENOUGH_PARAMS)), [2];
                      } else if (0 == this.timestamp && 0 == this.id && 0 == this.updatedAt)
                        return this.inProgress = false, r2(new N.CometChatException(i.MESSAGES_REQUEST_ERRORS.NOT_ENOUGH_PARAMS)), [2];
                      this.affix = v.MessageConstatnts.PAGINATION.AFFIX.APPEND, this.paginationMeta[v.MessageConstatnts.PAGINATION.KEYS.AFFIX] = this.affix, this.currentMethod = v.MessageConstatnts.PAGINATION.AFFIX.APPEND, e4.label = 1;
                    case 1:
                      return e4.trys.push([1, 3, , 4]), [4, this.makeAPICall()];
                    case 2:
                      return t2 = e4.sent(), s2(t2), this.inProgress = false, [3, 4];
                    case 3:
                      return n2 = e4.sent(), this.inProgress = false, r2(new N.CometChatException(n2)), [3, 4];
                    case 4:
                      return [3, 6];
                    case 5:
                      return o2 = e4.sent(), this.inProgress = false, r2(new N.CometChatException(o2)), [3, 6];
                    case 6:
                      return [2];
                  }
                });
              });
            });
          }, e2.prototype.fetchPrevious = function() {
            var e3 = this;
            return new Promise(function(s2, r2) {
              return f(e3, void 0, void 0, function() {
                var t2, n2, o2;
                return O(this, function(e4) {
                  switch (e4.label) {
                    case 0:
                      if (e4.trys.push([0, 5, , 6]), this.inProgress)
                        return r2(new N.CometChatException(i.MESSAGES_REQUEST_ERRORS.REQUEST_IN_PROGRESS_ERROR)), this.inProgress = false, [2];
                      if (this.inProgress = true, this.onlyUpdates && 0 == this.updatedAt)
                        return this.inProgress = false, r2(new N.CometChatException(i.MESSAGES_REQUEST_ERRORS.NOT_ENOUGH_PARAMS)), [2];
                      this.affix = v.MessageConstatnts.PAGINATION.AFFIX.PREPEND, this.paginationMeta[v.MessageConstatnts.PAGINATION.KEYS.AFFIX] = this.affix, this.currentMethod = v.MessageConstatnts.PAGINATION.AFFIX.PREPEND, e4.label = 1;
                    case 1:
                      return e4.trys.push([1, 3, , 4]), [4, this.makeAPICall()];
                    case 2:
                      return t2 = e4.sent(), s2(t2), this.inProgress = false, [3, 4];
                    case 3:
                      return n2 = e4.sent(), this.inProgress = false, r2(new N.CometChatException(n2)), [3, 4];
                    case 4:
                      return [3, 6];
                    case 5:
                      return o2 = e4.sent(), this.inProgress = false, r2(new N.CometChatException(o2)), [3, 6];
                    case 6:
                      return [2];
                  }
                });
              });
            });
          }, e2.prototype.makeAPICall = function() {
            var I = this;
            return new Promise(function(o2, t2) {
              try {
                var e3 = I.paginationMeta[v.MessageConstatnts.PAGINATION.KEYS.PER_PAGE];
                if (void 0 === e3)
                  return void t2(new N.CometChatException(JSON.parse(M.format(JSON.stringify(v.GENERAL_ERROR.METHOD_COMPULSORY), "SET_LIMIT", "SET_LIMIT", "Set Limit"))));
                if (isNaN(e3))
                  return void t2(new N.CometChatException(JSON.parse(M.format(JSON.stringify(v.GENERAL_ERROR.PARAMETER_MUST_BE_A_NUMBER), "SET_LIMIT", "SET_LIMIT", "setLimit()"))));
                if (e3 > v.DEFAULT_VALUES.MSGS_MAX_LIMIT)
                  return void t2(new N.CometChatException(JSON.parse(M.format(JSON.stringify(v.GENERAL_ERROR.LIMIT_EXCEEDED), "SET_LIMIT", "SET_LIMIT", v.DEFAULT_VALUES.MSGS_MAX_LIMIT))));
                if (e3 < v.DEFAULT_VALUES.ZERO)
                  return void t2(new N.CometChatException(JSON.parse(M.format(JSON.stringify(v.GENERAL_ERROR.PARAMETER_MUST_BE_A_POSITIVE_NUMBER), "SET_LIMIT", "SET_LIMIT", "setLimit()"))));
                var n2 = I.uid;
                if (void 0 !== n2) {
                  if (typeof n2 !== v.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)
                    return void t2(new N.CometChatException(JSON.parse(M.format(JSON.stringify(v.GENERAL_ERROR.PARAMETER_MUST_BE_A_STRING), "UID", "UID", "setUID()"))));
                  if (M.isFalsy(n2.trim()))
                    return void t2(new N.CometChatException(JSON.parse(M.format(JSON.stringify(v.GENERAL_ERROR.INVALID), "UID", "UID", "UID", "UID"))));
                  I.uid = n2.trim();
                }
                var s2 = I.guid;
                if (void 0 !== s2) {
                  if (typeof s2 !== v.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)
                    return void t2(new N.CometChatException(JSON.parse(M.format(JSON.stringify(v.GENERAL_ERROR.PARAMETER_MUST_BE_A_STRING), "GUID", "GUID", "setGUID()"))));
                  if (M.isFalsy(s2.trim()))
                    return void t2(new N.CometChatException(JSON.parse(M.format(JSON.stringify(v.GENERAL_ERROR.INVALID), "GUID", "GUID", "GUID", "GUID"))));
                  I.guid = s2.trim();
                }
                var r2 = I.listMentionedMessages;
                if (void 0 !== r2 && false !== r2) {
                  if (typeof r2 !== v.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.BOOLEAN)
                    return void t2(new N.CometChatException(JSON.parse(M.format(JSON.stringify(v.GENERAL_ERROR.PARAMETER_MUST_BE_A_BOOLEAN), "MY_MENTIONS_ONLY", "MY_MENTIONS_ONLY", "myMentionsOnly()"))));
                  1 == r2 && (I.paginationMeta[v.MessageConstatnts.PAGINATION.KEYS.MY_MENTIONS_ONLY] = 1);
                } else
                  I.paginationMeta[v.MessageConstatnts.PAGINATION.KEYS.MY_MENTIONS_ONLY] = 0;
                var i2 = I.mentionsWithUserTags;
                if (void 0 !== i2) {
                  if (typeof i2 !== v.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.BOOLEAN)
                    return void t2(new N.CometChatException(JSON.parse(M.format(JSON.stringify(v.GENERAL_ERROR.PARAMETER_MUST_BE_A_BOOLEAN), "MENTIONS_WITH_TAG_INFO", "MENTIONS_WITH_TAG_INFO", "mentionsWithTagInfo()"))));
                  I.paginationMeta[v.MessageConstatnts.PAGINATION.KEYS.MENTIONS_WITH_TAG_INFO] = 1 == i2 ? 1 : 0;
                }
                var a2 = I.mentionsWithBlockedRelation;
                if (void 0 !== a2) {
                  if (typeof a2 !== v.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.BOOLEAN)
                    return void t2(new N.CometChatException(JSON.parse(M.format(JSON.stringify(v.GENERAL_ERROR.PARAMETER_MUST_BE_A_BOOLEAN), "MENTIONS_WITH_BLOCKED_INFO", "MENTIONS_WITH_BLOCKED_INFO", "mentionsWithBlockedInfo()"))));
                  I.paginationMeta[v.MessageConstatnts.PAGINATION.KEYS.MENTIONS_WITH_BLOCKED_INFO] = 1 == a2 ? 1 : 0;
                }
                var E = I.parentMessageId;
                if (void 0 !== E) {
                  if (isNaN(E))
                    return void t2(new N.CometChatException(JSON.parse(M.format(JSON.stringify(v.GENERAL_ERROR.PARAMETER_MUST_BE_A_NUMBER), "PARENT_MESSAGE_ID", "PARENT_MESSAGE_ID", "setParentMessageId()"))));
                  if (E < v.DEFAULT_VALUES.ZERO)
                    return void t2(new N.CometChatException(JSON.parse(M.format(JSON.stringify(v.GENERAL_ERROR.PARAMETER_MUST_BE_A_POSITIVE_NUMBER), "PARENT_MESSAGE_ID", "PARENT_MESSAGE_ID", "setParentMessageId()"))));
                }
                var c = I.paginationMeta[v.MessageConstatnts.PAGINATION.KEYS.SEARCH_KEY];
                if (void 0 !== c) {
                  if (typeof c !== v.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)
                    return void t2(new N.CometChatException(JSON.parse(M.format(JSON.stringify(v.GENERAL_ERROR.PARAMETER_MUST_BE_A_STRING), "SET_SEARCH_KEYWORD", "SET_SEARCH_KEYWORD", "setSearchKeyword()"))));
                  if (M.isFalsy(c.trim()))
                    return void t2(new N.CometChatException(JSON.parse(M.format(JSON.stringify(v.GENERAL_ERROR.INVALID), "SET_SEARCH_KEYWORD", "SET_SEARCH_KEYWORD", "search keyword", "search keyword"))));
                  I.paginationMeta[v.MessageConstatnts.PAGINATION.KEYS.SEARCH_KEY] = c.trim();
                }
                var u = I.paginationMeta[v.MessageConstatnts.PAGINATION.KEYS.ID];
                if (void 0 !== u) {
                  if (isNaN(u))
                    return void t2(new N.CometChatException(JSON.parse(M.format(JSON.stringify(v.GENERAL_ERROR.PARAMETER_MUST_BE_A_NUMBER), "MESSAGE_ID", "MESSAGE_ID", "setMessageId()"))));
                  if (u < v.DEFAULT_VALUES.ZERO)
                    return void t2(new N.CometChatException(JSON.parse(M.format(JSON.stringify(v.GENERAL_ERROR.PARAMETER_MUST_BE_A_POSITIVE_NUMBER), "MESSAGE_ID", "MESSAGE_ID", "setMessageId()"))));
                }
                var S = I.paginationMeta[v.MessageConstatnts.PAGINATION.KEYS.SENT_AT];
                if (void 0 !== S) {
                  if (isNaN(S))
                    return void t2(new N.CometChatException(JSON.parse(M.format(JSON.stringify(v.GENERAL_ERROR.PARAMETER_MUST_BE_A_NUMBER), "TIMESTAMP", "TIMESTAMP", "setTimestamp()"))));
                  if (S < v.DEFAULT_VALUES.ZERO)
                    return void t2(new N.CometChatException(JSON.parse(M.format(JSON.stringify(v.GENERAL_ERROR.PARAMETER_MUST_BE_A_POSITIVE_NUMBER), "TIMESTAMP", "TIMESTAMP", "setTimestamp()"))));
                }
                var p = I.hideMessagesFromBlockedUsers;
                if (void 0 !== p) {
                  if (typeof p !== v.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.BOOLEAN)
                    return void t2(new N.CometChatException(JSON.parse(M.format(JSON.stringify(v.GENERAL_ERROR.PARAMETER_MUST_BE_A_BOOLEAN), "HIDE_MESSAGES_FROM_BLOCKED_USERS", "HIDE_MESSAGES_FROM_BLOCKED_USERS", "hideMessagesFromBlockedUsers()"))));
                  I.paginationMeta[v.MessageConstatnts.PAGINATION.KEYS.HIDE_MESSAGES_FROM_BLOCKED_USER] = 1 == p ? 1 : 0;
                }
                var l = I.unread;
                if (void 0 !== l) {
                  if (typeof l !== v.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.BOOLEAN)
                    return void t2(new N.CometChatException(JSON.parse(M.format(JSON.stringify(v.GENERAL_ERROR.PARAMETER_MUST_BE_A_BOOLEAN), "UNREAD", "UNREAD", "setUnread()"))));
                  I.paginationMeta[v.MessageConstatnts.PAGINATION.KEYS.UNREAD] = 1 == l ? 1 : 0;
                }
                var C = I.category;
                if (void 0 !== C) {
                  if (typeof C !== v.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)
                    return void t2(new N.CometChatException(JSON.parse(M.format(JSON.stringify(v.GENERAL_ERROR.PARAMETER_MUST_BE_A_STRING), "SET_CATEGORY", "SET_CATEGORY", "setCategory()"))));
                  if (M.isFalsy(C.trim()))
                    return void t2(new N.CometChatException(JSON.parse(M.format(JSON.stringify(v.GENERAL_ERROR.INVALID), "SET_CATEGORY", "SET_CATEGORY", "category", "category"))));
                  I.paginationMeta[v.MessageConstatnts.PAGINATION.KEYS.CATEGORIES] = C.trim();
                }
                var T = I.categories;
                if (void 0 !== T) {
                  if (!Array.isArray(T))
                    return void t2(new N.CometChatException(JSON.parse(M.format(JSON.stringify(v.GENERAL_ERROR.PARAMETER_MUST_BE_AN_ARRAY), "SET_CATEGORIES", "SET_CATEGORIES", "setCategories()"))));
                  0 < T.length && (I.paginationMeta[v.MessageConstatnts.PAGINATION.KEYS.CATEGORIES] = T);
                }
                var d = I.type;
                if (void 0 !== d) {
                  if (typeof d !== v.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)
                    return void t2(new N.CometChatException(JSON.parse(M.format(JSON.stringify(v.GENERAL_ERROR.PARAMETER_MUST_BE_A_STRING), "SET_TYPE", "SET_TYPE", "setType()"))));
                  if (M.isFalsy(d.trim()))
                    return void t2(new N.CometChatException(JSON.parse(M.format(JSON.stringify(v.GENERAL_ERROR.INVALID), "SET_TYPE", "SET_TYPE", "type", "type"))));
                  I.paginationMeta[v.MessageConstatnts.PAGINATION.KEYS.TYPES] = d.trim();
                }
                var _ = I.types;
                if (void 0 !== _) {
                  if (!Array.isArray(_))
                    return void t2(new N.CometChatException(JSON.parse(M.format(JSON.stringify(v.GENERAL_ERROR.PARAMETER_MUST_BE_AN_ARRAY), "SET_TYPES", "SET_TYPES", "setTypes()"))));
                  0 < _.length && (I.paginationMeta[v.MessageConstatnts.PAGINATION.KEYS.TYPES] = _);
                }
                var g = I.tags;
                if (void 0 !== g) {
                  if (!Array.isArray(g))
                    return void t2(new N.CometChatException(JSON.parse(M.format(JSON.stringify(v.GENERAL_ERROR.PARAMETER_MUST_BE_AN_ARRAY), "SET_TAGS", "SET_TAGS", "setTags()"))));
                  0 < g.length && (I.paginationMeta[v.MessageConstatnts.PAGINATION.KEYS.TAGS] = g);
                }
                var h = I.WithTags;
                if (void 0 !== h) {
                  if (typeof h !== v.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.BOOLEAN)
                    return void t2(new N.CometChatException(JSON.parse(M.format(JSON.stringify(v.GENERAL_ERROR.PARAMETER_MUST_BE_A_BOOLEAN), "WITH_TAGS", "WITH_TAGS", "withTags()"))));
                  I.paginationMeta[v.MessageConstatnts.PAGINATION.KEYS.WITH_TAGS] = 1 == h ? 1 : 0;
                }
                var A = I.hideDeletedMessages;
                if (void 0 !== A) {
                  if (typeof A !== v.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.BOOLEAN)
                    return void t2(new N.CometChatException(JSON.parse(M.format(JSON.stringify(v.GENERAL_ERROR.PARAMETER_MUST_BE_A_BOOLEAN), "HIDE_DELETED_MESSAGES", "HIDE_DELETED_MESSAGES", "hideDeletedMessages()"))));
                  I.paginationMeta[v.MessageConstatnts.PAGINATION.KEYS.HIDE_DELETED_MESSAGES] = 1 == A ? 1 : 0;
                }
                var R = I.interactionGoalCompletedOnly;
                if (void 0 !== R) {
                  if (typeof R !== v.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.BOOLEAN)
                    return void t2(new N.CometChatException(JSON.parse(M.format(JSON.stringify(v.GENERAL_ERROR.PARAMETER_MUST_BE_A_BOOLEAN), "ONLY_INTERACTION_GOAL_COMPLETED", "ONLY_INTERACTION_GOAL_COMPLETED", "interactionGoalCompletedOnly()"))));
                  I.paginationMeta[v.MessageConstatnts.PAGINATION.KEYS.ONLY_INTERACTION_GOAL_COMPLETED] = 1 == R ? 1 : 0;
                }
                if (I.createEndpoint(), I.totalPages) {
                  if (1 != I.totalPages)
                    ;
                  else if (I.lastAffix == I.affix)
                    return void o2([]);
                }
                y.makeApiCall(I.endpointName, { listId: I.listId }, I.paginationMeta).then(function(n3) {
                  return f(I, void 0, void 0, function() {
                    var E2, t3 = this;
                    return O(this, function(e4) {
                      return E2 = [], n3[v.ResponseConstants.RESPONSE_KEYS.KEY_META][v.ResponseConstants.RESPONSE_KEYS.KEY_CURSOR].hasOwnProperty(v.MessageConstatnts.PAGINATION.KEYS.ID) && 0 == this.id && (this.id = parseInt(n3.meta.cursor[v.MessageConstatnts.PAGINATION.KEYS.ID])), n3[v.ResponseConstants.RESPONSE_KEYS.KEY_META][v.ResponseConstants.RESPONSE_KEYS.KEY_CURSOR].hasOwnProperty(v.MessageConstatnts.PAGINATION.KEYS.SENT_AT) && 0 == this.timestamp && (this.timestamp = n3.meta.cursor[v.MessageConstatnts.PAGINATION.KEYS.SENT_AT]), n3.meta.pagination.hasOwnProperty("total_pages") && (this.totalPages = n3.meta.pagination.total_pages), n3.meta.cursor.hasOwnProperty("affix") && (this.lastAffix = n3.meta.cursor.affix), n3.data[0] ? (0 < this.id && (this.id = parseInt(n3.data[0].id)), 0 < this.timestamp && (this.timestamp = n3.data[0].sentAt), n3.data.map(function(a3) {
                        return f(t3, void 0, void 0, function() {
                          var t4, n4, o3, s3, r3, i3;
                          return O(this, function(e5) {
                            switch (e5.label) {
                              case 0:
                                return P.MessageListnerMaping.getInstance().get(v.LOCAL_STORE.KEY_MESSAGE_LISTENER_LIST).then(function(e6) {
                                  parseInt(a3.id) > e6 && P.MessageListnerMaping.getInstance().set(v.LOCAL_STORE.KEY_MESSAGE_LISTENER_LIST, parseInt(a3.id));
                                }, function(e6) {
                                  P.MessageListnerMaping.getInstance().set(v.LOCAL_STORE.KEY_MESSAGE_LISTENER_LIST, parseInt(a3.id));
                                }), this.affix == v.MessageConstatnts.PAGINATION.AFFIX.APPEND ? (this.id < parseInt(a3.id) && 0 < this.id && (this.id = parseInt(a3.id)), this.timestamp < a3.sentAt && 0 < this.timestamp && (this.timestamp = a3.sentAt), this.updatedAt < a3.updatedAt && 0 < this.updatedAt && (this.updatedAt = a3.updatedAt)) : (this.id > parseInt(a3.id) && (this.id = parseInt(a3.id)), this.timestamp > a3.sentAt && (this.timestamp = a3.sentAt), this.updatedAt > a3.updatedAt && (this.updatedAt = a3.updatedAt)), this.id && (this.paginationMeta[v.MessageConstatnts.PAGINATION.KEYS.ID] = this.id), this.timestamp && (this.paginationMeta[v.MessageConstatnts.PAGINATION.KEYS.SENT_AT] = this.timestamp), this.updatedAt && (this.paginationMeta[v.MessageConstatnts.PAGINATION.KEYS.UPDATED_AT] = this.updatedAt), a3.category !== v.MessageConstatnts.CATEGORY.MESSAGE && a3.category !== v.MessageConstatnts.CATEGORY.CUSTOM || a3.type === v.MessageConstatnts.TYPE.TEXT || !a3.data.attachments || 0 === (null === (s3 = a3.data.attachments) || void 0 === s3 ? void 0 : s3.length) ? [3, 2] : (null === (r3 = L.CometChat.user) || void 0 === r3 ? void 0 : r3.getFat()) && L.CometChat.SECURED_MEDIA_HOST ? (t4 = L.CometChat.SECURED_MEDIA_HOST, n4 = null === (i3 = L.CometChat.user) || void 0 === i3 ? void 0 : i3.getFat(), [4, M.updatePropertiesWithDynamicValue(a3, t4, "?" + v.ADDITIONAL_CONSTANTS.SECURE_URL_PROPERTY + "=" + n4)]) : [3, 2];
                              case 1:
                                (o3 = e5.sent()) && (a3 = o3), e5.label = 2;
                              case 2:
                                return E2.push(m.MessageController.trasformJSONMessge(a3)), [2];
                            }
                          });
                        });
                      })) : E2 = [], o2(E2), [2];
                    });
                  });
                }, function(e4) {
                  t2(new N.CometChatException(e4.error));
                });
              } catch (e4) {
                t2(new N.CometChatException(e4));
              }
            });
          }, e2.prototype.createEndpoint = function() {
            this.parentMessageId ? (this.endpointName = "getThreadMessages", this.listId = this.parentMessageId.toString(), this.hideReplies && (this.hideReplies = false, delete this.paginationMeta[v.MessageConstatnts.PAGINATION.KEYS.HIDE_REPLIES])) : (M.isFalsy(this.guid) || M.isFalsy(this.uid)) && M.isFalsy(this.guid) ? (M.isFalsy(this.uid) ? this.endpointName = "getMessages" : this.endpointName = "getUserMessages", this.listId = this.uid) : (this.endpointName = "getGroupMessages", this.listId = this.guid);
          }, e2.prototype.makeData = function() {
            var e3 = {};
            e3[v.MessageConstatnts.PAGINATION.KEYS.PER_PAGE] = this.limit, e3[v.MessageConstatnts.PAGINATION.KEYS.AFFIX] = this.affix, (M.isFalsy(this.guid) || M.isFalsy(this.uid)) && M.isFalsy(this.guid) && M.isFalsy(this.uid);
          }, e2.prototype.getFilteredPreviousDataByReceiverId = function(t2) {
            return f(this, void 0, void 0, function() {
              var n2, o2 = this;
              return O(this, function(e3) {
                switch (e3.label) {
                  case 0:
                    switch (n2 = [], t2) {
                      case "user":
                        return [3, 1];
                      case "group":
                        return [3, 3];
                      case "both":
                        return [3, 5];
                    }
                    return [3, 7];
                  case 1:
                    return [4, r.MessagesStore.getInstance().get(this.uid).then(function(t3) {
                      Object.keys(t3).filter(function(e4) {
                        return parseInt(e4) > o2.id;
                      }).map(function(e4) {
                        n2 = s(n2, [t3[e4]]);
                      });
                    })];
                  case 2:
                    return e3.sent(), [3, 9];
                  case 3:
                    return [4, r.MessagesStore.getInstance().get(this.guid).then(function(t3) {
                      Object.keys(t3).filter(function(e4) {
                        return parseInt(e4) > o2.id;
                      }).map(function(e4) {
                        n2 = s(n2, [t3[e4]]);
                      });
                    })];
                  case 4:
                    e3.sent(), e3.label = 5;
                  case 5:
                    return [4, r.MessagesStore.getInstance().get(this.guid).then(function(t3) {
                      Object.keys(t3).filter(function(e4) {
                        return parseInt(e4) > o2.id;
                      }).filter(function(e4) {
                        return t3[e4].sender.uid == o2.uid;
                      }).map(function(e4) {
                        n2 = s(n2, [t3[e4]]);
                      });
                    })];
                  case 6:
                    return e3.sent(), [3, 9];
                  case 7:
                    return [4, r.MessagesStore.getInstance().getAllMessages().then(function(t3) {
                      Object.keys(t3).filter(function(e4) {
                        return parseInt(e4) > o2.id;
                      }).map(function(e4) {
                        n2 = s(n2, [t3[e4]]);
                      });
                    })];
                  case 8:
                    return e3.sent(), [3, 9];
                  case 9:
                    return [2, n2];
                }
              });
            });
          }, e2.prototype.getFilteredNextDataByReceiverId = function(t2) {
            return f(this, void 0, void 0, function() {
              var n2, o2 = this;
              return O(this, function(e3) {
                switch (e3.label) {
                  case 0:
                    switch (n2 = [], t2) {
                      case "user":
                        return [3, 1];
                      case "group":
                        return [3, 3];
                      case "both":
                        return [3, 5];
                    }
                    return [3, 7];
                  case 1:
                    return [4, r.MessagesStore.getInstance().get(this.uid).then(function(t3) {
                      Object.keys(t3).filter(function(e4) {
                        return parseInt(e4) > o2.id;
                      }).map(function(e4) {
                        n2 = s(n2, [t3[e4]]);
                      });
                    })];
                  case 2:
                    return e3.sent(), [3, 9];
                  case 3:
                    return [4, r.MessagesStore.getInstance().get(this.guid).then(function(t3) {
                      Object.keys(t3).filter(function(e4) {
                        return parseInt(e4) > o2.id;
                      }).map(function(e4) {
                        n2 = s(n2, [t3[e4]]);
                      });
                    })];
                  case 4:
                    e3.sent(), e3.label = 5;
                  case 5:
                    return [4, r.MessagesStore.getInstance().get(this.guid).then(function(t3) {
                      Object.keys(t3).filter(function(e4) {
                        return parseInt(e4) > o2.id;
                      }).filter(function(e4) {
                        return t3[e4].sender.uid == o2.uid;
                      }).map(function(e4) {
                        n2 = s(n2, [t3[e4]]);
                      });
                    })];
                  case 6:
                    return e3.sent(), [3, 9];
                  case 7:
                    return [4, r.MessagesStore.getInstance().getAllMessages().then(function(t3) {
                      Object.keys(t3).filter(function(e4) {
                        return parseInt(e4) > o2.id;
                      }).map(function(e4) {
                        n2 = s(n2, [t3[e4]]);
                      });
                    })];
                  case 8:
                    return e3.sent(), [3, 9];
                  case 9:
                    return [2, n2];
                }
              });
            });
          }, e2;
        }();
        t.MessagesRequest = o;
        var a = function() {
          function e2() {
            this.maxLimit = v.DEFAULT_VALUES.MSGS_MAX_LIMIT, this.timestamp = 0, this.id = v.DEFAULT_VALUES.DEFAULT_MSG_ID, this.unread = false, this.HideMessagesFromBlockedUsers = false, this.onlyUpdate = 0, this.HideDeletedMessages = false, this.WithTags = false, this.interactionGoalCompletedOnly = false, this.ListMentionedMessages = false, this.mentionsWithUserTags = false, this.mentionsWithBlockedRelation = false;
          }
          return e2.prototype.setLimit = function(e3) {
            return this.limit = e3, this;
          }, e2.prototype.setGUID = function(e3) {
            return this.guid = e3, this;
          }, e2.prototype.setUID = function(e3) {
            return this.uid = e3, this;
          }, e2.prototype.setParentMessageId = function(e3) {
            return this.parentMessageId = e3, this;
          }, e2.prototype.setTimestamp = function(e3) {
            return void 0 === e3 && (e3 = M.getCurrentTime()), this.timestamp = e3, this;
          }, e2.prototype.setMessageId = function(e3) {
            return void 0 === e3 && (e3 = v.DEFAULT_VALUES.DEFAULT_MSG_ID), this.id = e3, this;
          }, e2.prototype.setUnread = function(e3) {
            return void 0 === e3 && (e3 = false), this.unread = e3, this;
          }, e2.prototype.hideMessagesFromBlockedUsers = function(e3) {
            return void 0 === e3 && (e3 = false), this.HideMessagesFromBlockedUsers = e3, this;
          }, e2.prototype.setSearchKeyword = function(e3) {
            return this.searchKey = e3, this;
          }, e2.prototype.setUpdatedAfter = function(e3) {
            return this.updatedAt = e3, this;
          }, e2.prototype.updatesOnly = function(e3) {
            return e3 && (this.onlyUpdate = 1), this;
          }, e2.prototype.setCategory = function(e3) {
            return this.category = e3, this;
          }, e2.prototype.setCategories = function(e3) {
            return this.categories = e3, this;
          }, e2.prototype.setType = function(e3) {
            return this.type = e3, this;
          }, e2.prototype.setTypes = function(e3) {
            return this.types = e3, this;
          }, e2.prototype.hideReplies = function(e3) {
            return this.HideReplies = e3, this;
          }, e2.prototype.hideDeletedMessages = function(e3) {
            return this.HideDeletedMessages = e3, this;
          }, e2.prototype.setTags = function(e3) {
            return this.tags = e3, this;
          }, e2.prototype.withTags = function(e3) {
            return this.WithTags = e3, this;
          }, e2.prototype.myMentionsOnly = function(e3) {
            return void 0 === e3 && (e3 = false), this.ListMentionedMessages = e3, this;
          }, e2.prototype.mentionsWithTagInfo = function(e3) {
            return void 0 === e3 && (e3 = false), this.mentionsWithUserTags = e3, this;
          }, e2.prototype.mentionsWithBlockedInfo = function(e3) {
            return void 0 === e3 && (e3 = false), this.mentionsWithBlockedRelation = e3, this;
          }, e2.prototype.setInteractionGoalCompletedOnly = function(e3) {
            return void 0 === e3 && (e3 = false), this.interactionGoalCompletedOnly = e3, this;
          }, e2.prototype.build = function() {
            return this.category && this.categories && this.categories.push(this.category), this.type && this.types && this.types.push(this.type), new o(this);
          }, e2;
        }();
        t.MessagesRequestBuilder = a;
      }, function(e, t, n) {
        "use strict";
        var a = this && this.__assign || function() {
          return (a = Object.assign || function(e2) {
            for (var t2, n2 = 1, o2 = arguments.length; n2 < o2; n2++)
              for (var s2 in t2 = arguments[n2])
                Object.prototype.hasOwnProperty.call(t2, s2) && (e2[s2] = t2[s2]);
            return e2;
          }).apply(this, arguments);
        };
        Object.defineProperty(t, "__esModule", { value: true }), t.MessagesStore = void 0;
        var o = n(4), E = n(0), c = n(1), s = n(13), r = function() {
          function e2(e3) {
            this.store = c.constants.DEFAULT_STORE, E.isFalsy(e3) || (this.store = e3), this.messagesStore = s.createInstance({ name: E.format(c.LOCAL_STORE.STORE_STRING, o.CometChat.getAppId(), c.LOCAL_STORE.MESSAGES_STORE) }), this.messagesStore.setDriver([s.LOCALSTORAGE, s.INDEXEDDB, s.WEBSQL]);
          }
          return e2.getInstance = function() {
            return null == e2.MessagesStore && (e2.MessagesStore = new e2()), e2.MessagesStore;
          }, e2.prototype.set = function(e3, t2) {
            return this.messagesStore.setItem(e3, t2);
          }, e2.prototype.remove = function(e3) {
            this.messagesStore.removeItem(e3);
          }, e2.prototype.get = function(e3) {
            return this.messagesStore.getItem(e3);
          }, e2.prototype.clearStore = function() {
            var n2 = this;
            return new Promise(function(e3, t2) {
              n2.messagesStore.clear().then(function() {
                e3(true);
              }).catch(function(e4) {
                t2(e4);
              });
            });
          }, e2.prototype.getAllMessages = function() {
            var n2 = this, o2 = {};
            return new Promise(function(e3, t2) {
              n2.messagesStore.iterate(function(e4, t3, n3) {
                t3 != c.constants.MSG_VER_POST && t3 != c.constants.MSG_VER_POST && (o2 = a(a({}, o2), e4));
              }).then(function() {
                e3(o2);
              });
            });
          }, e2.prototype.clear = function(e3) {
          }, e2.prototype.selectStore = function(e3) {
            this.store = e3;
          }, e2.prototype.storeMessages = function(e3) {
            var n2 = this;
            if (o.CometChat.user.getUid()) {
              var s2 = o.CometChat.user.getUid(), r2 = {}, i = 0;
              return this.get(c.constants.MSG_VER_POST).then(function(o2) {
                e3.map(function(e4) {
                  var t2;
                  if (!E.isFalsy(e4)) {
                    0 == i && (i = parseInt(e4.getId().toString())), i > e4.getId() && (i = parseInt(e4.getId().toString())), o2 < e4.getId() && (o2 = parseInt(e4.getId().toString()));
                    var n3 = void 0;
                    n3 = e4.getSender() instanceof Object ? e4.getSender().getUid() : e4.getSender(), e4.getReceiverType() == c.MessageConstatnts.RECEIVER_TYPE.GROUP && (n3 = e4.getReceiver()), e4.getSender() instanceof Object ? e4.getSender().getUid() == s2 && (n3 = e4.getReceiver()) : e4.getSender() == s2 && (n3 = e4.getReceiver()), r2[n3] || (r2[n3] = {}), r2[n3] = a(a({}, r2[n3]), ((t2 = {})[e4.getId()] = e4, t2));
                  }
                }), n2.get(c.constants.MSG_VER_PRE).then(function(e4) {
                  (0 < i && i < e4 || null == e4) && n2.set(c.constants.MSG_VER_PRE, i);
                }) && 0 < o2 && n2.set(c.constants.MSG_VER_POST, o2), Object.keys(r2).map(function(t2) {
                  n2.get(t2).then(function(e4) {
                    null == e4 && (e4 = {}), n2.set(t2, a(a({}, r2[t2]), e4));
                  });
                });
              }), true;
            }
          }, e2;
        }();
        t.MessagesStore = r;
      }, function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", { value: true }), t.BlockedUsersRequestBuilder = t.BlockedUsersRequest = void 0;
        var s = n(6), o = n(0), r = n(12), i = n(2), a = n(1), E = function() {
          function e2(e3) {
            this.next_page = 1, this.current_page = 1, this.total_pages = -1, this.fetchingInProgress = false, this.pagination = { total: 0, count: 0, per_page: 0, current_page: 0, total_pages: 0, links: [] }, o.isFalsy(e3) || (this.limit = e3.limit, o.isFalsy(e3.searchKeyword) || (this.searchKeyword = e3.searchKeyword), o.isFalsy(e3.direction) || (this.direction = e3.direction));
          }
          return e2.prototype.validateBlockedUsersBuilder = function() {
            if (void 0 === this.limit)
              return new i.CometChatException(JSON.parse(o.format(JSON.stringify(a.GENERAL_ERROR.METHOD_COMPULSORY), "SET_LIMIT", "SET_LIMIT", "Set Limit")));
            if (isNaN(this.limit))
              return new i.CometChatException(JSON.parse(o.format(JSON.stringify(a.GENERAL_ERROR.PARAMETER_MUST_BE_A_NUMBER), "SET_LIMIT", "SET_LIMIT", "setLimit()")));
            if (this.limit > a.DEFAULT_VALUES.USERS_MAX_LIMIT)
              return new i.CometChatException(JSON.parse(o.format(JSON.stringify(a.GENERAL_ERROR.LIMIT_EXCEEDED), "SET_LIMIT", "SET_LIMIT", a.DEFAULT_VALUES.USERS_MAX_LIMIT)));
            if (this.limit < a.DEFAULT_VALUES.ZERO)
              return new i.CometChatException(JSON.parse(o.format(JSON.stringify(a.GENERAL_ERROR.PARAMETER_MUST_BE_A_POSITIVE_NUMBER), "SET_LIMIT", "SET_LIMIT", "setLimit()")));
            if (void 0 !== this.searchKeyword) {
              if (typeof this.searchKeyword !== a.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)
                return new i.CometChatException(JSON.parse(o.format(JSON.stringify(a.GENERAL_ERROR.PARAMETER_MUST_BE_A_STRING), "SET_SEARCH_KEYWORD", "SET_SEARCH_KEYWORD", "setSearchKeyword()")));
              if (o.isFalsy(this.searchKeyword.trim()))
                return new i.CometChatException(JSON.parse(o.format(JSON.stringify(a.GENERAL_ERROR.INVALID), "SET_SEARCH_KEYWORD", "SET_SEARCH_KEYWORD", "search keyword", "search keyword")));
              this.searchKeyword = this.searchKeyword.trim();
            }
            if (void 0 !== this.direction) {
              if (typeof this.direction !== a.COMMON_UTILITY_CONSTANTS.TYPE_CONSTANTS.STRING)
                return new i.CometChatException(JSON.parse(o.format(JSON.stringify(a.GENERAL_ERROR.PARAMETER_MUST_BE_A_STRING), "SET_DIRECTION", "SET_DIRECTION", "setDirection()")));
              if (this.direction != a.BlockedUsersConstants.REQUEST_KEYS.DIRECTIONS.BOTH && this.direction != a.BlockedUsersConstants.REQUEST_KEYS.DIRECTIONS.BLOCKED_BY_ME && this.direction != a.BlockedUsersConstants.REQUEST_KEYS.DIRECTIONS.HAS_BLOCKED_ME)
                return new i.CometChatException(a.UserErrors.INVALID_DIRECTION);
            }
          }, e2.prototype.fetchNext = function() {
            var o2 = this;
            return new Promise(function(n2, t2) {
              try {
                if (o2.fetchingInProgress)
                  o2.fetchingInProgress = false, n2([]);
                else {
                  o2.fetchingInProgress = true;
                  var e3 = o2.validateBlockedUsersBuilder();
                  if (e3 instanceof i.CometChatException)
                    return void t2(e3);
                  s.makeApiCall("blockedUsersList", {}, o2.getNextData()).then(function(e4) {
                    if (e4.meta && (o2.total_pages = e4.meta.pagination.total_pages), 0 < e4.data.length) {
                      o2.pagination = e4.meta.pagination;
                      var t3 = [];
                      e4.data.map(function(e5) {
                        t3.push(r.UsersController.trasformJSONUser(e5));
                      }), n2(t3);
                    } else
                      n2([]);
                    o2.fetchingInProgress = false;
                  }, function(e4) {
                    o2.fetchingInProgress = false, t2(new i.CometChatException(e4.error));
                  });
                }
              } catch (e4) {
                o2.fetchingInProgress = false, t2(new i.CometChatException(e4));
              }
            });
          }, e2.prototype.getNextData = function() {
            var e3 = {};
            if (e3.per_page = this.limit, o.isFalsy(this.direction) || (e3.direction = this.direction), o.isFalsy(this.searchKeyword) || (e3.searchKey = this.searchKeyword), 1 == this.current_page)
              e3.page = this.next_page, this.next_page++, this.current_page++;
            else {
              if (this.next_page > this.total_pages)
                return e3.page = this.next_page, e3;
              e3.page = this.next_page++;
            }
            return e3;
          }, e2.MAX_LIMIT = 2, e2.DEFAULT_LIMIT = 1, e2.directions = a.BlockedUsersConstants.REQUEST_KEYS.DIRECTIONS, e2;
        }();
        t.BlockedUsersRequest = E;
        var c = function() {
          function e2() {
          }
          return e2.prototype.setLimit = function(e3) {
            return this.limit = e3, this;
          }, e2.prototype.setSearchKeyword = function(e3) {
            return this.searchKeyword = e3, this;
          }, e2.prototype.setDirection = function(e3) {
            return this.direction = e3, this;
          }, e2.prototype.blockedByMe = function() {
            return this.direction = a.BlockedUsersConstants.REQUEST_KEYS.DIRECTIONS.BLOCKED_BY_ME, this;
          }, e2.prototype.hasBlockedMe = function() {
            return this.direction = a.BlockedUsersConstants.REQUEST_KEYS.DIRECTIONS.HAS_BLOCKED_ME, this;
          }, e2.prototype.build = function() {
            return new E(this);
          }, e2;
        }();
        t.BlockedUsersRequestBuilder = c;
      }, function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", { value: true }), t.AppSettingsBuilder = t.AppSettings = void 0;
        var o = n(1), s = function() {
          function t2(e2) {
            this.subscriptionType = t2.SUBSCRIPTION_TYPE_NONE, this.roles = null, this.region = o.DEFAULT_VALUES.REGION_DEFAULT, this.autoJoinGroup = true, this.establishSocketConnection = true, this.adminHost = null, this.clientHost = null, this.subscriptionType = e2.subscriptionType, this.roles = e2.roles, this.region = e2.region, this.autoJoinGroup = e2.autoJoinGroup, this.establishSocketConnection = e2.establishSocketConnection, this.adminHost = e2.adminHost, this.clientHost = e2.clientHost;
          }
          return t2.prototype.getSubscriptionType = function() {
            return this.subscriptionType;
          }, t2.prototype.getRoles = function() {
            return this.roles;
          }, t2.prototype.getRegion = function() {
            return this.region;
          }, t2.prototype.getIsAutoJoinEnabled = function() {
            return this.autoJoinGroup;
          }, t2.prototype.shouldAutoEstablishSocketConnection = function() {
            return this.establishSocketConnection;
          }, t2.prototype.getAdminHost = function() {
            return this.adminHost;
          }, t2.prototype.getClientHost = function() {
            return this.clientHost;
          }, t2.SUBSCRIPTION_TYPE_NONE = "NONE", t2.SUBSCRIPTION_TYPE_ALL_USERS = "ALL_USERS", t2.SUBSCRIPTION_TYPE_ROLES = "ROLES", t2.SUBSCRIPTION_TYPE_FRIENDS = "FRIENDS", t2.REGION_EU = o.DEFAULT_VALUES.REGION_DEFAULT_EU, t2.REGION_US = o.DEFAULT_VALUES.REGION_DEFAULT_US, t2.REGION_IN = o.DEFAULT_VALUES.REGION_DEFAULT_IN, t2.REGION_PRIVATE = o.DEFAULT_VALUES.REGION_DEFAULT_PRIVATE, t2;
        }();
        t.AppSettings = s;
        var r = function() {
          function e2() {
            this.subscriptionType = s.SUBSCRIPTION_TYPE_NONE, this.roles = null, this.region = o.DEFAULT_VALUES.REGION_DEFAULT, this.autoJoinGroup = true, this.establishSocketConnection = true, this.adminHost = null, this.clientHost = null;
          }
          return e2.prototype.subscribePresenceForAllUsers = function() {
            return this.subscriptionType = s.SUBSCRIPTION_TYPE_ALL_USERS, this;
          }, e2.prototype.subscribePresenceForRoles = function(e3) {
            return this.subscriptionType = s.SUBSCRIPTION_TYPE_ROLES, this.roles = e3, this;
          }, e2.prototype.subscribePresenceForFriends = function() {
            return this.subscriptionType = s.SUBSCRIPTION_TYPE_FRIENDS, this;
          }, e2.prototype.setRegion = function(e3) {
            return void 0 === e3 && (e3 = o.DEFAULT_VALUES.REGION_DEFAULT), this.region = e3.toLowerCase(), this;
          }, e2.prototype.enableAutoJoinForGroups = function(e3) {
            return void 0 === e3 && (e3 = true), this.autoJoinGroup = e3, this;
          }, e2.prototype.autoEstablishSocketConnection = function(e3) {
            return void 0 === e3 && (e3 = true), this.establishSocketConnection = e3, this;
          }, e2.prototype.overrideAdminHost = function(e3) {
            return this.adminHost = e3, this;
          }, e2.prototype.overrideClientHost = function(e3) {
            return this.clientHost = e3, this;
          }, e2.prototype.build = function() {
            return new s(this);
          }, e2;
        }();
        t.AppSettingsBuilder = r;
      }, function(e, t, n) {
        "use strict";
        var C = this && this.__assign || function() {
          return (C = Object.assign || function(e2) {
            for (var t2, n2 = 1, o2 = arguments.length; n2 < o2; n2++)
              for (var s2 in t2 = arguments[n2])
                Object.prototype.hasOwnProperty.call(t2, s2) && (e2[s2] = t2[s2]);
            return e2;
          }).apply(this, arguments);
        }, o = this && this.__awaiter || function(e2, i, a, E) {
          return new (a || (a = Promise))(function(n2, t2) {
            function o2(e3) {
              try {
                r2(E.next(e3));
              } catch (e4) {
                t2(e4);
              }
            }
            function s2(e3) {
              try {
                r2(E.throw(e3));
              } catch (e4) {
                t2(e4);
              }
            }
            function r2(e3) {
              var t3;
              e3.done ? n2(e3.value) : (t3 = e3.value, t3 instanceof a ? t3 : new a(function(e4) {
                e4(t3);
              })).then(o2, s2);
            }
            r2((E = E.apply(e2, i || [])).next());
          });
        }, T = this && this.__generator || function(n2, o2) {
          var s2, r2, i, e2, a = { label: 0, sent: function() {
            if (1 & i[0])
              throw i[1];
            return i[1];
          }, trys: [], ops: [] };
          return e2 = { next: t2(0), throw: t2(1), return: t2(2) }, "function" == typeof Symbol && (e2[Symbol.iterator] = function() {
            return this;
          }), e2;
          function t2(t3) {
            return function(e3) {
              return function(t4) {
                if (s2)
                  throw new TypeError("Generator is already executing.");
                for (; a; )
                  try {
                    if (s2 = 1, r2 && (i = 2 & t4[0] ? r2.return : t4[0] ? r2.throw || ((i = r2.return) && i.call(r2), 0) : r2.next) && !(i = i.call(r2, t4[1])).done)
                      return i;
                    switch (r2 = 0, i && (t4 = [2 & t4[0], i.value]), t4[0]) {
                      case 0:
                      case 1:
                        i = t4;
                        break;
                      case 4:
                        return a.label++, { value: t4[1], done: false };
                      case 5:
                        a.label++, r2 = t4[1], t4 = [0];
                        continue;
                      case 7:
                        t4 = a.ops.pop(), a.trys.pop();
                        continue;
                      default:
                        if (!(i = 0 < (i = a.trys).length && i[i.length - 1]) && (6 === t4[0] || 2 === t4[0])) {
                          a = 0;
                          continue;
                        }
                        if (3 === t4[0] && (!i || t4[1] > i[0] && t4[1] < i[3])) {
                          a.label = t4[1];
                          break;
                        }
                        if (6 === t4[0] && a.label < i[1]) {
                          a.label = i[1], i = t4;
                          break;
                        }
                        if (i && a.label < i[2]) {
                          a.label = i[2], a.ops.push(t4);
                          break;
                        }
                        i[2] && a.ops.pop(), a.trys.pop();
                        continue;
                    }
                    t4 = o2.call(n2, a);
                  } catch (e4) {
                    t4 = [6, e4], r2 = 0;
                  } finally {
                    s2 = i = 0;
                  }
                if (5 & t4[0])
                  throw t4[1];
                return { value: t4[0] ? t4[1] : void 0, done: true };
              }([t3, e3]);
            };
          }
        }, d = this && this.__spreadArrays || function() {
          for (var e2 = 0, t2 = 0, n2 = arguments.length; t2 < n2; t2++)
            e2 += arguments[t2].length;
          var o2 = Array(e2), s2 = 0;
          for (t2 = 0; t2 < n2; t2++)
            for (var r2 = arguments[t2], i = 0, a = r2.length; i < a; i++, s2++)
              o2[s2] = r2[i];
          return o2;
        };
        Object.defineProperty(t, "__esModule", { value: true }), t.CometChatHelper = void 0;
        var S = n(11), p = n(1), l = n(12), _ = n(15), g = n(29), h = n(4), A = n(2), s = n(0), R = n(7), I = n(5), f = n(18), O = n(10), r = function() {
          function e2() {
          }
          return e2.processMessage = function(e3) {
            try {
              return S.MessageController.trasformJSONMessge(e3);
            } catch (e4) {
              s.Logger.error("CometChatHelper: processMessage", e4);
            }
          }, e2.getConversationFromMessage = function(u) {
            return new Promise(function(E, c) {
              try {
                h.CometChat.getLoggedinUser().then(function(e3) {
                  if (null !== e3) {
                    var t2 = S.MessageController.trasformJSONMessge(u), n2 = t2.receiverType, o2 = t2.conversationId, s2 = void 0, r2 = S.MessageController.trasformJSONMessge(u);
                    if (n2 == p.MessageConstatnts.RECEIVER_TYPE.USER) {
                      var i = l.UsersController.trasformJSONUser(t2[p.MessageConstatnts.KEYS.SENDER]);
                      s2 = i.getUid() == e3.getUid() ? l.UsersController.trasformJSONUser(t2[p.MessageConstatnts.KEYS.RECEIVER]) : i;
                    } else
                      s2 = _.GroupsController.trasformJSONGroup(t2[p.MessageConstatnts.KEYS.RECEIVER]);
                    var a = g.ConversationController.trasformJSONConversation(o2, n2, r2, s2, 0, [], null, null);
                    E(a);
                  } else
                    c(p.UserErrors.USER_NOT_LOGGED_IN);
                }, function(e3) {
                  c(new A.CometChatException(e3.error));
                });
              } catch (e3) {
                c(new A.CometChatException(e3));
              }
            });
          }, e2.updateMessageWithReactionInfo = function(S2, p2, l2) {
            return o(this, void 0, void 0, function() {
              var t2 = this;
              return T(this, function(e3) {
                return [2, new Promise(function(c, u) {
                  return o(t2, void 0, void 0, function() {
                    var t3, n2, o2, s2, r2, i, a, E;
                    return T(this, function(e4) {
                      switch (e4.label) {
                        case 0:
                          return e4.trys.push([0, 4, , 5]), S2 && p2 && l2 ? S2 instanceof R.BaseMessage ? l2 !== I.MESSAGE_REACTION_ACTIONS.MESSAGE_REACTION_ADDED ? [3, 1] : (parseInt(S2.getId()) === parseInt(p2.getMessageId()) && (0 < (null === (E = S2.getReactions()) || void 0 === E ? void 0 : E.length) ? -1 !== (t3 = S2.getReactions().findIndex(function(e5) {
                            return e5.getReaction() === p2.getReaction();
                          })) ? ((a = S2.getReactions())[t3] = new f.ReactionCount(C(C({}, a[t3]), { count: a[t3].count + 1 })), S2.setReactions(a)) : ((r2 = new f.ReactionCount({})).setCount(1), r2.setReaction(p2.getReaction()), r2.setReactedByMe(false), S2.setReactions(d(S2.getReactions(), [r2]))) : ((n2 = new f.ReactionCount({})).setCount(1), n2.setReaction(p2.getReaction()), S2.setReactions([n2])), c(S2)), [3, 3]) : (u(new A.CometChatException(O.ERRORS.PARAMETER_MISSING)), [2]) : (u(new A.CometChatException(O.ERRORS.PARAMETER_MISSING)), [2]);
                        case 1:
                          return l2 !== I.MESSAGE_REACTION_ACTIONS.MESSAGE_REACTION_REMOVED ? [3, 3] : parseInt(S2.getId()) !== parseInt(p2.getMessageId()) ? [3, 3] : [4, h.CometChat.getLoggedInUser()];
                        case 2:
                          o2 = e4.sent(), 0 < S2.getReactions().length && -1 !== (s2 = S2.getReactions().findIndex(function(e5) {
                            return e5.getReaction() === p2.getReaction();
                          })) && (1 < (r2 = S2.getReactions()[s2]).getCount() ? (a = S2.getReactions(), i = { count: a[s2].count - 1 }, o2.getUid() === p2.getUid() && (i.reactedByMe = false), a[s2] = new f.ReactionCount(C(C({}, a[s2]), i))) : a = (a = S2.getReactions()).filter(function(e5, t4) {
                            return t4 !== s2;
                          }), S2.setReactions(a)), c(S2), e4.label = 3;
                        case 3:
                          return u(new A.CometChatException(O.ERRORS.PARAMETER_MISSING)), [3, 5];
                        case 4:
                          return e4.sent(), [3, 5];
                        case 5:
                          return [2];
                      }
                    });
                  });
                })];
              });
            });
          }, e2;
        }();
        t.CometChatHelper = r;
      }, function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", { value: true }), t.MainVideoContainerSetting = t.VirtualBackgroundBuilder = t.VirtualBackground = t.CallSettingsBuilder = t.CallSettings = void 0;
        var o = n(1), s = n(0), r = function() {
          function e2(e3) {
            this.sessionID = e3.sessionID, this.defaultLayout = e3.defaultLayout, this.isAudioOnly = e3.isAudioOnly, this.region = e3.region, this.user = e3.user, this.mode = e3.mode, this.domain = e3.domain, this.ShowEndCallButton = e3.ShowEndCallButton, this.ShowMuteAudioButton = e3.ShowMuteAudioButton, this.ShowPauseVideoButton = e3.ShowPauseVideoButton, this.ShowScreenShareButton = e3.ShowScreenShareButton, this.ShowSwitchModeButton = e3.ShowSwitchModeButton, this.StartAudioMuted = e3.StartAudioMuted, this.StartVideoMuted = e3.StartVideoMuted, this.localizedObject = e3.localizedObject, this.analyticsSettings = e3.analyticsSettings, this.appId = e3.appId, this.customCSS = e3.customCSS, this.ShowRecordingButton = e3.ShowRecordingButton, this.StartRecordingOnCallStart = e3.StartRecordingOnCallStart, this.useLegacyUI = e3.useLegacyUI, this.ShowSwitchToVideoCallButton = e3.ShowSwitchToVideoCallButton, this.VirtualBackground = e3.virtualBackground, this.ShowVirtualBackgroundSetting = e3.ShowVirtualBackgroundSetting, this.MainVideoContainerSetting = e3.MainVideoContainerSetting;
          }
          return e2.prototype.shouldUseLegacyUI = function() {
            return this.useLegacyUI;
          }, e2.prototype.isRecordingButtonEnabled = function() {
            return this.ShowRecordingButton;
          }, e2.prototype.shouldStartRecordingOnCallStart = function() {
            return this.StartRecordingOnCallStart;
          }, e2.prototype.getCustomCSS = function() {
            return this.customCSS;
          }, e2.prototype.getSessionId = function() {
            return this.sessionID;
          }, e2.prototype.isAudioOnlyCall = function() {
            return this.isAudioOnly;
          }, e2.prototype.getUser = function() {
            return this.user;
          }, e2.prototype.getRegion = function() {
            return this.region;
          }, e2.prototype.getAppId = function() {
            return this.appId;
          }, e2.prototype.getDomain = function() {
            return this.domain;
          }, e2.prototype.isDefaultLayoutEnabled = function() {
            return this.defaultLayout;
          }, e2.prototype.getMode = function() {
            return this.mode;
          }, e2.prototype.getStartWithAudioMuted = function() {
            return this.StartAudioMuted;
          }, e2.prototype.getStartWithVideoMuted = function() {
            return this.StartVideoMuted;
          }, e2.prototype.isEndCallButtonEnabled = function() {
            return this.ShowEndCallButton;
          }, e2.prototype.isMuteAudioButtonEnabled = function() {
            return this.ShowMuteAudioButton;
          }, e2.prototype.isPauseVideoButtonEnabled = function() {
            return this.ShowPauseVideoButton;
          }, e2.prototype.isScreenShareButtonEnabled = function() {
            return this.ShowScreenShareButton;
          }, e2.prototype.isModeButtonEnabled = function() {
            return this.ShowSwitchModeButton;
          }, e2.prototype.getLocalizedStringObject = function() {
            return this.localizedObject;
          }, e2.prototype.getAnalyticsSettings = function() {
            return this.analyticsSettings;
          }, e2.prototype.isAudioToVideoButtonEnabled = function() {
            return this.ShowSwitchToVideoCallButton;
          }, e2.prototype.getVirtualBackground = function() {
            return this.VirtualBackground;
          }, e2.prototype.isVirtualBackgroundSettingEnabled = function() {
            return this.ShowVirtualBackgroundSetting;
          }, e2.prototype.getMainVideoContainerSetting = function() {
            return this.MainVideoContainerSetting;
          }, e2.POSITION_TOP_LEFT = "top-left", e2.POSITION_TOP_RIGHT = "top-right", e2.POSITION_BOTTOM_LEFT = "bottom-left", e2.POSITION_BOTTOM_RIGHT = "bottom-right", e2.ASPECT_RATIO_DEFAULT = "default", e2.ASPECT_RATIO_CONTAIN = "contain", e2.ASPECT_RATIO_COVER = "cover", e2;
        }();
        t.CallSettings = r;
        var i = function() {
          function e2() {
            this.defaultLayout = true, this.isAudioOnly = false, this.mode = o.CallConstants.CALL_MODE.DEFAULT, this.ShowEndCallButton = true, this.ShowMuteAudioButton = true, this.ShowPauseVideoButton = true, this.ShowScreenShareButton = true, this.ShowSwitchModeButton = true, this.StartAudioMuted = false, this.StartVideoMuted = false, this.localizedObject = {}, this.analyticsSettings = {}, this.ShowRecordingButton = false, this.StartRecordingOnCallStart = false, this.useLegacyUI = false, this.ShowSwitchToVideoCallButton = true, this.virtualBackground = new E().build(), this.ShowVirtualBackgroundSetting = true, this.MainVideoContainerSetting = new c();
          }
          return e2.prototype.setSessionID = function(e3) {
            return this.sessionID = e3, this;
          }, e2.prototype.enableDefaultLayout = function(e3) {
            return this.defaultLayout = e3, this;
          }, e2.prototype.setIsAudioOnlyCall = function(e3) {
            return this.isAudioOnly = e3, this;
          }, e2.prototype.setRegion = function(e3) {
            return this.region = e3, this;
          }, e2.prototype.setDomain = function(e3) {
            return this.domain = e3, this;
          }, e2.prototype.setUser = function(e3) {
            return this.user = e3, this;
          }, e2.prototype.setMode = function(e3) {
            return this.mode = e3, this;
          }, e2.prototype.showEndCallButton = function(e3) {
            return this.ShowEndCallButton = e3, this;
          }, e2.prototype.showMuteAudioButton = function(e3) {
            return this.ShowMuteAudioButton = e3, this;
          }, e2.prototype.showPauseVideoButton = function(e3) {
            return this.ShowPauseVideoButton = e3, this;
          }, e2.prototype.showScreenShareButton = function(e3) {
            return this.ShowScreenShareButton = e3, this;
          }, e2.prototype.showModeButton = function(e3) {
            return this.ShowSwitchModeButton = e3, this;
          }, e2.prototype.setLocalizedStringObject = function(e3) {
            return this.localizedObject = e3, this;
          }, e2.prototype.setAnalyticsSettings = function(e3) {
            return this.analyticsSettings = e3, this;
          }, e2.prototype.setAppId = function(e3) {
            return this.appId = e3, this;
          }, e2.prototype.startWithAudioMuted = function(e3) {
            return this.StartAudioMuted = e3, this;
          }, e2.prototype.startWithVideoMuted = function(e3) {
            return this.StartVideoMuted = e3, this;
          }, e2.prototype.setCustomCSS = function(e3) {
            return this.customCSS = e3, this;
          }, e2.prototype.showRecordingButton = function(e3) {
            return this.ShowRecordingButton = e3, this;
          }, e2.prototype.startRecordingOnCallStart = function(e3) {
            return this.StartRecordingOnCallStart = e3, this;
          }, e2.prototype.forceLegacyUI = function(e3) {
            return this.useLegacyUI = e3, this;
          }, e2.prototype.showSwitchToVideoCallButton = function(e3) {
            return this.ShowSwitchToVideoCallButton = e3, this;
          }, e2.prototype.setVirtualBackground = function(e3) {
            return this.virtualBackground = e3, this;
          }, e2.prototype.showVirtualBackgroundSetting = function(e3) {
            return this.ShowVirtualBackgroundSetting = e3, this;
          }, e2.prototype.setMainVideoContainerSetting = function(e3) {
            return this.MainVideoContainerSetting = e3, this;
          }, e2.prototype.build = function() {
            return new r(this);
          }, e2;
        }();
        t.CallSettingsBuilder = i;
        var a = function() {
          function e2(e3) {
            this.AllowBackgroundBlur = e3.AllowBackgroundBlur, this.AllowUserImages = e3.AllowUserImages, this.ShowDefaultImages = e3.ShowDefaultImages, this.SetImages = e3.SetImages, this.EnforceBackgroundBlur = e3.EnforceBackgroundBlur, this.EnforceBackgroundImage = e3.EnforceBackgroundImage;
          }
          return e2.prototype.shouldAllowBackgroundBlur = function() {
            return this.AllowBackgroundBlur;
          }, e2.prototype.shouldAllowUserImages = function() {
            return this.AllowUserImages;
          }, e2.prototype.shouldShowDefaultImages = function() {
            return this.ShowDefaultImages;
          }, e2.prototype.getImages = function() {
            return this.SetImages;
          }, e2.prototype.isBackgroundBlurEnforced = function() {
            return this.EnforceBackgroundBlur;
          }, e2.prototype.getEnforcedBackgroundImage = function() {
            return this.EnforceBackgroundImage;
          }, e2;
        }();
        t.VirtualBackground = a;
        var E = function() {
          function e2() {
            this.AllowBackgroundBlur = true, this.AllowUserImages = true, this.ShowDefaultImages = true, this.SetImages = [], this.EnforceBackgroundBlur = 0, this.EnforceBackgroundImage = "";
          }
          return e2.prototype.allowBackgroundBlur = function(e3) {
            return this.AllowBackgroundBlur = e3, this;
          }, e2.prototype.allowUserImages = function(e3) {
            return this.AllowUserImages = e3, this;
          }, e2.prototype.showDefaultImages = function(e3) {
            return this.ShowDefaultImages = e3, this;
          }, e2.prototype.setImages = function(e3) {
            return this.SetImages = e3, this;
          }, e2.prototype.enforceBackgroundBlur = function(e3) {
            return this.EnforceBackgroundBlur = e3, this;
          }, e2.prototype.enforceBackgroundImage = function(e3) {
            return this.EnforceBackgroundImage = e3, this;
          }, e2.prototype.build = function() {
            return new a(this);
          }, e2;
        }();
        t.VirtualBackgroundBuilder = E;
        var c = function() {
          function e2() {
            this.videoFit = r.ASPECT_RATIO_CONTAIN, this.zoomButton = o.CallConstants.ZOOM_BUTTON_DEFAULT_PARAMS, this.nameLabel = o.CallConstants.NAME_LABEL_DEFAULT_PARAMS, this.network = o.CallConstants.NETWORK_LABEL_DEFAULT_PARAMS;
          }
          return e2.prototype.setMainVideoAspectRatio = function(e3) {
            this.videoFit = e3;
          }, e2.prototype.setFullScreenButtonParams = function(e3, t2) {
            s.isFalsy(e3) || (this.zoomButton[o.CallConstants.MAIN_VIDEO_CONTAINER_SETTINGS.KEYS.POSITION] = e3), null != t2 && null != t2 && (this.zoomButton[o.CallConstants.MAIN_VIDEO_CONTAINER_SETTINGS.KEYS.VISIBILITY] = t2);
          }, e2.prototype.setNameLabelParams = function(e3, t2, n2) {
            s.isFalsy(e3) || (this.nameLabel[o.CallConstants.MAIN_VIDEO_CONTAINER_SETTINGS.KEYS.POSITION] = e3), null != t2 && null != t2 && (this.nameLabel[o.CallConstants.MAIN_VIDEO_CONTAINER_SETTINGS.KEYS.VISIBILITY] = t2), s.isFalsy(n2) || (this.nameLabel[o.CallConstants.MAIN_VIDEO_CONTAINER_SETTINGS.KEYS.COLOR] = n2);
          }, e2.prototype.setNetworkLabelParams = function(e3, t2) {
            s.isFalsy(e3) || (this.network[o.CallConstants.MAIN_VIDEO_CONTAINER_SETTINGS.KEYS.POSITION] = e3), null != t2 && null != t2 && (this.network[o.CallConstants.MAIN_VIDEO_CONTAINER_SETTINGS.KEYS.VISIBILITY] = t2);
          }, e2;
        }();
        t.MainVideoContainerSetting = c;
      }, function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", { value: true }), t.RTCUser = void 0;
        var o = n(0), s = function() {
          function e2(e3) {
            this.avatar = "", o.isFalsy(e3) || (this.uid = e3.toString());
          }
          return e2.prototype.setUID = function(e3) {
            this.uid = e3 ? e3.toString() : "";
          }, e2.prototype.getUID = function() {
            return this.uid.toString();
          }, e2.prototype.setName = function(e3) {
            this.name = e3 ? e3.toString() : "";
          }, e2.prototype.getName = function() {
            return this.name.toString();
          }, e2.prototype.setAvatar = function(e3) {
            this.avatar = e3 ? e3.toString() : "";
          }, e2.prototype.getAvatar = function() {
            return this.avatar.toString();
          }, e2.prototype.setJWT = function(e3) {
            this.jwt = e3 ? e3.toString() : "";
          }, e2.prototype.getJWT = function() {
            return this.jwt.toString();
          }, e2.prototype.setResource = function(e3) {
            this.resource = e3 ? e3.toString() : "";
          }, e2.prototype.getResource = function() {
            return this.resource.toString();
          }, e2;
        }();
        t.RTCUser = s;
      }, function(e, t, n) {
        "use strict";
        var o = this && this.__assign || function() {
          return (o = Object.assign || function(e2) {
            for (var t2, n2 = 1, o2 = arguments.length; n2 < o2; n2++)
              for (var s2 in t2 = arguments[n2])
                Object.prototype.hasOwnProperty.call(t2, s2) && (e2[s2] = t2[s2]);
            return e2;
          }).apply(this, arguments);
        }, s = this && this.__awaiter || function(e2, i2, a2, E2) {
          return new (a2 || (a2 = Promise))(function(n2, t2) {
            function o2(e3) {
              try {
                r2(E2.next(e3));
              } catch (e4) {
                t2(e4);
              }
            }
            function s2(e3) {
              try {
                r2(E2.throw(e3));
              } catch (e4) {
                t2(e4);
              }
            }
            function r2(e3) {
              var t3;
              e3.done ? n2(e3.value) : (t3 = e3.value, t3 instanceof a2 ? t3 : new a2(function(e4) {
                e4(t3);
              })).then(o2, s2);
            }
            r2((E2 = E2.apply(e2, i2 || [])).next());
          });
        }, r = this && this.__generator || function(n2, o2) {
          var s2, r2, i2, e2, a2 = { label: 0, sent: function() {
            if (1 & i2[0])
              throw i2[1];
            return i2[1];
          }, trys: [], ops: [] };
          return e2 = { next: t2(0), throw: t2(1), return: t2(2) }, "function" == typeof Symbol && (e2[Symbol.iterator] = function() {
            return this;
          }), e2;
          function t2(t3) {
            return function(e3) {
              return function(t4) {
                if (s2)
                  throw new TypeError("Generator is already executing.");
                for (; a2; )
                  try {
                    if (s2 = 1, r2 && (i2 = 2 & t4[0] ? r2.return : t4[0] ? r2.throw || ((i2 = r2.return) && i2.call(r2), 0) : r2.next) && !(i2 = i2.call(r2, t4[1])).done)
                      return i2;
                    switch (r2 = 0, i2 && (t4 = [2 & t4[0], i2.value]), t4[0]) {
                      case 0:
                      case 1:
                        i2 = t4;
                        break;
                      case 4:
                        return a2.label++, { value: t4[1], done: false };
                      case 5:
                        a2.label++, r2 = t4[1], t4 = [0];
                        continue;
                      case 7:
                        t4 = a2.ops.pop(), a2.trys.pop();
                        continue;
                      default:
                        if (!(i2 = 0 < (i2 = a2.trys).length && i2[i2.length - 1]) && (6 === t4[0] || 2 === t4[0])) {
                          a2 = 0;
                          continue;
                        }
                        if (3 === t4[0] && (!i2 || t4[1] > i2[0] && t4[1] < i2[3])) {
                          a2.label = t4[1];
                          break;
                        }
                        if (6 === t4[0] && a2.label < i2[1]) {
                          a2.label = i2[1], i2 = t4;
                          break;
                        }
                        if (i2 && a2.label < i2[2]) {
                          a2.label = i2[2], a2.ops.push(t4);
                          break;
                        }
                        i2[2] && a2.ops.pop(), a2.trys.pop();
                        continue;
                    }
                    t4 = o2.call(n2, a2);
                  } catch (e4) {
                    t4 = [6, e4], r2 = 0;
                  } finally {
                    s2 = i2 = 0;
                  }
                if (5 & t4[0])
                  throw t4[1];
                return { value: t4[0] ? t4[1] : void 0, done: true };
              }([t3, e3]);
            };
          }
        };
        Object.defineProperty(t, "__esModule", { value: true }), t.WSConnectionHelper = void 0;
        var p = n(4), l = n(1), i = n(36), a = n(41), C = n(0), E = n(42), T = n(27), c = n(30), u = n(24), S = n(25), d = n(59), _ = n(60), g = n(61), h = n(62), A = n(63), R = n(64), I = n(65), f = n(66), O = n(67), N = n(18), y = n(26), m = n(32), M = n(31), v = n(5), P = n(68), L = E.ListenerHandlers.getInstance(), D = function() {
          function t2() {
          }
          return t2.getInstance = function() {
            try {
              return null != this.wsConnectionHelper && null != this.wsConnectionHelper || (this.wsConnectionHelper = new t2()), this.wsConnectionHelper;
            } catch (e2) {
              C.Logger.error("WSConnectionHelper: getInstance", e2);
            }
          }, t2.prototype.WSLogin = function(t3, n2) {
            var o2 = this;
            try {
              P.getWSURL().then(function(e2) {
                o2.connection = new WebSocket(e2), n2 && o2.connection && o2.connection.readyState == v.READY_STATE.CONNECTING && n2(o2.connection.readyState), o2.connection.onopen = function(e3) {
                  o2.onOpen(e3, n2), o2.authenticateUser(t3);
                }, o2.connection.onclose = function(e3) {
                  o2.onClose(e3, n2);
                }, o2.connection.onmessage = function(e3) {
                  o2.onMessage(e3);
                };
              }, function(e2) {
                C.Logger.error("WSConnectionHelper :: WSLogin", e2);
              });
            } catch (e2) {
              C.Logger.error("WSConnectionHelper: WSLogin", e2);
            }
          }, t2.prototype.onOpen = function(e2, t3) {
            try {
              t3 && this.connection && t3(this.connection.readyState);
            } catch (e3) {
              C.Logger.error("WSConnectionHelper: onOpen", e3);
            }
          }, t2.prototype.onClose = function(e2, t3) {
            try {
              t3 && this.connection && t3(this.connection.readyState);
            } catch (e3) {
              C.Logger.error("WSConnectionHelper: onClose", e3);
            }
          }, t2.prototype.publishMessageReaction = function(n2, e2) {
            switch (e2) {
              case v.MESSAGE_REACTION_ACTIONS.MESSAGE_REACTION_ADDED:
                L.messageHandlers.map(function(e3) {
                  if (e3._eventListener.onMessageReactionAdded) {
                    var t3 = new R.MessageReactionEvent(n2);
                    e3._eventListener.onMessageReactionAdded(new N.MessageReaction(t3.getReaction()));
                  }
                });
                break;
              case v.MESSAGE_REACTION_ACTIONS.MESSAGE_REACTION_REMOVED:
                L.messageHandlers.map(function(e3) {
                  if (e3._eventListener.onMessageReactionRemoved) {
                    var t3 = new R.MessageReactionEvent(n2);
                    e3._eventListener.onMessageReactionRemoved(new N.MessageReaction(t3.getReaction()));
                  }
                });
            }
          }, t2.prototype.onMessage = function(e2) {
            if (e2.data && "string" == typeof e2.data)
              try {
                var t3 = JSON.parse(e2.data);
                if (t3 && t3.action && t3.action === v.KEYS.PONG)
                  return;
                t3.action != v.MESSAGE_REACTION_ACTIONS.MESSAGE_REACTION_ADDED && t3.action != v.MESSAGE_REACTION_ACTIONS.MESSAGE_REACTION_REMOVED || (t3 = o(o({}, t3), { type: t3.action }));
                var n2 = this.getCometChatEventFromMessage(t3);
                if (n2.getDeviceId() === p.CometChat.getSessionId() && n2.getType() !== v.AUTH.TYPE)
                  return;
                switch (n2.getType()) {
                  case v.MESSAGE_REACTION_ACTIONS.MESSAGE_REACTION_ADDED:
                    this.publishMessageReaction(t3, v.MESSAGE_REACTION_ACTIONS.MESSAGE_REACTION_ADDED);
                    break;
                  case v.MESSAGE_REACTION_ACTIONS.MESSAGE_REACTION_REMOVED:
                    this.publishMessageReaction(t3, v.MESSAGE_REACTION_ACTIONS.MESSAGE_REACTION_REMOVED);
                    break;
                  case v.TYPING_INDICATOR.TYPE:
                    this.publishTypingIndicator(n2);
                    break;
                  case v.RECEIPTS.TYPE:
                    this.publishReceipts(n2);
                    break;
                  case v.PRESENCE.TYPE:
                    this.publishPresence(n2);
                    break;
                  case v.AUTH.TYPE:
                    this.authResponseReceived(n2);
                    break;
                  case v.MESSAGE.TYPE:
                    this.publishMessages(n2);
                    break;
                  case v.TRANSIENT_MESSAGE.TYPE:
                    this.publishTransientMessage(n2);
                    break;
                  case v.INTERACTION_RECEIPT.TYPE:
                    this.publishInteractionReceipt(n2);
                    break;
                  default:
                    C.Logger.log("WSHelper: onMessage :: unknown type", e2.data);
                }
              } catch (e3) {
                C.Logger.error("WSHelper: onMessage", e3);
              }
            else
              C.Logger.log("WSHelper: onMessage :: object data", e2.data);
          }, t2.prototype.authenticateUser = function(u2) {
            var S2 = this;
            try {
              p.CometChat.getLoggedinUser().then(function(c2) {
                c2 ? T.KeyStore.getInstance().get("deviceId").then(function(E2) {
                  C.getAppSettings().then(function(e2) {
                    var t3 = null;
                    window && window.location && window.location.origin && (t3 = window.location.origin);
                    var n2 = "", o2 = E2, s2 = { version: l.SDKHeader.sdkVersion, apiVersion: e2[l.APP_SETTINGS.KEYS.CHAT_API_VERSION], origin: t3, uts: (/* @__PURE__ */ new Date()).getTime() };
                    C.isFalsy(p.CometChat.resource) || (s2.resource = p.CometChat.resource), C.isFalsy(p.CometChat.platform) || (s2.platform = p.CometChat.platform), C.isFalsy(p.CometChat.language) || (s2.language = p.CometChat.language), navigator && (n2 = navigator.userAgent);
                    var r2 = { appInfo: s2, userAgent: n2, deviceId: o2, platform: l.SDKHeader.platform }, i2 = new d.CometChatAuthEvent(p.CometChat.getAppId(), "", "", c2.getUid(), p.CometChat.getSessionId());
                    if (i2.setAuth(u2), i2.setPresenceSubscription(p.CometChat.appSettings.getSubscriptionType()), i2.setDeviceId(p.CometChat.getSessionId()), i2.setExtraParmaeters(r2), P.checkConnection(S2.connection)) {
                      var a2 = i2.getAsString();
                      S2.connection.send(a2);
                    }
                  });
                }) : C.Logger.log("no logged-in user", "null");
              }, function(e2) {
                C.Logger.log("error in fetching logged-in user", e2);
              });
            } catch (e2) {
              C.Logger.error("WSConnectionHelper: startTypingIndicator", e2);
            }
          }, t2.prototype.authResponseReceived = function(e2) {
            try {
              "200" === e2.getCode() && "OK" === e2.getStatus() && this.startPingingWS();
            } catch (e3) {
              C.Logger.error("WSConnectionHelper: authResponseReceived", e3);
            }
          }, t2.prototype.WSLogout = function() {
            try {
              this.clearPingTimer(), P.checkConnection(this.connection) && this.connection.close(v.LOGOUT_CODE, v.LOGOUT_REASON);
            } catch (e2) {
              C.Logger.error("WSConnectionHelper: WSLogout", e2);
            }
          }, t2.prototype.startPingingWS = function() {
            var e2 = this;
            try {
              t2.pingTimer || (t2.pingTimer = setInterval(function() {
                return s(e2, void 0, void 0, function() {
                  var t3, n2;
                  return r(this, function(e3) {
                    switch (e3.label) {
                      case 0:
                        return P.checkConnection(this.connection) ? (t3 = new h.CometChatPingEvent("", "", "", "", ""), n2 = t3.getAsString(), this.connection.send(n2), [4, this.listenForPong()]) : [3, 2];
                      case 1:
                        e3.sent() ? (C.Logger.log("WSConnectionHelper :: startPingingWS", "pong success"), p.CometChat.getConnectionStatus() != l.CONNECTION_STATUS.CONNECTED && (this.WSLogout(), this.connection = null, p.CometChat.getInstance().makeWSConnection())) : (C.Logger.log("WSConnectionHelper :: startPingingWS", "pong failure"), this.WSLogout(), this.connection = null, p.CometChat.getInstance().setConnectionStatus(l.CONNECTION_STATUS.DISCONNECTED), L.connectionHandlers.map(function(e4) {
                          try {
                            e4._eventListener && (C.isFalsy(e4._eventListener.onDisconnected) || e4._eventListener.onDisconnected());
                          } catch (e5) {
                            C.Logger.error("WSConnectionHandlers: Disconnected Status", e5);
                          }
                        }), p.CometChat.getInstance().accidentallyDisconnected()), e3.label = 2;
                      case 2:
                        return [2];
                    }
                  });
                });
              }, 15e3));
            } catch (e3) {
              C.Logger.error("WSConnectionHelper: startPingingWS", e3);
            }
          }, t2.prototype.listenForPong = function() {
            var o2 = this;
            return new Promise(function(t3, e2) {
              var n2 = setTimeout(function() {
                t3(false);
              }, 3e3);
              o2.connection.addEventListener("message", function(e3) {
                e3 && e3.data && "string" == typeof e3.data && (JSON.parse(e3.data).action === v.KEYS.PONG && (clearTimeout(n2), t3(true)));
              });
            });
          }, t2.prototype.clearPingTimer = function() {
            t2.pingTimer && (clearInterval(t2.pingTimer), t2.pingTimer = void 0);
          }, t2.prototype.sendOnlineEvent = function() {
            var o2 = this;
            try {
              P.checkConnection(this.connection) && p.CometChat.getLoggedinUser().then(function(e2) {
                if (e2) {
                  e2.authToken && delete e2.authToken;
                  var t3 = { appId: p.CometChat.getAppId(), deviceId: p.CometChat.getSessionId(), type: v.PRESENCE.TYPE, body: { action: v.PRESENCE.ACTION.ONLINE, timestamp: Math.floor((/* @__PURE__ */ new Date()).getTime() / 1e3), user: e2 } };
                  if (P.checkConnection(o2.connection)) {
                    var n2 = P.stringifyMessage(t3);
                    o2.connection.send(n2);
                  }
                } else
                  C.Logger.log("no logged-in user", "null");
              }, function(e2) {
                C.Logger.log("error in fetching logged-in user", e2);
              });
            } catch (e2) {
              C.Logger.error("WSConnectionHelper: sendOnlineEvent", e2);
            }
          }, t2.prototype.sendOfflineEvent = function() {
            var o2 = this;
            try {
              P.checkConnection(this.connection) && p.CometChat.getLoggedinUser().then(function(e2) {
                if (e2) {
                  e2.authToken && delete e2.authToken;
                  var t3 = { appId: p.CometChat.getAppId(), deviceId: p.CometChat.getSessionId(), type: v.PRESENCE.TYPE, body: { action: v.PRESENCE.ACTION.OFFLINE, timestamp: Math.floor((/* @__PURE__ */ new Date()).getTime() / 1e3), user: e2 } };
                  if (P.checkConnection(o2.connection)) {
                    var n2 = P.stringifyMessage(t3);
                    o2.connection.send(n2);
                  }
                } else
                  C.Logger.log("no logged-in user", "null");
              }, function(e2) {
                C.Logger.log("error in fetching logged-in user", e2);
              });
            } catch (e2) {
              C.Logger.error("WSConnectionHelper: sendOfflineEvent", e2);
            }
          }, t2.prototype.startTypingIndicator = function(s2, r2, i2) {
            var a2 = this;
            try {
              p.CometChat.getLoggedinUser().then(function(e2) {
                if (e2) {
                  var t3 = new M.TypingIndicator(s2, r2);
                  e2.authToken && delete e2.authToken, t3.setSender(e2), i2 && t3.setMetadata(i2);
                  var n2 = new O.CometChatTypingEvent(p.CometChat.getAppId(), s2, r2, e2.getUid(), p.CometChat.getSessionId());
                  if (n2.setAction(v.TYPING_INDICATOR.ACTION.STARTED), n2.setTypingIndicator(t3), P.checkConnection(a2.connection)) {
                    var o2 = n2.getAsString();
                    a2.connection.send(o2);
                  }
                } else
                  C.Logger.log("no logged-in user", "null");
              }, function(e2) {
                C.Logger.log("error in fetching logged-in user", e2);
              });
            } catch (e2) {
              C.Logger.error("WSConnectionHelper: startTypingIndicator", e2);
            }
          }, t2.prototype.pauseTypingIndicator = function(s2, r2, i2) {
            var a2 = this;
            try {
              p.CometChat.getLoggedinUser().then(function(e2) {
                if (e2) {
                  var t3 = new M.TypingIndicator(s2, r2);
                  e2.authToken && delete e2.authToken, t3.setSender(e2), i2 && t3.setMetadata(i2);
                  var n2 = new O.CometChatTypingEvent(p.CometChat.getAppId(), s2, r2, e2.getUid(), p.CometChat.getSessionId());
                  if (n2.setAction(v.TYPING_INDICATOR.ACTION.ENDED), n2.setTypingIndicator(t3), P.checkConnection(a2.connection)) {
                    var o2 = n2.getAsString();
                    a2.connection.send(o2);
                  }
                } else
                  C.Logger.log("no logged-in user", "null");
              }, function(e2) {
                C.Logger.log("error in fetching logged-in user", e2);
              });
            } catch (e2) {
              C.Logger.error("WSConnectionHelper: pauseTypingIndicator", e2);
            }
          }, t2.prototype.markAsRead = function(s2, r2, i2, a2) {
            var E2 = this;
            try {
              p.CometChat.getMode();
              p.CometChat.getLoggedinUser().then(function(e2) {
                if (e2) {
                  var t3 = new I.CometChatReceiptEvent(p.CometChat.getAppId(), s2, r2, e2.getUid(), p.CometChat.getSessionId(), a2);
                  t3.setAction(v.RECEIPTS.ACTION.READ);
                  var n2 = new y.MessageReceipt();
                  if (e2.authToken && delete e2.authToken, n2.setSender(e2), n2.setReceiverType(r2), n2.setReceiver(s2), n2.setReceiptType(v.RECEIPTS.RECEIPT_TYPE.READ_RECEIPT), n2.setMessageId(i2), n2.setTimestamp(Math.floor((/* @__PURE__ */ new Date()).getTime() / 1e3).toString()), t3.setMessageReceipt(n2), P.checkConnection(E2.connection)) {
                    var o2 = t3.getAsString();
                    E2.connection.send(o2);
                  }
                } else
                  C.Logger.log("no logged-in user", "null");
              }, function(e2) {
                C.Logger.log("error in fetching logged-in user", e2);
              });
            } catch (e2) {
              C.Logger.error("WSConnectionHelper: markAsRead", e2);
            }
          }, t2.prototype.markAsDelivered = function(s2, r2, i2, a2) {
            var E2 = this;
            try {
              p.CometChat.getMode();
              p.CometChat.getLoggedinUser().then(function(e2) {
                if (e2) {
                  var t3 = new I.CometChatReceiptEvent(p.CometChat.getAppId(), s2, r2, e2.getUid(), p.CometChat.getSessionId(), a2);
                  t3.setAction(v.RECEIPTS.ACTION.DELIVERED);
                  var n2 = new y.MessageReceipt();
                  if (e2.authToken && delete e2.authToken, n2.setSender(e2), n2.setReceiverType(r2), n2.setReceiver(s2), n2.setReceiptType(v.RECEIPTS.RECEIPT_TYPE.DELIVERY_RECEIPT), n2.setMessageId(i2), n2.setTimestamp(Math.floor((/* @__PURE__ */ new Date()).getTime() / 1e3).toString()), t3.setMessageReceipt(n2), P.checkConnection(E2.connection)) {
                    var o2 = t3.getAsString();
                    E2.connection.send(o2);
                  }
                } else
                  C.Logger.log("no logged-in user", "null");
              }, function(e2) {
                C.Logger.log("error in fetching logged-in user", e2);
              });
            } catch (e2) {
              C.Logger.error("WSConnectionHelper: markAsDelivered", e2);
            }
          }, t2.prototype.sendTransientMessage = function(s2, r2, i2) {
            var a2 = this;
            try {
              p.CometChat.getLoggedinUser().then(function(e2) {
                if (e2) {
                  var t3 = new m.TransientMessage(s2, r2, i2);
                  e2.authToken && delete e2.authToken, t3.setSender(e2);
                  var n2 = new f.CometChatTransientEvent(p.CometChat.getAppId(), s2, r2, e2.getUid(), p.CometChat.getSessionId());
                  if (n2.setTransientMessage(t3), P.checkConnection(a2.connection)) {
                    var o2 = n2.getAsString();
                    a2.connection.send(o2);
                  }
                } else
                  C.Logger.log("no logged-in user", "null");
              }, function(e2) {
                C.Logger.log("error in fetching logged-in user", e2);
              });
            } catch (e2) {
              C.Logger.error("WSConnectionHelper: sendTransientMessage", e2);
            }
          }, t2.prototype.publishTypingIndicator = function(e2) {
            try {
              var t3 = e2.getTypingIndicator();
              switch (e2.getAction()) {
                case v.TYPING_INDICATOR.ACTION.STARTED:
                  L.messageHandlers.map(function(e3) {
                    e3._eventListener.onTypingStarted && e3._eventListener.onTypingStarted(t3);
                  }), a.TypingNotificationController.addIncomingTypingStarted(t3);
                  break;
                case v.TYPING_INDICATOR.ACTION.ENDED:
                  L.messageHandlers.map(function(e3) {
                    e3._eventListener.onTypingEnded && e3._eventListener.onTypingEnded(t3);
                  }), a.TypingNotificationController.removeIncomingTypingStarted(t3);
              }
            } catch (e3) {
              C.Logger.error("WSHelper: publishTypingIndicator", e3);
            }
          }, t2.prototype.publishReceipts = function(e2) {
            try {
              var t3 = e2.getMessageReceipt();
              switch (e2.getAction()) {
                case v.RECEIPTS.ACTION.DELIVERED:
                  L.messageHandlers.map(function(e3) {
                    e3._eventListener.onMessagesDelivered && e3._eventListener.onMessagesDelivered(t3);
                  });
                  break;
                case v.RECEIPTS.ACTION.READ:
                  L.messageHandlers.map(function(e3) {
                    e3._eventListener.onMessagesRead && e3._eventListener.onMessagesRead(t3);
                  });
              }
            } catch (e3) {
              C.Logger.error("WSHelper: publishReceipts", e3);
            }
          }, t2.prototype.publishPresence = function(e2) {
            try {
              var t3 = e2.getUser();
              switch (t3.setLastActiveAt(e2.getTimestamp()), e2.getAction()) {
                case v.PRESENCE.ACTION.ONLINE:
                case v.PRESENCE.ACTION.AVAILABLE:
                  t3.setStatus(l.PresenceConstatnts.STATUS.ONLINE), L.userHandlers.map(function(e3) {
                    C.isFalsy(e3._eventListener.onUserOnline) || e3._eventListener.onUserOnline(t3);
                  });
                  break;
                case v.PRESENCE.ACTION.OFFLINE:
                  t3.setStatus(l.PresenceConstatnts.STATUS.OFFLINE), L.userHandlers.map(function(e3) {
                    C.isFalsy(e3._eventListener.onUserOffline) || e3._eventListener.onUserOffline(t3);
                  });
              }
            } catch (e3) {
              C.Logger.error("WSHelper: publishPresence", e3);
            }
          }, t2.prototype.publishMessages = function(e2) {
            try {
              var t3 = e2.getMessage();
              t3 && t3.getId() && c.MessageListnerMaping.getInstance().set("all", t3.getId()), t3 instanceof S.Call ? this.publishCallMessage(t3) : t3 instanceof u.Action ? this.publishActionMessage(t3) : this.publishMessage(t3);
            } catch (e3) {
              C.Logger.error("WSHelper: publishMessages", e3);
            }
          }, t2.prototype.publishMessage = function(n2) {
            try {
              L.messageHandlers.map(function(e2) {
                if (e2._eventListener) {
                  var t3 = n2;
                  switch (t3.getType()) {
                    case l.MessageConstatnts.TYPE.TEXT:
                      C.isFalsy(e2._eventListener.onTextMessageReceived) || e2._eventListener.onTextMessageReceived(n2);
                      break;
                    case l.MessageConstatnts.TYPE.CUSTOM:
                      C.isFalsy(e2._eventListener.onCustomMessageReceived) || e2._eventListener.onCustomMessageReceived(n2);
                      break;
                    default:
                      t3.getCategory() == l.MessageCategory.CUSTOM ? C.isFalsy(e2._eventListener.onCustomMessageReceived) || e2._eventListener.onCustomMessageReceived(n2) : t3.getCategory() == l.MessageCategory.INTERACTIVE ? C.isFalsy(e2._eventListener.onInteractiveMessageReceived) || e2._eventListener.onInteractiveMessageReceived(n2) : C.isFalsy(e2._eventListener.onMediaMessageReceived) || e2._eventListener.onMediaMessageReceived(n2);
                  }
                }
              });
            } catch (e2) {
              C.Logger.error("WSHelper: publishMessage", e2);
            }
          }, t2.prototype.publishCallMessage = function(t3) {
            try {
              var n2 = i.CallController.getInstance().getActiveCall();
              switch (t3.getStatus()) {
                case l.CallConstants.CALL_STATUS.INITIATED:
                  t3.getReceiverType() == l.CallConstants.RECEIVER_TYPE_GROUP ? L.callHandlers.map(function(e2) {
                    t3.getCallInitiator().getUid().toLocaleLowerCase() != p.CometChat.user.getUid().toLocaleLowerCase() && (C.isFalsy(e2._eventListener.onIncomingCallReceived) || e2._eventListener.onIncomingCallReceived(t3));
                  }) : L.callHandlers.map(function(e2) {
                    C.isFalsy(e2._eventListener.onIncomingCallReceived) || e2._eventListener.onIncomingCallReceived(t3);
                  });
                  break;
                case l.CallConstants.CALL_STATUS.ONGOING:
                  t3.getReceiverType() == l.CallConstants.RECEIVER_TYPE_GROUP ? t3.getCallInitiator().getUid().toLocaleLowerCase() == p.CometChat.user.getUid().toLocaleLowerCase() && L.callHandlers.map(function(e2) {
                    C.isFalsy(e2._eventListener.onOutgoingCallAccepted) || e2._eventListener.onOutgoingCallAccepted(t3);
                  }) : L.callHandlers.map(function(e2) {
                    C.isFalsy(e2._eventListener.onOutgoingCallAccepted) || e2._eventListener.onOutgoingCallAccepted(t3);
                  });
                  break;
                case l.CallConstants.CALL_STATUS.UNANSWERED:
                  if (t3.getCallInitiator().getUid().toLocaleLowerCase() == p.CometChat.user.getUid().toLocaleLowerCase())
                    L.callHandlers.map(function(e2) {
                      C.isFalsy(e2._eventListener.onOutgoingCallRejected) || e2._eventListener.onOutgoingCallRejected(t3);
                    });
                  else {
                    if (null !== n2 && n2.getSessionId() === t3.getSessionId())
                      try {
                        i.CallController.getInstance().endCall();
                      } catch (e2) {
                        C.Logger.error("CallError", e2);
                      }
                    L.callHandlers.map(function(e2) {
                      C.isFalsy(e2._eventListener.onIncomingCallCancelled) || e2._eventListener.onIncomingCallCancelled(t3);
                    });
                  }
                  break;
                case l.CallConstants.CALL_STATUS.REJECTED:
                  if (t3.getReceiverType() == l.CallConstants.RECEIVER_TYPE_GROUP)
                    t3.getCallInitiator().getUid().toLocaleLowerCase() == p.CometChat.user.getUid().toLocaleLowerCase() && L.callHandlers.map(function(e2) {
                      C.isFalsy(e2._eventListener.onOutgoingCallRejected) || e2._eventListener.onOutgoingCallRejected(t3);
                    });
                  else {
                    if (null !== n2 && n2.getSessionId() === t3.getSessionId())
                      try {
                        i.CallController.getInstance().endCall();
                      } catch (e2) {
                        C.Logger.error("CallError", e2);
                      }
                    L.callHandlers.map(function(e2) {
                      C.isFalsy(e2._eventListener.onOutgoingCallRejected) || e2._eventListener.onOutgoingCallRejected(t3);
                    });
                  }
                  break;
                case l.CallConstants.CALL_STATUS.BUSY:
                  t3.getReceiverType() == l.CallConstants.RECEIVER_TYPE_GROUP ? t3.getCallInitiator().getUid().toLocaleLowerCase() == p.CometChat.user.getUid().toLocaleLowerCase() && L.callHandlers.map(function(e2) {
                    C.isFalsy(e2._eventListener.onOutgoingCallRejected) || e2._eventListener.onOutgoingCallRejected(t3);
                  }) : L.callHandlers.map(function(e2) {
                    if (null !== n2 && n2.getSessionId() === t3.getSessionId())
                      try {
                        i.CallController.getInstance().endCall();
                      } catch (e3) {
                        C.Logger.error("CallError", e3);
                      }
                    C.isFalsy(e2._eventListener.onOutgoingCallRejected) || e2._eventListener.onOutgoingCallRejected(t3);
                  });
                  break;
                case l.CallConstants.CALL_STATUS.CANCELLED:
                  if (L.callHandlers.map(function(e2) {
                    C.isFalsy(e2._eventListener.onIncomingCallCancelled) || e2._eventListener.onIncomingCallCancelled(t3);
                  }), null !== n2 && n2.getSessionId() === t3.getSessionId())
                    try {
                      i.CallController.getInstance().endCall();
                    } catch (e2) {
                      C.Logger.error("CallError", e2);
                    }
                  break;
                case l.CallConstants.CALL_STATUS.ENDED:
                  if (L.callHandlers.map(function(e2) {
                    C.isFalsy(e2._eventListener.onCallEndedMessageReceived) || e2._eventListener.onCallEndedMessageReceived(t3);
                  }), i.CallController.getInstance().getCallListner() && i.CallController.getInstance().getCallListner()._eventListener.onCallEnded(t3), null !== n2 && n2.getSessionId() === t3.getSessionId())
                    try {
                      i.CallController.getInstance().endCall();
                    } catch (e2) {
                      C.Logger.error("CallError", e2);
                    }
                  break;
                default:
                  C.Logger.log("WSHelper: publishCallMessage :: unknown status", t3);
              }
            } catch (e2) {
              C.Logger.error("WSHelper: publishCallMessage", e2);
            }
          }, t2.prototype.publishActionMessage = function(t3) {
            try {
              switch (t3.getAction()) {
                case l.ActionConstatnts.ACTION_TYPE.TYPE_MEMBER_JOINED:
                  L.groupHandlers.map(function(e2) {
                    C.isFalsy(e2._eventListener.onGroupMemberJoined) || e2._eventListener.onGroupMemberJoined(t3, t3.getActionBy(), t3.getActionFor());
                  });
                  break;
                case l.ActionConstatnts.ACTION_TYPE.TYPE_MEMBER_INVITED:
                  L.groupHandlers.map(function(e2) {
                    C.isFalsy(e2._eventListener.onGroupMemberJoined) || e2._eventListener.onGroupMemberJoined(t3, t3.getActionBy(), t3.getActionFor());
                  });
                  break;
                case l.ActionConstatnts.ACTION_TYPE.TYPE_MEMBER_LEFT:
                  L.groupHandlers.map(function(e2) {
                    C.isFalsy(e2._eventListener.onGroupMemberLeft) || e2._eventListener.onGroupMemberLeft(t3, t3.getActionBy(), t3.getActionFor());
                  });
                  break;
                case l.ActionConstatnts.ACTION_TYPE.TYPE_MEMBER_BANNED:
                  L.groupHandlers.map(function(e2) {
                    C.isFalsy(e2._eventListener.onGroupMemberBanned) || e2._eventListener.onGroupMemberBanned(t3, t3.getActionOn(), t3.getActionBy(), t3.getActionFor());
                  });
                  break;
                case l.ActionConstatnts.ACTION_TYPE.TYPE_MEMBER_KICKED:
                  L.groupHandlers.map(function(e2) {
                    C.isFalsy(e2._eventListener.onGroupMemberKicked) || e2._eventListener.onGroupMemberKicked(t3, t3.getActionOn(), t3.getActionBy(), t3.getActionFor());
                  });
                  break;
                case l.ActionConstatnts.ACTION_TYPE.TYPE_MEMBER_UNBANNED:
                  L.groupHandlers.map(function(e2) {
                    C.isFalsy(e2._eventListener.onGroupMemberUnbanned) || e2._eventListener.onGroupMemberUnbanned(t3, t3.getActionOn(), t3.getActionBy(), t3.getActionFor());
                  });
                  break;
                case l.ActionConstatnts.ACTION_TYPE.TYPE_MEMBER_SCOPE_CHANGED:
                  L.groupHandlers.map(function(e2) {
                    C.isFalsy(e2._eventListener.onGroupMemberScopeChanged) || e2._eventListener.onGroupMemberScopeChanged(t3, t3.getActionOn(), t3.getNewScope(), t3.getOldScope(), t3.getActionFor());
                  });
                  break;
                case l.ActionConstatnts.ACTION_TYPE.TYPE_MESSAGE_EDITED:
                  L.messageHandlers.map(function(e2) {
                    C.isFalsy(e2._eventListener.onMessageEdited) || e2._eventListener.onMessageEdited(t3.getActionOn());
                  });
                  break;
                case l.ActionConstatnts.ACTION_TYPE.TYPE_MESSAGE_DELETED:
                  L.messageHandlers.map(function(e2) {
                    C.isFalsy(e2._eventListener.onMessageDeleted) || e2._eventListener.onMessageDeleted(t3.getActionOn());
                  });
                  break;
                case l.ActionConstatnts.ACTION_TYPE.TYPE_MEMBER_ADDED:
                  L.groupHandlers.map(function(e2) {
                    C.isFalsy(e2._eventListener.onGroupMemberAddedToGroup) || e2._eventListener.onGroupMemberAddedToGroup(t3, t3.getActionOn(), t3.getActionBy(), t3.getActionFor());
                  });
                  break;
                default:
                  C.Logger.log("WSHelper: publishActionMessage :: unknown action", t3);
              }
            } catch (e2) {
              C.Logger.error("WSHelper: publishActionMessage", e2);
            }
          }, t2.prototype.publishTransientMessage = function(e2) {
            try {
              var t3 = e2.getTransientMessage();
              L.messageHandlers.map(function(e3) {
                e3._eventListener.onTransientMessageReceived && e3._eventListener.onTransientMessageReceived(t3);
              });
            } catch (e3) {
              C.Logger.error("WSHelper: publishTransientMessage", e3);
            }
          }, t2.prototype.publishInteractionReceipt = function(e2) {
            try {
              var t3 = e2.getInteractionReceipt();
              L.messageHandlers.map(function(e3) {
                e3._eventListener.onInteractionGoalCompleted && e3._eventListener.onInteractionGoalCompleted(t3);
              });
            } catch (e3) {
              C.Logger.error("WSHelper: publishInteractionReceipt", e3);
            }
          }, t2.prototype.getCometChatEventFromMessage = function(e2) {
            try {
              if (e2.hasOwnProperty(v.KEYS.TYPE))
                switch (e2.type) {
                  case v.TYPING_INDICATOR.TYPE:
                    return O.CometChatTypingEvent.getTypingEventFromJSON(e2);
                  case v.RECEIPTS.TYPE:
                    return I.CometChatReceiptEvent.getReceiptEventFromJSON(e2);
                  case v.PRESENCE.TYPE:
                    return A.CometChatPresenceEvent.getPresenceEventFromJSON(e2);
                  case v.MESSAGE.TYPE:
                    return g.CometChatMessageEvent.getMessageEventFromJSON(e2);
                  case v.AUTH.TYPE:
                    return d.CometChatAuthEvent.getAuthEventFromJSON(e2);
                  case v.TRANSIENT_MESSAGE.TYPE:
                    return f.CometChatTransientEvent.getTransientEventFromJSON(e2);
                  case v.INTERACTION_RECEIPT.TYPE:
                    return _.CometChatInteractionReceiptEvent.getReceiptEventFromJSON(e2);
                  case v.MESSAGE_REACTION_ACTIONS.MESSAGE_REACTION_ADDED:
                  case v.MESSAGE_REACTION_ACTIONS.MESSAGE_REACTION_REMOVED:
                    return new R.MessageReactionEvent(e2);
                }
            } catch (e3) {
              C.Logger.error("WSConnectionHelper: getCometChatEventFromMessage", e3);
            }
          }, t2.wsConnectionHelper = new t2(), t2;
        }();
        t.WSConnectionHelper = D;
      }, function(e, t, n) {
        "use strict";
        var o, s = this && this.__extends || (o = function(e2, t2) {
          return (o = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e3, t3) {
            e3.__proto__ = t3;
          } || function(e3, t3) {
            for (var n2 in t3)
              t3.hasOwnProperty(n2) && (e3[n2] = t3[n2]);
          })(e2, t2);
        }, function(e2, t2) {
          function n2() {
            this.constructor = e2;
          }
          o(e2, t2), e2.prototype = null === t2 ? Object.create(t2) : (n2.prototype = t2.prototype, new n2());
        });
        Object.defineProperty(t, "__esModule", { value: true }), t.CometChatAuthEvent = void 0;
        var S = n(5), r = function(i) {
          function u(e2, t2, n2, o2, s2) {
            var r2 = i.call(this, e2, t2, n2, o2, s2) || this;
            return r2.setType(S.AUTH.TYPE), r2;
          }
          return s(u, i), u.prototype.getStatus = function() {
            return this.status;
          }, u.prototype.setStatus = function(e2) {
            this.status = e2;
          }, u.prototype.getCode = function() {
            return this.code;
          }, u.prototype.setCode = function(e2) {
            this.code = e2;
          }, u.prototype.setAuth = function(e2) {
            this.auth = e2;
          }, u.prototype.getAuth = function() {
            return this.auth;
          }, u.prototype.setPresenceSubscription = function(e2) {
            this.presenceSubscription = e2;
          }, u.prototype.getPresenceSubscription = function() {
            return this.presenceSubscription;
          }, u.prototype.setDeviceId = function(e2) {
            this.deviceId = e2;
          }, u.prototype.getdeviceId = function() {
            return this.deviceId;
          }, u.prototype.setExtraParmaeters = function(e2) {
            this.params = e2;
          }, u.prototype.getExtraParameters = function() {
            return this.params;
          }, u.prototype.getAsString = function() {
            return JSON.stringify(this.getAsJSONObject());
          }, u.prototype.getAsJSONObject = function() {
            var e2 = this.getCometChatEventJSON(), t2 = {};
            return t2[S.KEYS.AUTH] = this.auth, t2[S.KEYS.DEVICE_ID] = this.deviceId, t2[S.KEYS.PRESENCE_SUBSCRIPTION] = this.presenceSubscription, t2[S.KEYS.PARAMS] = this.params, e2[S.KEYS.BODY] = t2, e2;
          }, u.getAuthEventFromJSON = function(e2) {
            var t2 = e2[S.KEYS.APP_ID], n2 = e2[S.KEYS.RECEIVER], o2 = e2[S.KEYS.RECEIVER_TYPE], s2 = e2[S.KEYS.DEVICE_ID], r2 = e2[S.KEYS.SENDER], i2 = e2[S.KEYS.BODY], a = i2[S.KEYS.STATUS], E = i2[S.KEYS.CODE], c = new u(t2, n2, o2, r2, s2);
            return c.setStatus(a), c.setCode(E), c;
          }, u;
        }(n(9).CometChatEvent);
        t.CometChatAuthEvent = r;
      }, function(e, t, n) {
        "use strict";
        var o, s = this && this.__extends || (o = function(e2, t2) {
          return (o = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e3, t3) {
            e3.__proto__ = t3;
          } || function(e3, t3) {
            for (var n2 in t3)
              t3.hasOwnProperty(n2) && (e3[n2] = t3[n2]);
          })(e2, t2);
        }, function(e2, t2) {
          function n2() {
            this.constructor = e2;
          }
          o(e2, t2), e2.prototype = null === t2 ? Object.create(t2) : (n2.prototype = t2.prototype, new n2());
        });
        Object.defineProperty(t, "__esModule", { value: true }), t.CometChatInteractionReceiptEvent = void 0;
        var C = n(5), r = n(9), T = n(23), d = n(43), _ = n(3), i = function(a) {
          function l(e2, t2, n2, o2, s2, r2) {
            var i2 = a.call(this, e2, t2, n2, o2, s2, r2) || this;
            return i2.setType(C.INTERACTION_RECEIPT.TYPE), i2;
          }
          return s(l, a), l.prototype.getInteractionReceipt = function() {
            return this.interactionReceipt;
          }, l.prototype.setInteractionReceipt = function(e2) {
            this.interactionReceipt = e2;
          }, l.prototype.getAsString = function() {
            return JSON.stringify(this.getAsJSONObject());
          }, l.prototype.getAsJSONObject = function() {
            var e2 = this.getCometChatEventJSON(), t2 = {};
            return t2[C.KEYS.MESSAGE_ID] = this.interactionReceipt.getMessageId(), t2[C.KEYS.USER] = this.interactionReceipt.getSender(), t2[C.KEYS.INTERACTIONS] = this.interactionReceipt.getInteractions(), e2[C.KEYS.BODY] = t2, e2;
          }, l.getReceiptEventFromJSON = function(e2) {
            var t2 = e2[C.KEYS.APP_ID], n2 = e2[C.KEYS.RECEIVER], o2 = e2[C.KEYS.RECEIVER_TYPE], s2 = e2[C.KEYS.DEVICE_ID], r2 = e2[C.KEYS.SENDER], i2 = e2[C.KEYS.MESSAGE_SENDER], a2 = e2[C.KEYS.BODY], E = a2[C.KEYS.USER], c = a2[C.KEYS.MESSAGE_ID], u = a2[C.KEYS.INTERACTIONS], S = new l(t2, n2, o2, r2, s2, i2), p = new d.InteractionReceipt();
            return p.setSender(new _.User(E)), p.setReceiverType(o2), p.setMessageId(c), p.setReceiverId(n2), p.setInteractions(u.map(function(e3) {
              return T.Interaction.getInteractionFromJSON(e3);
            })), S.setInteractionReceipt(p), S;
          }, l;
        }(r.CometChatEvent);
        t.CometChatInteractionReceiptEvent = i;
      }, function(e, t, n) {
        "use strict";
        var o, s = this && this.__extends || (o = function(e2, t2) {
          return (o = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e3, t3) {
            e3.__proto__ = t3;
          } || function(e3, t3) {
            for (var n2 in t3)
              t3.hasOwnProperty(n2) && (e3[n2] = t3[n2]);
          })(e2, t2);
        }, function(e2, t2) {
          function n2() {
            this.constructor = e2;
          }
          o(e2, t2), e2.prototype = null === t2 ? Object.create(t2) : (n2.prototype = t2.prototype, new n2());
        });
        Object.defineProperty(t, "__esModule", { value: true }), t.CometChatMessageEvent = void 0;
        var u = n(11), S = n(5), r = function(i) {
          function c(e2, t2, n2, o2, s2) {
            var r2 = i.call(this, e2, t2, n2, o2, s2) || this;
            return r2.setType(S.MESSAGE.TYPE), r2;
          }
          return s(c, i), c.prototype.getMessage = function() {
            return this.message;
          }, c.prototype.setMessage = function(e2) {
            this.message = e2;
          }, c.getMessageEventFromJSON = function(e2) {
            var t2 = e2[S.KEYS.APP_ID], n2 = e2[S.KEYS.RECEIVER], o2 = e2[S.KEYS.RECEIVER_TYPE], s2 = e2[S.KEYS.DEVICE_ID], r2 = e2[S.KEYS.SENDER], i2 = e2[S.KEYS.BODY], a = new c(t2, n2, o2, r2, s2), E = u.MessageController.trasformJSONMessge(i2);
            return a.setMessage(E), a;
          }, c;
        }(n(9).CometChatEvent);
        t.CometChatMessageEvent = r;
      }, function(e, t, n) {
        "use strict";
        var o, s = this && this.__extends || (o = function(e2, t2) {
          return (o = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e3, t3) {
            e3.__proto__ = t3;
          } || function(e3, t3) {
            for (var n2 in t3)
              t3.hasOwnProperty(n2) && (e3[n2] = t3[n2]);
          })(e2, t2);
        }, function(e2, t2) {
          function n2() {
            this.constructor = e2;
          }
          o(e2, t2), e2.prototype = null === t2 ? Object.create(t2) : (n2.prototype = t2.prototype, new n2());
        });
        Object.defineProperty(t, "__esModule", { value: true }), t.CometChatPingEvent = void 0;
        var i = n(5), r = function(r2) {
          function e2(e3, t2, n2, o2, s2) {
            return r2.call(this, e3, t2, n2, o2, s2) || this;
          }
          return s(e2, r2), e2.prototype.getAsString = function() {
            return JSON.stringify(this.getAsJSONObject());
          }, e2.prototype.getAsJSONObject = function() {
            var e3 = {};
            return e3[i.KEYS.ACTION] = i.KEYS.PING, e3[i.KEYS.ACK] = "true", e3;
          }, e2;
        }(n(9).CometChatEvent);
        t.CometChatPingEvent = r;
      }, function(e, t, n) {
        "use strict";
        var o, s = this && this.__extends || (o = function(e2, t2) {
          return (o = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e3, t3) {
            e3.__proto__ = t3;
          } || function(e3, t3) {
            for (var n2 in t3)
              t3.hasOwnProperty(n2) && (e3[n2] = t3[n2]);
          })(e2, t2);
        }, function(e2, t2) {
          function n2() {
            this.constructor = e2;
          }
          o(e2, t2), e2.prototype = null === t2 ? Object.create(t2) : (n2.prototype = t2.prototype, new n2());
        });
        Object.defineProperty(t, "__esModule", { value: true }), t.CometChatPresenceEvent = void 0;
        var u = n(5), r = n(9), S = n(3), i = function(i2) {
          function c(e2, t2, n2, o2, s2) {
            var r2 = i2.call(this, e2, t2, n2, o2, s2) || this;
            return r2.setType(u.PRESENCE.TYPE), r2;
          }
          return s(c, i2), c.prototype.getAction = function() {
            return this.action;
          }, c.prototype.setAction = function(e2) {
            this.action = e2;
          }, c.prototype.getUser = function() {
            return this.user;
          }, c.prototype.setUser = function(e2) {
            this.user = e2;
          }, c.prototype.getTimestamp = function() {
            return this.timestamp;
          }, c.prototype.setTimestamp = function(e2) {
            this.timestamp = e2;
          }, c.getPresenceEventFromJSON = function(e2) {
            var t2 = e2[u.KEYS.APP_ID], n2 = e2[u.KEYS.DEVICE_ID], o2 = e2[u.KEYS.SENDER], s2 = e2[u.KEYS.BODY], r2 = s2[u.KEYS.ACTION], i3 = s2[u.KEYS.USER], a = s2[u.KEYS.TIMESTAMP], E = new c(t2, "", "", o2, n2);
            return E.setAction(r2), E.setUser(new S.User(i3)), E.setTimestamp(a), E;
          }, c;
        }(r.CometChatEvent);
        t.CometChatPresenceEvent = i;
      }, function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", { value: true }), t.MessageReactionEvent = void 0;
        var o = function() {
          function e2(e3) {
            Object.assign(this, e3);
          }
          return e2.prototype.setMessage = function(e3) {
            this.message = e3;
          }, e2.prototype.getMessage = function() {
            return this.message;
          }, e2.prototype.setReaction = function(e3) {
            this.reaction = e3;
          }, e2.prototype.getReaction = function() {
            return this.reaction;
          }, e2.prototype.setAction = function(e3) {
            this.action = e3;
          }, e2.prototype.getAction = function() {
            return this.action;
          }, e2.prototype.setDeviceId = function(e3) {
            this.deviceId = e3;
          }, e2.prototype.getDeviceId = function() {
            return this.deviceId;
          }, e2.prototype.setType = function(e3) {
            this.type = e3;
          }, e2.prototype.getType = function() {
            return this.type;
          }, e2;
        }();
        t.MessageReactionEvent = o;
      }, function(e, t, n) {
        "use strict";
        var o, s = this && this.__extends || (o = function(e2, t2) {
          return (o = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e3, t3) {
            e3.__proto__ = t3;
          } || function(e3, t3) {
            for (var n2 in t3)
              t3.hasOwnProperty(n2) && (e3[n2] = t3[n2]);
          })(e2, t2);
        }, function(e2, t2) {
          function n2() {
            this.constructor = e2;
          }
          o(e2, t2), e2.prototype = null === t2 ? Object.create(t2) : (n2.prototype = t2.prototype, new n2());
        });
        Object.defineProperty(t, "__esModule", { value: true }), t.CometChatReceiptEvent = void 0;
        var C = n(5), r = n(9), T = n(26), d = n(3), i = function(a) {
          function l(e2, t2, n2, o2, s2, r2) {
            var i2 = a.call(this, e2, t2, n2, o2, s2, r2) || this;
            return i2.setType(C.RECEIPTS.TYPE), i2;
          }
          return s(l, a), l.prototype.getAction = function() {
            return this.action;
          }, l.prototype.setAction = function(e2) {
            this.action = e2;
          }, l.prototype.getMessageReceipt = function() {
            return this.receipt;
          }, l.prototype.setMessageReceipt = function(e2) {
            this.receipt = e2;
          }, l.prototype.getAsString = function() {
            return JSON.stringify(this.getAsJSONObject());
          }, l.prototype.getAsJSONObject = function() {
            var e2 = this.getCometChatEventJSON(), t2 = {};
            return t2[C.KEYS.ACTION] = this.action, t2[C.KEYS.MESSAGE_ID] = this.receipt.getMessageId(), t2[C.KEYS.USER] = this.receipt.getSender(), e2[C.KEYS.BODY] = t2, e2;
          }, l.getReceiptEventFromJSON = function(e2) {
            var t2 = e2[C.KEYS.APP_ID], n2 = e2[C.KEYS.RECEIVER], o2 = e2[C.KEYS.RECEIVER_TYPE], s2 = e2[C.KEYS.DEVICE_ID], r2 = e2[C.KEYS.SENDER], i2 = e2[C.KEYS.BODY], a2 = i2[C.KEYS.ACTION], E = i2[C.KEYS.USER], c = i2[C.KEYS.MESSAGE_ID], u = i2[C.KEYS.TIMESTAMP], S = new l(t2, n2, o2, r2, s2);
            S.setAction(a2);
            var p = new T.MessageReceipt();
            return p.setSender(new d.User(E)), p.setReceiverType(o2), p.setReceiver(n2), a2 === C.RECEIPTS.ACTION.DELIVERED && (p.setReceiptType(C.RECEIPTS.RECEIPT_TYPE.DELIVERY_RECEIPT), p.setDeliveredAt(u)), a2 === C.RECEIPTS.ACTION.READ && (p.setReceiptType(C.RECEIPTS.RECEIPT_TYPE.READ_RECEIPT), p.setReadAt(u)), p.setMessageId(c.toString()), p.setTimestamp(u), S.setMessageReceipt(p), S;
          }, l;
        }(r.CometChatEvent);
        t.CometChatReceiptEvent = i;
      }, function(e, t, n) {
        "use strict";
        var o, s = this && this.__extends || (o = function(e2, t2) {
          return (o = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e3, t3) {
            e3.__proto__ = t3;
          } || function(e3, t3) {
            for (var n2 in t3)
              t3.hasOwnProperty(n2) && (e3[n2] = t3[n2]);
          })(e2, t2);
        }, function(e2, t2) {
          function n2() {
            this.constructor = e2;
          }
          o(e2, t2), e2.prototype = null === t2 ? Object.create(t2) : (n2.prototype = t2.prototype, new n2());
        });
        Object.defineProperty(t, "__esModule", { value: true }), t.CometChatTransientEvent = void 0;
        var p = n(5), r = n(9), l = n(32), C = n(3), i = function(i2) {
          function S(e2, t2, n2, o2, s2) {
            var r2 = i2.call(this, e2, t2, n2, o2, s2) || this;
            return r2.setType(p.TRANSIENT_MESSAGE.TYPE), r2;
          }
          return s(S, i2), S.prototype.getTransientMessage = function() {
            return this.transientMessage;
          }, S.prototype.setTransientMessage = function(e2) {
            this.transientMessage = e2;
          }, S.prototype.getAsString = function() {
            return JSON.stringify(this.getAsJSONObject());
          }, S.prototype.getAsJSONObject = function() {
            var e2 = this.getCometChatEventJSON(), t2 = {};
            return t2[p.KEYS.USER] = this.transientMessage.getSender(), this.transientMessage.getData() && (t2[p.KEYS.DATA] = this.transientMessage.getData()), e2[p.KEYS.BODY] = t2, e2;
          }, S.getTransientEventFromJSON = function(e2) {
            var t2 = e2[p.KEYS.APP_ID], n2 = e2[p.KEYS.RECEIVER], o2 = e2[p.KEYS.RECEIVER_TYPE], s2 = e2[p.KEYS.DEVICE_ID], r2 = e2[p.KEYS.SENDER], i3 = e2[p.KEYS.BODY], a = i3[p.KEYS.USER], E = i3[p.KEYS.DATA], c = new S(t2, n2, o2, r2, s2), u = new l.TransientMessage(n2, o2, E);
            return u.setSender(new C.User(a)), i3.hasOwnProperty(p.KEYS.DATA) && i3[p.KEYS.DATA] && u.setData(E), c.setTransientMessage(u), c;
          }, S;
        }(r.CometChatEvent);
        t.CometChatTransientEvent = i;
      }, function(e, t, n) {
        "use strict";
        var o, s = this && this.__extends || (o = function(e2, t2) {
          return (o = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function(e3, t3) {
            e3.__proto__ = t3;
          } || function(e3, t3) {
            for (var n2 in t3)
              t3.hasOwnProperty(n2) && (e3[n2] = t3[n2]);
          })(e2, t2);
        }, function(e2, t2) {
          function n2() {
            this.constructor = e2;
          }
          o(e2, t2), e2.prototype = null === t2 ? Object.create(t2) : (n2.prototype = t2.prototype, new n2());
        });
        Object.defineProperty(t, "__esModule", { value: true }), t.CometChatTypingEvent = void 0;
        var l = n(5), r = n(9), C = n(31), T = n(3), i = function(i2) {
          function p(e2, t2, n2, o2, s2) {
            var r2 = i2.call(this, e2, t2, n2, o2, s2) || this;
            return r2.setType(l.TYPING_INDICATOR.TYPE), r2;
          }
          return s(p, i2), p.prototype.getAction = function() {
            return this.action;
          }, p.prototype.setAction = function(e2) {
            this.action = e2;
          }, p.prototype.getTypingIndicator = function() {
            return this.typingIndicator;
          }, p.prototype.setTypingIndicator = function(e2) {
            this.typingIndicator = e2;
          }, p.prototype.getAsString = function() {
            return JSON.stringify(this.getAsJSONObject());
          }, p.prototype.getAsJSONObject = function() {
            var e2 = this.getCometChatEventJSON(), t2 = {};
            return t2[l.KEYS.ACTION] = this.action, t2[l.KEYS.USER] = this.typingIndicator.getSender(), this.typingIndicator.getMetadata() && (t2[l.KEYS.METADATA] = this.typingIndicator.getMetadata()), e2[l.KEYS.BODY] = t2, e2;
          }, p.getTypingEventFromJSON = function(e2) {
            var t2 = e2[l.KEYS.APP_ID], n2 = e2[l.KEYS.RECEIVER], o2 = e2[l.KEYS.RECEIVER_TYPE], s2 = e2[l.KEYS.DEVICE_ID], r2 = e2[l.KEYS.SENDER], i3 = e2[l.KEYS.BODY], a = i3[l.KEYS.ACTION], E = i3[l.KEYS.USER], c = i3[l.KEYS.METADATA], u = new p(t2, n2, o2, r2, s2);
            u.setAction(a);
            var S = new C.TypingIndicator(n2, o2);
            return S.setSender(new T.User(E)), i3.hasOwnProperty(l.KEYS.METADATA) && i3[l.KEYS.METADATA] && S.setMetadata(c), u.setTypingIndicator(S), u;
          }, p;
        }(r.CometChatEvent);
        t.CometChatTypingEvent = i;
      }, function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", { value: true }), t.getWSURL = t.stringifyMessage = t.checkConnection = void 0;
        var o = n(1), s = n(0), r = n(5);
        t.checkConnection = function(e2) {
          return e2 && e2.readyState === r.READY_STATE.OPEN;
        }, t.stringifyMessage = function(e2) {
          return JSON.stringify(e2);
        }, t.getWSURL = function() {
          return new Promise(function(n2, e2) {
            s.getAppSettings().then(function(e3) {
              var t2 = r.WS.protocol + s.getChatHost(e3) + ":" + e3[o.APP_SETTINGS.KEYS.CHAT_WSS_PORT];
              n2(t2);
            }, function(e3) {
              s.Logger.error("WSHelper :: getWSURL", e3);
            });
          });
        };
      }, function(e, t, n) {
        "use strict";
        Object.defineProperty(t, "__esModule", { value: true }), t.CCExtension = void 0;
        var o = n(0), s = function() {
          function e2(e3) {
            this.id = "", this.name = "", e3 && (o.isFalsy(e3.id) || (this.id = e3.id), o.isFalsy(e3.name) || (this.name = e3.name));
          }
          return e2.prototype.getId = function() {
            return this.id;
          }, e2.prototype.getName = function() {
            return this.name;
          }, e2;
        }();
        t.CCExtension = s;
      }, function(e, t, n) {
        "use strict";
        var r = this && this.__assign || function() {
          return (r = Object.assign || function(e2) {
            for (var t2, n2 = 1, o2 = arguments.length; n2 < o2; n2++)
              for (var s in t2 = arguments[n2])
                Object.prototype.hasOwnProperty.call(t2, s) && (e2[s] = t2[s]);
            return e2;
          }).apply(this, arguments);
        }, i = this && this.__awaiter || function(e2, i2, a2, E2) {
          return new (a2 || (a2 = Promise))(function(n2, t2) {
            function o2(e3) {
              try {
                r2(E2.next(e3));
              } catch (e4) {
                t2(e4);
              }
            }
            function s(e3) {
              try {
                r2(E2.throw(e3));
              } catch (e4) {
                t2(e4);
              }
            }
            function r2(e3) {
              var t3;
              e3.done ? n2(e3.value) : (t3 = e3.value, t3 instanceof a2 ? t3 : new a2(function(e4) {
                e4(t3);
              })).then(o2, s);
            }
            r2((E2 = E2.apply(e2, i2 || [])).next());
          });
        }, a = this && this.__generator || function(n2, o2) {
          var s, r2, i2, e2, a2 = { label: 0, sent: function() {
            if (1 & i2[0])
              throw i2[1];
            return i2[1];
          }, trys: [], ops: [] };
          return e2 = { next: t2(0), throw: t2(1), return: t2(2) }, "function" == typeof Symbol && (e2[Symbol.iterator] = function() {
            return this;
          }), e2;
          function t2(t3) {
            return function(e3) {
              return function(t4) {
                if (s)
                  throw new TypeError("Generator is already executing.");
                for (; a2; )
                  try {
                    if (s = 1, r2 && (i2 = 2 & t4[0] ? r2.return : t4[0] ? r2.throw || ((i2 = r2.return) && i2.call(r2), 0) : r2.next) && !(i2 = i2.call(r2, t4[1])).done)
                      return i2;
                    switch (r2 = 0, i2 && (t4 = [2 & t4[0], i2.value]), t4[0]) {
                      case 0:
                      case 1:
                        i2 = t4;
                        break;
                      case 4:
                        return a2.label++, { value: t4[1], done: false };
                      case 5:
                        a2.label++, r2 = t4[1], t4 = [0];
                        continue;
                      case 7:
                        t4 = a2.ops.pop(), a2.trys.pop();
                        continue;
                      default:
                        if (!(i2 = 0 < (i2 = a2.trys).length && i2[i2.length - 1]) && (6 === t4[0] || 2 === t4[0])) {
                          a2 = 0;
                          continue;
                        }
                        if (3 === t4[0] && (!i2 || t4[1] > i2[0] && t4[1] < i2[3])) {
                          a2.label = t4[1];
                          break;
                        }
                        if (6 === t4[0] && a2.label < i2[1]) {
                          a2.label = i2[1], i2 = t4;
                          break;
                        }
                        if (i2 && a2.label < i2[2]) {
                          a2.label = i2[2], a2.ops.push(t4);
                          break;
                        }
                        i2[2] && a2.ops.pop(), a2.trys.pop();
                        continue;
                    }
                    t4 = o2.call(n2, a2);
                  } catch (e4) {
                    t4 = [6, e4], r2 = 0;
                  } finally {
                    s = i2 = 0;
                  }
                if (5 & t4[0])
                  throw t4[1];
                return { value: t4[0] ? t4[1] : void 0, done: true };
              }([t3, e3]);
            };
          }
        };
        Object.defineProperty(t, "__esModule", { value: true }), t.PostDetails = void 0;
        var E = n(1), c = n(27), u = n(6), S = n(16), o = function() {
          function e2() {
            var t2 = this;
            this.uiKitSDK = { version: "" }, this.callSDK = { version: "" }, this.deviceId = "", this.platform = "unknown", this.sessionId = "", this.origin = "", this.debugMode = false, this.getOperatingSystem = function() {
              var e3 = window.navigator.userAgent;
              return /Windows/.test(e3) ? "Windows" : /Mac/.test(e3) ? "Mac OS" : /Linux/.test(e3) ? "Linux" : /Android/.test(e3) ? "Android" : /iOS/.test(e3) ? "iOS" : "Unknown";
            }, this.isIP = function(e3) {
              return /^(?:[0-9]{1,3}\.){3}[0-9]{1,3}$/.test(e3);
            }, c.KeyStore.getInstance().get(E.LOCAL_STORE.KEY_DEVICE_ID).then(function(e3) {
              e3 && (t2.deviceId = e3);
            }), this.getSDKVersion(), this.getPlatform(), this.getOrgin(), setTimeout(function() {
              t2.postDetails();
            }, 5e3);
          }
          return e2.prototype.getOrientation = function() {
            return window.matchMedia("(orientation: portrait)").matches ? "Portrait" : window.matchMedia("(orientation: landscape)").matches ? "Landscape" : "Unknown";
          }, e2.prototype.getPlatform = function() {
            document.querySelector("#root, #app") && (this.platform = "react"), document.querySelector("app-root") && (this.platform = "angular"), document.querySelector("[__vue__]") && (this.platform = "vue"), "Ember" in window && (this.platform = "ember"), "Backbone" in window && (this.platform = "backbone"), "Meteor" in window && (this.platform = "meteor"), "ko" in window && (this.platform = "ko");
          }, e2.prototype.getSDKVersion = function() {
            window.CometChatUiKit && (this.uiKitSDK = window.CometChatUiKit), window.CometChatCallSDK && (this.callSDK = window.CometChatCallSDK);
          }, e2.prototype.getUIKitPlatform = function(e3) {
            return e3 ? e3.includes("react") ? "react" : e3.includes("angular") ? "angular" : e3.includes("vue") ? "vue" : void 0 : "";
          }, e2.prototype.getBrowser = function() {
            var e3 = navigator.userAgent;
            return /Chrome/.test(e3) && !/Edge/.test(e3) ? "Google Chrome" : /Firefox/.test(e3) ? "Mozilla Firefox" : /Safari/.test(e3) && !/Chrome/.test(e3) ? "Safari" : /Edge/.test(e3) ? "Microsoft Edge" : /Trident\/7\./.test(e3) ? "Internet Explorer" : /Opera\//.test(e3) || /OPR\//.test(e3) ? "Opera" : "Unknown Browser";
          }, e2.prototype.getOrgin = function() {
            this.origin = window.location.hostname, (this.origin.includes("localhost") || this.isIP(this.origin)) && (this.debugMode = true);
          }, e2.prototype.encodeSHA256 = function(s) {
            return i(this, void 0, void 0, function() {
              var t2, n2, o2;
              return a(this, function(e3) {
                switch (e3.label) {
                  case 0:
                    return t2 = new TextEncoder().encode(s), [4, crypto.subtle.digest("SHA-256", t2)];
                  case 1:
                    return n2 = e3.sent(), o2 = Array.from(new Uint8Array(n2)), [2, o2.map(function(e4) {
                      return e4.toString(16).padStart(2, "0");
                    }).join("")];
                }
              });
            });
          }, e2.prototype.getSessionIdHash = function() {
            var n2, o2;
            return i(this, void 0, void 0, function() {
              var t2;
              return a(this, function(e3) {
                switch (e3.label) {
                  case 0:
                    return t2 = "" + E.SDKHeader.sdkVersion + (null !== (n2 = this.callSDK.version) && void 0 !== n2 ? n2 : null) + (null !== (o2 = this.uiKitSDK.version) && void 0 !== o2 ? o2 : null) + this.debugMode + (S.CometChat.demoMetaInfo ? S.CometChat.demoMetaInfo.version : null), [4, this.encodeSHA256(t2)];
                  case 1:
                    return [2, e3.sent()];
                }
              });
            });
          }, e2.prototype.getStoredSessionIdHash = function() {
            return i(this, void 0, void 0, function() {
              return a(this, function(e3) {
                switch (e3.label) {
                  case 0:
                    return [4, c.KeyStore.getInstance().get(E.LOCAL_STORE.KEY_SESSION_ID)];
                  case 1:
                    return [2, e3.sent()];
                }
              });
            });
          }, e2.prototype.isMobile = function() {
            return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
          }, e2.prototype.getTimeZone = function() {
            var e3 = (/* @__PURE__ */ new Date()).getTimezoneOffset(), t2 = Math.floor(Math.abs(e3) / 60), n2 = Math.abs(e3) % 60;
            return (0 < e3 ? "-" : "+") + (t2 = t2 < 10 ? "0" + t2 : t2) + ":" + (n2 = n2 < 10 ? "0" + n2 : n2);
          }, e2.prototype.postDetails = function() {
            var s;
            return i(this, void 0, void 0, function() {
              var t2, n2, o2 = this;
              return a(this, function(e3) {
                switch (e3.label) {
                  case 0:
                    return [4, this.getSessionIdHash()];
                  case 1:
                    return t2 = e3.sent(), [4, this.getStoredSessionIdHash()];
                  case 2:
                    return e3.sent() === t2 || (n2 = { sessionId: t2, data: r(r({ cometchat: r(r(r({}, this.uiKitSDK.version ? { uikit: { platform: this.getUIKitPlatform(this.uiKitSDK.name), version: this.uiKitSDK.version } } : {}), { chatsdk: { platform: "javascript", version: E.SDKHeader.sdkVersion } }), this.callSDK.version ? { callssdk: { platform: "javascript", version: this.callSDK.version } } : {}) }, S.CometChat.demoMetaInfo ? { demo: { name: S.CometChat.demoMetaInfo.name, type: S.CometChat.demoMetaInfo.type, version: S.CometChat.demoMetaInfo.version, platform: S.CometChat.demoMetaInfo.platform } } : {}), { app: { url: this.origin, debug: this.debugMode, browser: this.getBrowser(), isMobileBrowser: this.isMobile() }, device: { id: this.deviceId, platform: this.platform, language: navigator.language, resolution: window.screen.width + " × " + window.screen.height, userAgent: navigator.userAgent, timezone: this.getTimeZone(), os: { name: this.getOperatingSystem() } }, meta: { network: null === (s = navigator.connection) || void 0 === s ? void 0 : s.effectiveType, deviceOrientation: this.getOrientation() } }), generatedAt: Math.ceil((/* @__PURE__ */ new Date()).valueOf() / 1e3) }, u.makeApiCall("userSessions", {}, n2).then(function(t3) {
                      return i(o2, void 0, void 0, function() {
                        return a(this, function(e4) {
                          switch (e4.label) {
                            case 0:
                              return t3.data.sessionId ? [4, c.KeyStore.getInstance().set(E.LOCAL_STORE.KEY_SESSION_ID, t3.data.sessionId)] : [3, 2];
                            case 1:
                              e4.sent(), e4.label = 2;
                            case 2:
                              return [2];
                          }
                        });
                      });
                    })), [2];
                }
              });
            });
          }, e2;
        }();
        t.PostDetails = o;
      }, function(e, t, n) {
        "use strict";
        var c = this && this.__assign || function() {
          return (c = Object.assign || function(e2) {
            for (var t2, n2 = 1, o2 = arguments.length; n2 < o2; n2++)
              for (var s2 in t2 = arguments[n2])
                Object.prototype.hasOwnProperty.call(t2, s2) && (e2[s2] = t2[s2]);
            return e2;
          }).apply(this, arguments);
        }, s = this && this.__awaiter || function(e2, i2, a2, E) {
          return new (a2 || (a2 = Promise))(function(n2, t2) {
            function o2(e3) {
              try {
                r2(E.next(e3));
              } catch (e4) {
                t2(e4);
              }
            }
            function s2(e3) {
              try {
                r2(E.throw(e3));
              } catch (e4) {
                t2(e4);
              }
            }
            function r2(e3) {
              var t3;
              e3.done ? n2(e3.value) : (t3 = e3.value, t3 instanceof a2 ? t3 : new a2(function(e4) {
                e4(t3);
              })).then(o2, s2);
            }
            r2((E = E.apply(e2, i2 || [])).next());
          });
        }, u = this && this.__generator || function(n2, o2) {
          var s2, r2, i2, e2, a2 = { label: 0, sent: function() {
            if (1 & i2[0])
              throw i2[1];
            return i2[1];
          }, trys: [], ops: [] };
          return e2 = { next: t2(0), throw: t2(1), return: t2(2) }, "function" == typeof Symbol && (e2[Symbol.iterator] = function() {
            return this;
          }), e2;
          function t2(t3) {
            return function(e3) {
              return function(t4) {
                if (s2)
                  throw new TypeError("Generator is already executing.");
                for (; a2; )
                  try {
                    if (s2 = 1, r2 && (i2 = 2 & t4[0] ? r2.return : t4[0] ? r2.throw || ((i2 = r2.return) && i2.call(r2), 0) : r2.next) && !(i2 = i2.call(r2, t4[1])).done)
                      return i2;
                    switch (r2 = 0, i2 && (t4 = [2 & t4[0], i2.value]), t4[0]) {
                      case 0:
                      case 1:
                        i2 = t4;
                        break;
                      case 4:
                        return a2.label++, { value: t4[1], done: false };
                      case 5:
                        a2.label++, r2 = t4[1], t4 = [0];
                        continue;
                      case 7:
                        t4 = a2.ops.pop(), a2.trys.pop();
                        continue;
                      default:
                        if (!(i2 = 0 < (i2 = a2.trys).length && i2[i2.length - 1]) && (6 === t4[0] || 2 === t4[0])) {
                          a2 = 0;
                          continue;
                        }
                        if (3 === t4[0] && (!i2 || t4[1] > i2[0] && t4[1] < i2[3])) {
                          a2.label = t4[1];
                          break;
                        }
                        if (6 === t4[0] && a2.label < i2[1]) {
                          a2.label = i2[1], i2 = t4;
                          break;
                        }
                        if (i2 && a2.label < i2[2]) {
                          a2.label = i2[2], a2.ops.push(t4);
                          break;
                        }
                        i2[2] && a2.ops.pop(), a2.trys.pop();
                        continue;
                    }
                    t4 = o2.call(n2, a2);
                  } catch (e4) {
                    t4 = [6, e4], r2 = 0;
                  } finally {
                    s2 = i2 = 0;
                  }
                if (5 & t4[0])
                  throw t4[1];
                return { value: t4[0] ? t4[1] : void 0, done: true };
              }([t3, e3]);
            };
          }
        };
        Object.defineProperty(t, "__esModule", { value: true }), t.ReactionRequestBuilder = t.ReactionRequest = void 0;
        var S = n(2), r = n(6), o = n(0), p = n(1), l = n(10), i = function() {
          function e2(e3) {
            this.limit = p.DEFAULT_VALUES.REACTIONS_LIMIT, this.msgId = p.DEFAULT_VALUES.DEFAULT_MSG_ID, this.params = {}, this.inProgress = false, this.paginationMeta = {}, this.endpointName = "getReactionsList", e3.reaction && (this.reaction = e3.reaction), e3.limit && (this.limit = e3.limit), this.msgId = e3.msgId;
          }
          return e2.prototype.fetchNext = function() {
            var e3 = this;
            return new Promise(function(a2, E) {
              return s(e3, void 0, void 0, function() {
                var t2, n2, o2, s2, r2, i2;
                return u(this, function(e4) {
                  switch (e4.label) {
                    case 0:
                      if (e4.trys.push([0, 5, , 6]), this.inProgress)
                        return this.inProgress = false, E(new S.CometChatException(l.MESSAGES_REQUEST_ERRORS.REQUEST_IN_PROGRESS_ERROR)), [2];
                      if (this.inProgress = true, 0 == this.msgId)
                        return this.inProgress = false, E(new S.CometChatException(l.MESSAGES_REQUEST_ERRORS.NOT_ENOUGH_PARAMS)), [2];
                      t2 = c(((r2 = { limit: this.limit })[p.MessageConstatnts.PAGINATION.KEYS.AFFIX] = p.MessageConstatnts.PAGINATION.AFFIX.APPEND, r2), null !== (i2 = this.nextPage) && void 0 !== i2 ? i2 : {}), e4.label = 1;
                    case 1:
                      return e4.trys.push([1, 3, , 4]), [4, this.makeAPICall(t2)];
                    case 2:
                      return n2 = e4.sent(), a2(n2), this.inProgress = false, [3, 4];
                    case 3:
                      return o2 = e4.sent(), this.inProgress = false, E(new S.CometChatException(o2)), [3, 4];
                    case 4:
                      return [3, 6];
                    case 5:
                      return s2 = e4.sent(), this.inProgress = false, E(new S.CometChatException(s2)), [3, 6];
                    case 6:
                      return [2];
                  }
                });
              });
            });
          }, e2.prototype.fetchPrevious = function() {
            var e3 = this;
            return new Promise(function(a2, E) {
              return s(e3, void 0, void 0, function() {
                var t2, n2, o2, s2, r2, i2;
                return u(this, function(e4) {
                  switch (e4.label) {
                    case 0:
                      if (e4.trys.push([0, 5, , 6]), this.inProgress)
                        return E(new S.CometChatException(l.MESSAGES_REQUEST_ERRORS.REQUEST_IN_PROGRESS_ERROR)), this.inProgress = false, [2];
                      this.inProgress = true, t2 = c(((r2 = { limit: this.limit })[p.MessageConstatnts.PAGINATION.KEYS.AFFIX] = p.MessageConstatnts.PAGINATION.AFFIX.PREPEND, r2), null !== (i2 = this.previousPage) && void 0 !== i2 ? i2 : {}), e4.label = 1;
                    case 1:
                      return e4.trys.push([1, 3, , 4]), [4, this.makeAPICall(t2)];
                    case 2:
                      return n2 = e4.sent(), a2(n2), this.inProgress = false, [3, 4];
                    case 3:
                      return o2 = e4.sent(), this.inProgress = false, E(new S.CometChatException(o2)), [3, 4];
                    case 4:
                      return [3, 6];
                    case 5:
                      return s2 = e4.sent(), this.inProgress = false, E(new S.CometChatException(s2)), [3, 6];
                    case 6:
                      return [2];
                  }
                });
              });
            });
          }, e2.prototype.makeAPICall = function(e3) {
            var o2 = this;
            return new Promise(function(n2, t2) {
              try {
                o2.createEndpoint(), r.makeApiCall(o2.endpointName, o2.params, e3).then(function(t3) {
                  return s(o2, void 0, void 0, function() {
                    return u(this, function(e4) {
                      return this.paginationMeta = t3.meta, t3.meta && t3.meta.next && (this.nextPage = t3.meta.next), t3.meta && t3.meta.previous && (this.previousPage = t3.meta.previous), n2(t3.data), [2];
                    });
                  });
                }, function(e4) {
                  t2(new S.CometChatException(e4.error));
                });
              } catch (e4) {
                t2(new S.CometChatException(e4));
              }
            });
          }, e2.prototype.createEndpoint = function() {
            o.isFalsy(this.reaction) ? (this.endpointName = "getReactionsList", this.params = { messageId: this.msgId }) : (this.endpointName = "getFilteredReactionsList", this.params = { messageId: this.msgId, reaction: this.reaction });
          }, e2;
        }();
        t.ReactionRequest = i;
        var a = function() {
          function e2() {
            this.msgId = p.DEFAULT_VALUES.DEFAULT_MSG_ID;
          }
          return e2.prototype.setLimit = function(e3) {
            return this.limit = e3, this;
          }, e2.prototype.setMessageId = function(e3) {
            return void 0 === e3 && (e3 = p.DEFAULT_VALUES.DEFAULT_MSG_ID), this.msgId = e3, this;
          }, e2.prototype.setReaction = function(e3) {
            return this.reaction = e3, this;
          }, e2.prototype.build = function() {
            return new i(this);
          }, e2;
        }();
        t.ReactionRequestBuilder = a;
      }, function(e, t, n) {
        var i = n(73), a = n(74);
        e.exports = function(e2, t2, n2) {
          var o = t2 && n2 || 0;
          "string" == typeof e2 && (t2 = "binary" === e2 ? new Array(16) : null, e2 = null);
          var s = (e2 = e2 || {}).random || (e2.rng || i)();
          if (s[6] = 15 & s[6] | 64, s[8] = 63 & s[8] | 128, t2)
            for (var r = 0; r < 16; ++r)
              t2[o + r] = s[r];
          return t2 || a(s);
        };
      }, function(e, t) {
        var n = "undefined" != typeof crypto && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || "undefined" != typeof msCrypto && "function" == typeof window.msCrypto.getRandomValues && msCrypto.getRandomValues.bind(msCrypto);
        if (n) {
          var o = new Uint8Array(16);
          e.exports = function() {
            return n(o), o;
          };
        } else {
          var s = new Array(16);
          e.exports = function() {
            for (var e2, t2 = 0; t2 < 16; t2++)
              0 == (3 & t2) && (e2 = 4294967296 * Math.random()), s[t2] = e2 >>> ((3 & t2) << 3) & 255;
            return s;
          };
        }
      }, function(e, t) {
        for (var s = [], n = 0; n < 256; ++n)
          s[n] = (n + 256).toString(16).substr(1);
        e.exports = function(e2, t2) {
          var n2 = t2 || 0, o = s;
          return [o[e2[n2++]], o[e2[n2++]], o[e2[n2++]], o[e2[n2++]], "-", o[e2[n2++]], o[e2[n2++]], "-", o[e2[n2++]], o[e2[n2++]], "-", o[e2[n2++]], o[e2[n2++]], "-", o[e2[n2++]], o[e2[n2++]], o[e2[n2++]], o[e2[n2++]], o[e2[n2++]], o[e2[n2++]]].join("");
        };
      }]);
    }), function() {
      try {
        __require("@cometchat/calls-sdk-javascript") && (window.CometChatCallSDK = __require("@cometchat/calls-sdk-javascript/package.json"));
      } catch (e) {
      }
      try {
        __require("@cometchat/chat-uikit-react") && (window.CometChatUiKit = __require("@cometchat/chat-uikit-react/package.json"));
      } catch (e) {
      }
      try {
        __require("@cometchat/chat-uikit-angular") && (window.CometChatUiKit = __require("@cometchat/chat-uikit-angular/package.json"));
      } catch (e) {
      }
      try {
        __require("@cometchat/chat-uikit-vue") && (window.CometChatUiKit = __require("@cometchat/chat-uikit-vue/package.json"));
      } catch (e) {
      }
    }();
  }
});
export default require_CometChat();
//# sourceMappingURL=@cometchat_chat-sdk-javascript.js.map
